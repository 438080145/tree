# 摄像头访问解决方案

## 方案1：使用 localhost 本地服务器（推荐）

### 方法A：使用 Python（最简单）
1. 打开命令行/终端
2. 进入项目目录
3. 运行以下命令：

**Python 3:**
```bash
python -m http.server 8000
```

**Python 2:**
```bash
python -m SimpleHTTPServer 8000
```

4. 在浏览器访问：`http://localhost:8000/christmas_tree_touch&gesture.html`

### 方法B：使用 Node.js
```bash
npx http-server . -p 8000
```

### 方法C：使用 VS Code Live Server
1. 安装 VS Code 的 "Live Server" 插件
2. 右键点击 HTML 文件
3. 选择 "Open with Live Server"

## 方案2：使用 HTTPS 本地服务器

### 使用 mkcert 创建本地证书（推荐）

1. **安装 mkcert**（需要先安装 Homebrew 或 Chocolatey）

**Windows (使用 Chocolatey):**
```powershell
choco install mkcert
```

**macOS:**
```bash
brew install mkcert
```

**Linux:**
```bash
# Ubuntu/Debian
sudo apt install libnss3-tools
wget https://github.com/FiloSottile/mkcert/releases/download/v1.4.4/mkcert-v1.4.4-linux-amd64
sudo mv mkcert-v1.4.4-linux-amd64 /usr/local/bin/mkcert
sudo chmod +x /usr/local/bin/mkcert
```

2. **创建本地CA并安装**
```bash
mkcert -install
```

3. **为项目生成证书**
```bash
mkcert localhost 127.0.0.1 ::1
```

4. **使用 HTTPS 服务器运行**

**使用 Node.js (http-server):**
```bash
npx http-server . -p 8443 -S -C localhost+2.pem -K localhost+2-key.pem
```

**使用 Python (需要安装):**
```bash
pip install pyopenssl
python -m http.server 8443 --bind 127.0.0.1
# 然后手动配置SSL（较复杂）
```

## 方案3：修改浏览器设置（不推荐，仅用于测试）

⚠️ **警告：这会降低浏览器安全性，仅用于本地开发测试**

### Chrome/Edge:
1. 关闭所有 Chrome 窗口
2. 使用以下命令启动（Windows）：
```bash
chrome.exe --unsafely-treat-insecure-origin-as-secure=http://你的IP地址:端口 --user-data-dir="C:/temp/chrome_dev"
```

### Firefox:
1. 访问 `about:config`
2. 搜索 `media.getusermedia.insecure.enabled`
3. 设置为 `true`

## 方案4：使用在线 HTTPS 服务

将项目部署到支持 HTTPS 的免费服务：
- **GitHub Pages**（自动HTTPS）
- **Netlify**（自动HTTPS）
- **Vercel**（自动HTTPS）
- **Cloudflare Pages**（自动HTTPS）

## 当前代码已支持 localhost

您的代码已经检查了 localhost，所以使用方案1最简单！

```javascript
// 代码中已有此判断
else if (window.location.protocol !== 'https:' && window.location.hostname !== 'localhost')
```

只要使用 `http://localhost:端口` 访问，就不会出现HTTPS错误。



