(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-index-cargoPosition-children-productsOnSale-productsOnSale"],{"0157":function(t,e,i){"use strict";var o=i("d4d7"),a={containerPage:function(t){return(0,o.get)("api/basicData/container/page",t,1)},containerGoods:function(t){return(0,o.get)("api/basicData/containerGoods/page",t,1)},containerGoodsDelete:function(t){return(0,o.del)("api/basicData/containerGoodsAll/list?ids="+t.ids+"&depotPartition="+t.depotPartition,t,1)},containerGoodsAdd:function(t){return(0,o.post)("api/basicData/containerGoods",t,1)},checkContainerGoods:function(t){return(0,o.get)("api/basicData/checkContainerGoods",t,1)},searchGoods:function(t){return(0,o.get)("api/basicData/containerCp/page",t,1)},updateDeviceNo:function(t){return(0,o.post)("api/basicData/containerGoods/updateDeviceNo",t,1)},getLighting:function(t){return(0,o.get)("api/basedata/dictionnary?dictionaryTypeId=31&status=1",t,1)},getStorehouseArea:function(t){return(0,o.get)("api/basedata/dictionnary/list?dictionaryTypeId=10&status=1",t,1)},getStorehouseList:function(t){return(0,o.get)("api/basicData/organizationInfo",t,1)},getPositionCode:function(t){return(0,o.get)("api/basicData/container/code",t,1)},getPosition:function(t){return(0,o.get)("api/basicData/container/"+t,{},1)},savePosition:function(t){return(0,o.post)("api/basicData/container",t,1)},updatePosition:function(t){return(0,o.post)("api/basicData/container/"+t.id,t.data,1)},deletePosition:function(t){return(0,o.get)("/api/basicData/container/all",t,1)}};t.exports=a},"0483":function(t,e,i){"use strict";(function(t){i("6a54"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("64aa");var o={name:"UniList","mp-weixin":{options:{multipleSlots:!1}},data:function(){return{}},props:{enableBackToTop:{type:[Boolean,String],default:!1},scrollY:{type:[Boolean,String],default:!0},isAndroid:{type:Boolean,default:function(){return!0}},scrollTop:{type:Number,default:function(){return 0}},scrollIntoView:{type:String,default:function(){return""}}},created:function(){this.pullDown={threshold:95,maxHeight:200,callRefresh:"onrefresh",callPullingDown:"onpullingdown",refreshSelector:".uni-refresh"},this.height=0,this.canPullDown=!1,this.refreshInstance={}},methods:{scroll:function(t){var e;e=this.isAndroid?-t.contentOffset.y:t.detail.scrollTop,this.$emit("scroll",e)},loadMore:function(t){this.$emit("scrolltolower")},ontouchstart:function(e){this.canPullDown?(this.height=0,this.touchStartY=e.touches[0].pageY||e.changedTouches[0].pageY,this._updateRefresh(0),this.refreshInstance.callMethod("onchange",!0)):t.log("canPullDown",this.canPullDown)},ontouchmove:function(t){if(this.canPullDown){this.height;var e=t.touches[0].pageY||t.changedTouches[0].pageY,i=e-this.touchStartY;i>this.pullDown.maxHeight||(this._updateRefresh(i),i=i<this.pullDown.maxHeight?i:this.pullDown.maxHeight,this.height=i,this.refreshInstance.callMethod(this.pullDown.callPullingDown,{height:i}))}},ontouchend:function(t){this.canPullDown&&(this.refreshInstance.callMethod("onchange",!1),this.height>this.pullDown.threshold?refreshInstance.callMethod(this.pullDown.callRefresh):this._updateRefresh(0))},_updateRefresh:function(t){this.refreshInstance.setStyle({height:t})}}};e.default=o}).call(this,i("ba7c")["default"])},"0825":function(t,e,i){"use strict";i.r(e);var o=i("0483"),a=i.n(o);for(var n in o)["default"].indexOf(n)<0&&function(t){i.d(e,t,(function(){return o[t]}))}(n);e["default"]=a.a},"0dd9":function(t,e,i){"use strict";i.r(e);var o=i("1b75"),a=i("f5cb");for(var n in a)["default"].indexOf(n)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(n);i("1932");var s=i("828b"),d=Object(s["a"])(a["default"],o["b"],o["c"],!1,null,"694e750a",null,!1,o["a"],void 0);e["default"]=d.exports},1932:function(t,e,i){"use strict";var o=i("b7fa"),a=i.n(o);a.a},"1b75":function(t,e,i){"use strict";i.d(e,"b",(function(){return o})),i.d(e,"c",(function(){return a})),i.d(e,"a",(function(){}));var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"contain"},[i("v-uni-view",{staticClass:"head",style:{width:t.windowWidth+"px"}},[i("v-uni-view",{staticClass:"header-left"},[i("v-uni-image",{staticClass:"header-image",attrs:{src:"/static/img/index/left.png",mode:""},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.goBack.apply(void 0,arguments)}}})],1),i("v-uni-view",{staticClass:"header-middle"},[i("v-uni-text",{staticClass:"header-text"},[t._v("上架商品")])],1),i("v-uni-view",{staticClass:"header-right"},[i("v-uni-text",{staticClass:"header-right-last",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.lastLocation.apply(void 0,arguments)}}},[t._v("上一货位")])],1)],1),i("uni-list",{staticClass:"list",attrs:{isAndroid:t.isAndroid,enableBackToTop:!0,"scroll-y":!0},on:{scrolltolower:function(e){arguments[0]=e=t.$handleEvent(e),t.loadMore()}}},[i("uni-cell",{staticClass:"top",attrs:{isAndroid:t.isAndroid}},[i("v-uni-text",{staticClass:"top-title"},[t._v("货位编号："+t._s(t.containerData?t.containerData.code:""))]),i("v-uni-view",{staticClass:"top-row"},[i("v-uni-text",{staticClass:"top-text"},[t._v("仓库："+t._s(t.containerData?t.containerData.storehouseName:""))]),i("v-uni-text",{staticClass:"top-text"},[t._v("所属区域："+t._s(t.containerData?t.containerData.partitionName:""))])],1),i("v-uni-view",{staticClass:"top-row"},[i("v-uni-text",{staticClass:"top-text"},[t._v("仓库区域："+t._s(t.containerData?2==t.containerData.depotPartition?"件区域":"散区域":""))])],1),i("v-uni-view",{staticClass:"top-row"},[i("v-uni-text",{staticClass:"top-text2"},[t._v("条码：")]),i("v-uni-input",{staticClass:"top-input",attrs:{type:"text",placeholder:"商品名称/货号/条码","confirm-type":"search",focus:t.focusinput},on:{blur:function(e){arguments[0]=e=t.$handleEvent(e),t.getValue.apply(void 0,arguments)},confirm:function(e){arguments[0]=e=t.$handleEvent(e),t.closeKeyboard.apply(void 0,arguments)},focus:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.closeDialogMask.apply(void 0,arguments)}},model:{value:t.inputValue,callback:function(e){t.inputValue=e},expression:"inputValue"}}),i("v-uni-text",{staticClass:"top-add",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.commodityList.apply(void 0,arguments)}}},[t._v("添加商品")])],1),i("v-uni-view",{staticClass:"top-row2"},[i("v-uni-view",{staticClass:"top-row-imageBox",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.commodityList.apply(void 0,arguments)}}},[i("v-uni-image",{staticClass:"top-row-image",attrs:{src:"/static/img/outNote/add.png",mode:""}})],1),i("v-uni-view",{staticClass:"top-row-imageBox",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.scanning.apply(void 0,arguments)}}},[i("v-uni-image",{staticClass:"top-row-image",attrs:{src:"/static/img/outNote/cann.png",mode:""}})],1)],1)],1),t._l(t.containerGoodsList,(function(e,o){return i("uni-cell",{key:e.id+"_"+o,staticClass:"list-commodity",attrs:{isAndroid:t.isAndroid}},[i("v-uni-image",{staticClass:"list-commodity-image",attrs:{src:e.picture,mode:""}}),i("v-uni-view",{staticClass:"list-commodity-box"},[i("v-uni-view",{staticClass:"list-commodity-box-row"},[i("v-uni-text",{staticClass:"list-commodity-box-title"},[t._v(t._s(e.goodsName))]),i("v-uni-image",{staticClass:"list-commodity-box-delete",attrs:{src:"/static/img/delete.png",mode:""},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.deleteItem(o)}}})],1),i("v-uni-text",{staticClass:"list-commodity-box-text"},[t._v("货号："+t._s(e.goodsCode))]),i("v-uni-text",{staticClass:"list-commodity-box-text"},[t._v("条码："+t._s(e.barCode))]),i("v-uni-text",{staticClass:"list-commodity-box-text"},[t._v("规格：1 X "+t._s(e.packingSpecification))]),i("v-uni-text",{staticClass:"list-commodity-box-text"},[t._v("型号："+t._s(e.typeSpecification))])],1),i("v-uni-view",{staticClass:"list-commodity-line"})],1)}))],2),i("v-uni-view",{staticClass:"foot",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.nextLocation.apply(void 0,arguments)}}},[i("v-uni-text",{staticClass:"foot-text"},[t._v("下一货位")])],1),t.onModal?i("v-uni-view",{staticClass:"Modal"},[i("v-uni-view",{staticClass:"Modal-mask",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.showModal.apply(void 0,arguments)}}}),i("v-uni-view",{staticClass:"Modal-content"},[i("v-uni-view",{staticClass:"Modal-content-hd"},[i("v-uni-text",{staticClass:"Modal-content-hd-text"},[t._v("提示")]),i("v-uni-image",{staticClass:"Modal-content-hd-image",attrs:{src:"/static/img/del.png",mode:""},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.showModal.apply(void 0,arguments)}}})],1),i("uni-list",{staticClass:"Modal-content-bd",attrs:{isAndroid:t.isAndroid,enableBackToTop:!0,"scroll-y":!0}},[t._l(t.addConflictCommodityList,(function(e,o){return i("uni-cell",{key:o,staticClass:"Modal-content-bd-box",attrs:{isAndroid:t.isAndroid}},[i("v-uni-text",{staticClass:"Modal-content-bd-box-text"},[t._v(t._s(e.name)+" 已有货位 "+t._s(e.containerCode))])],1)})),i("uni-cell",{staticClass:"Modal-content-bd-box-text",attrs:{isAndroid:t.isAndroid}},[i("v-uni-text",{staticClass:"Modal-content-bd-box-text",staticStyle:{color:"red"}},[t._v("是否变更上述商品货位？")])],1)],2),i("v-uni-view",{staticClass:"Modal-content-ft"},[i("v-uni-text",{staticClass:"Modal-content-ft-cancel",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.showModal.apply(void 0,arguments)}}},[t._v("取消")]),i("v-uni-text",{staticClass:"Modal-content-ft-line"}),i("v-uni-text",{staticClass:"Modal-content-ft-confirm",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.addData.apply(void 0,arguments)}}},[t._v("确定")])],1)],1)],1):t._e()],1)},a=[]},2705:function(t,e,i){"use strict";i.r(e);var o=i("cbe8"),a=i("ba29");for(var n in a)["default"].indexOf(n)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(n);var s=i("828b"),d=Object(s["a"])(a["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],void 0);e["default"]=d.exports},"3a01":function(t,e,i){var o=i("f269");o.__esModule&&(o=o.default),"string"===typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);var a=i("967d").default;a("abb37eb8",o,!0,{sourceMap:!1,shadowMode:!1})},"4bf6":function(t,e,i){"use strict";i.d(e,"b",(function(){return o})),i.d(e,"c",(function(){return a})),i.d(e,"a",(function(){}));var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-scroll-view",{staticClass:"uni-list",attrs:{enableBackToTop:t.enableBackToTop,"scroll-y":t.scrollY,"scroll-top":t.scrollTop,"scroll-into-view":t.scrollIntoView},on:{scroll:function(e){arguments[0]=e=t.$handleEvent(e),t.scroll.apply(void 0,arguments)},scrolltolower:function(e){arguments[0]=e=t.$handleEvent(e),t.loadMore.apply(void 0,arguments)}}},[t._t("default")],2)},a=[]},8824:function(t,e,i){"use strict";i("6a54"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("fd3c"),i("c223"),i("aa9c"),i("5ef2"),i("20f3");var o={previewPhoto:function(t,e){var i=e.map((function(t,e){return t.picture}));uni.previewImage({current:i[t],urls:i})},unique:function(t,e){for(var i=t.concat(e),o={},a=[],n=0;n<i.length;n++)o["s_"+i[n].id]=i[n];for(var s in o)a.push(o[s]);return a},IsPicture:function(t){if(t&&t.indexOf(".")>-1){var e=t.lastIndexOf("."),i=t.substring(e,t.length)+"|";if(i=i.toLowerCase(),".jpeg|.gif|.jpg|.png|.bmp|.pic|.svg|".indexOf(i)>-1)return!0}return!1}};e.default=o},"8b10":function(t,e,i){"use strict";var o=i("3a01"),a=i.n(o);a.a},"8bb6":function(t,e,i){"use strict";i("6a54"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("64aa");var o={name:"UniCell",props:{cellItem:{type:Object,default:function(){return{}}},cellIndex:{type:Number,default:function(){return 0}},isAndroid:{type:Boolean,default:function(){return!0}}},methods:{myclick:function(t){this.$emit("cellTap",{e:t,item:this.cellItem,index:this.cellIndex})}}};e.default=o},"906f":function(t,e,i){"use strict";i.r(e);var o=i("4bf6"),a=i("0825");for(var n in a)["default"].indexOf(n)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(n);i("8b10");var s=i("828b"),d=i("dadf"),c=Object(s["a"])(a["default"],o["b"],o["c"],!1,null,"f68df4d2",null,!1,o["a"],void 0);"function"===typeof d["a"]&&Object(d["a"])(c),e["default"]=c.exports},b468:function(t,e,i){var o=i("c86c");e=o(!1),e.push([t.i,".contain[data-v-694e750a]{flex:1;display:flex;flex-direction:column;\r\nheight:100%\n}.head[data-v-694e750a]{display:flex;flex-direction:row;justify-content:space-between;position:relative;height:%?150?%;padding-top:%?80?%;background-color:#fff;z-index:100;font-weight:500;border-bottom-width:1px;border-bottom-style:solid;border-bottom-color:#ddd}.header-left[data-v-694e750a]{flex:2}.header-middle[data-v-694e750a]{flex:6}.header-right[data-v-694e750a]{display:flex;flex-direction:row;\r\n\t/* justify-content: flex-end; */flex:2}.header-text[data-v-694e750a]{color:#000;font-size:%?34?%;text-align:center;line-height:%?60?%}.header-image[data-v-694e750a]{width:%?48?%;height:%?48?%;margin-top:%?6?%;margin-right:%?14?%;margin-bottom:%?6?%;margin-left:%?14?%;display:block}.header-right-last[data-v-694e750a]{height:%?56?%;padding-left:%?10?%;padding-right:%?10?%;font-size:%?25?%;line-height:%?56?%;border-radius:%?6?%;text-align:center;color:#fff;\r\n    /* border-top-color: #ddd;\r\n    border-top-style: solid;\r\n    border-top-width: 1px;\r\n    border-right-color: #ddd;\r\n    border-right-style: solid;\r\n    border-right-width: 1px;\r\n    border-bottom-color: #ddd;\r\n    border-bottom-style: solid;\r\n    border-bottom-width: 1px;\r\n    border-left-color: #ddd;\r\n    border-left-style: solid;\r\n    border-left-width: 1px; */background-color:#ffb823}.top[data-v-694e750a]{padding-top:%?20?%;padding-right:%?20?%;padding-left:%?20?%;border-bottom-width:1px;border-bottom-style:solid;border-bottom-color:#ddd}.top-title[data-v-694e750a]{font-size:%?32?%;line-height:%?58?%;text-align:center}.top-row[data-v-694e750a]{position:relative;display:flex;flex-direction:row;align-items:center}.top-row2[data-v-694e750a]{display:flex;flex-direction:row;align-items:center;justify-content:space-between}.top-text[data-v-694e750a]{flex:1;font-size:%?26?%;line-height:%?40?%;color:#8a8a8a}.top-text2[data-v-694e750a]{font-size:%?26?%;color:#8a8a8a}.top-input[data-v-694e750a]{flex:1;height:%?60?%;font-size:%?30?%;border-bottom-width:1px;border-bottom-style:solid;border-bottom-color:#ddd}.top-add[data-v-694e750a]{position:absolute;right:0;width:%?200?%;height:%?60?%;line-height:%?60?%;color:#ffb822;font-size:%?26?%}.top-row-imageBox[data-v-694e750a]{display:flex;flex-direction:row;align-items:center;justify-content:center;width:%?248?%;height:%?100?%}.top-row-image[data-v-694e750a]{width:%?48?%;height:%?48?%}.list[data-v-694e750a]{overflow:hidden}.list-commodity[data-v-694e750a]{display:flex;flex-direction:row;padding-top:%?26?%;padding-right:%?20?%;padding-left:%?20?%;padding-bottom:%?20?%}.list-commodity-image[data-v-694e750a]{width:%?156?%;height:%?156?%}.list-commodity-box[data-v-694e750a]{flex:1;padding-left:%?20?%}.list-commodity-box-row[data-v-694e750a]{display:flex;flex-direction:row}.list-commodity-box-title[data-v-694e750a]{width:%?490?%;padding-bottom:%?10?%;font-size:%?30?%}.list-commodity-box-text[data-v-694e750a]{font-size:%?26?%;color:#8a8a8a;line-height:%?48?%}.list-commodity-box-delete[data-v-694e750a]{width:%?36?%;height:%?36?%}.list-commodity-line[data-v-694e750a]{position:absolute;bottom:0;left:%?20?%;right:%?20?%;height:1px;background-color:#ddd}.list-commodity-box-row[data-v-694e750a]{display:flex;align-items:center}.list-commodity-box-input[data-v-694e750a]{width:%?240?%;padding-left:%?10?%;font-size:%?26?%;color:#8a8a8a;line-height:%?48?%;border-bottom:1px solid #ddd}.list-commodity-box-image[data-v-694e750a]{width:%?40?%;height:%?40?%;margin-left:%?30?%}.list-commodity-box-submit[data-v-694e750a]{padding:0 %?10?%;margin-left:%?30?%;border:1px solid #ddd;font-size:%?26?%;color:#8a8a8a;line-height:%?40?%;border-radius:%?8?%}.list-commodity-box-pickerBox[data-v-694e750a]{flex:1;display:flex;flex-direction:row;align-items:center;justify-content:space-between}.list-commodity-box-picker[data-v-694e750a]{flex:1;padding-left:%?10?%;border-bottom:1px solid #ddd}.list-commodity-box-value[data-v-694e750a]{font-size:%?26?%;color:#8a8a8a;line-height:%?40?%}.foot[data-v-694e750a]{display:flex;flex-direction:row;align-items:center;justify-content:center;height:%?86?%;background-color:#ffb823}.foot-text[data-v-694e750a]{color:#fff;font-size:%?30?%}.Modal[data-v-694e750a]{position:fixed;top:0;bottom:0;left:0;right:0;z-index:9999;display:flex;flex-direction:row;align-items:center;justify-content:center}.Modal-mask[data-v-694e750a]{position:absolute;left:0;right:0;top:0;bottom:0;background-color:#000;opacity:.5}.Modal-content[data-v-694e750a]{position:relative;width:%?600?%;height:%?600?%;background-color:#fff;border-radius:%?16?%;overflow:hidden;display:flex;flex-direction:column}.Modal-content-hd[data-v-694e750a]{display:flex;flex-direction:row;align-items:center;justify-content:space-between;width:%?600?%;height:%?80?%;padding:0 %?20?%;border-bottom:1px solid #ddd;background-color:#f7f6fb}.Modal-content-hd-text[data-v-694e750a]{line-height:%?80?%}.Modal-content-hd-image[data-v-694e750a]{width:%?40?%;height:%?40?%}.Modal-content-bd[data-v-694e750a]{flex:1;padding:%?20?%;overflow:hidden}.Modal-content-bd-box[data-v-694e750a]{display:flex;flex-direction:row;align-items:center;padding-top:%?30?%}.Modal-content-bd-box-text[data-v-694e750a]{width:%?560?%;font-size:%?30?%}.Modal-content-bd-box-input[data-v-694e750a]{flex:1;height:%?70?%;padding-left:%?20?%;border-bottom:1px solid #ddd}.Modal-content-ft[data-v-694e750a]{display:flex;flex-direction:row;width:%?600?%;height:%?90?%;border-top:1px solid #ddd}.Modal-content-ft-cancel[data-v-694e750a]{flex:1;height:%?90?%;text-align:center;line-height:%?90?%;font-size:%?32?%}.Modal-content-ft-confirm[data-v-694e750a]{flex:1;height:%?90?%;text-align:center;line-height:%?90?%;font-size:%?32?%}.Modal-content-ft-line[data-v-694e750a]{width:1px;height:%?90?%;background-color:#ddd}",""]),t.exports=e},b7fa:function(t,e,i){var o=i("b468");o.__esModule&&(o=o.default),"string"===typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);var a=i("967d").default;a("74ff3bf6",o,!0,{sourceMap:!1,shadowMode:!1})},ba29:function(t,e,i){"use strict";i.r(e);var o=i("8bb6"),a=i.n(o);for(var n in o)["default"].indexOf(n)<0&&function(t){i.d(e,t,(function(){return o[t]}))}(n);e["default"]=a.a},cbe8:function(t,e,i){"use strict";i.d(e,"b",(function(){return o})),i.d(e,"c",(function(){return a})),i.d(e,"a",(function(){}));var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.myclick.apply(void 0,arguments)}}},[t._t("default")],2)},a=[]},cf6b:function(t,e,i){"use strict";(function(t){i("6a54");var o=i("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("bf0f"),i("2797"),i("aa9c"),i("c223");var a=o(i("b7c7")),n=o(i("9b1b")),s=o(i("8824")),d=o(i("0157")),c=o(i("906f")),r=o(i("2705")),l=i("8f59"),u={props:{},components:{uniList:c.default,uniCell:r.default},data:function(){return{isAndroid:!1,windowWidth:"",windowHeight:"",inputValue:"",focusinput:!1,isLoading:!1,pageNum:1,pageSize:20,containerGoodsList:[],hasNextPage:!1,containerIndex:1,containerData:null,containerHasNextPage:!1,addCommodityList:[],addConflictCommodityList:[],keyword:"",goodsId:"",storehouseId:"",partitionId:"",goods:{},onModal:!1,lighting:{},lightnumList:[]}},created:function(){var t=this;uni.getSystemInfo({success:function(e){t.windowWidth=e.windowWidth,t.windowHeight=e.windowHeight,"android"===e.platform&&(t.isAndroid=!0)}}),this.containerIndex=this.params.index+1,this.keyword=this.params.keyword,this.goodsId=this.params.goodsId,this.storehouseId=this.params.storehouseId,this.partitionId=this.params.partitionId,this.containerPage(),this.getLighting()},mounted:function(){},onShow:function(){},onHide:function(){},onUnload:function(){},watch:{goods:function(t){null!=t&&t.length>0&&(this.addCommodityList=t,this.containerGoodsAdd())}},computed:(0,n.default)({},(0,l.mapState)(["params"])),methods:(0,n.default)((0,n.default)({},(0,l.mapMutations)(["setparams"])),{},{goBack:function(){uni.navigateBack({delta:1})},getValue:function(t){uni.hideKeyboard(),""!=t.detail.value&&(this.focusinput=!1,this.inputValue=t.detail.value,this.searchGoods())},closeKeyboard:function(t){uni.hideKeyboard();var e=this;e.isAndroid?e.getValue(t):(e.focusinput=!0,e.$nextTick((function(){e.getValue(t),e.focusinput=!1})))},closeDialogMask:function(t){this.inputValue=""},containerPage:function(){var t=this,e={pageNum:t.containerIndex,pageSize:1,keyword:t.keyword,goodsId:t.goodsId,storehouseId:t.storehouseId,partitionId:t.partitionId};d.default.containerPage(e).then((function(e){e.meta.success?(t.containerHasNextPage=e.data.hasNextPage,t.containerData=e.data.list[0],t.storehouseId=t.containerData.storehouseId):uni.showToast({title:e.meta.message,icon:"none",duration:1e3})})).then((function(){t.loadData()}))},lastLocation:function(){this.containerIndex>1&&(this.containerIndex--,this.containerPage())},nextLocation:function(){this.containerHasNextPage&&(this.containerIndex++,this.containerPage())},loadMore:function(){this.hasNextPage&&(this.pageNum++,this.loadData())},loadData:function(){var t=this,e={pageNum:t.pageNum,pageSize:t.pageSize,containerId:t.containerData.id,depotPartition:t.containerData.depotPartition};d.default.containerGoods(e).then((function(e){if(e.meta.success){var i;t.hasNextPage=e.data.hasNextPage;var o=e.data.list?e.data.list:[];o.forEach((function(t){s.default.IsPicture(t.picture)||(t.picture="/static/img/outNote/photo.png")})),1===t.pageNum?t.containerGoodsList=o:(i=t.containerGoodsList).push.apply(i,(0,a.default)(o))}else uni.showToast({title:e.meta.message,icon:"none",duration:1e3})}))},scanning:function(){var t=this;uni.scanCode({success:function(e){t.inputValue=e.result,t.searchGoods()}})},commodityList:function(){var t=this;this.addConflictCommodityList=[],this.setparams({searchtype:"containerCp",filed:"goods",limit:99999,checkChange:function(e){var i=e.data.item;i.storehouseId===t.storehouseId&&i.containerCode!==t.containerData.id&&uni.showModal({title:"提示",content:"".concat(i.name," 已有货位 ").concat(i.containerCode,",\n是否变更上述商品货位？"),success:function(t){t.confirm||t.cancel&&e.fail()}})}}),uni.navigateTo({url:"/pages/index/components/toolssearchlist/toolssearchlist"})},containerGoodsAdd:function(){for(var t=this,e=this,i=[],o=0;o<this.addCommodityList.length;o++){var a=this.addCommodityList[o];i.push(a.id)}var n={containerId:e.containerData.id,goodsIds:i.join(","),depotPartition:2==e.containerData.depotPartition?e.containerData.depotPartition:1},s={depotPartition:2==e.containerData.depotPartition?e.containerData.depotPartition:1,containerId:e.containerData.id,storehouseId:e.containerData.storehouseId,goodsIds:i.join(",")};d.default.checkContainerGoods(s).then((function(i){i&&i.meta&&i.meta.success?d.default.containerGoodsAdd(n).then((function(i){t.addConflictCommodityList=[],i.meta.success?e.loadData():uni.showToast({title:i.meta.message,icon:"none",duration:1e3})})):i&&i.meta&&"有商品在别的货架已存在,是否替换？"==i.meta.message?uni.showModal({title:"温馨提示",content:i.meta.message,confirmText:"是",cancelText:"否",success:function(t){var i=this;t&&!t.cancel&&(n["isRepest"]=0,n["storehouseId"]=e.containerData.storehouseId,d.default.containerGoodsAdd(n).then((function(t){t.meta.success?(i.addConflictCommodityList=[],e.loadData()):uni.showToast({title:t.meta.message,icon:"none",duration:1e3})})))}}):uni.showToast({title:i.meta.message,icon:"none",duration:1e3})}))},searchGoods:function(){var t=this,e=this;if(!e.isLoading&&e.inputValue){e.isLoading=!0,e.addCommodityList=[],e.addConflictCommodityList=[];var i={pageNum:1,pageSize:10,allocation:0,keyWord:this.inputValue,depotPartition:2==e.containerData.depotPartition?e.containerData.depotPartition:1};d.default.searchGoods(i).then((function(i){if(e.isLoading=!1,i.meta.success)if(i.data.list.length>0){for(var o=0;o<i.data.list.length;o++){var a=i.data.list[o];a.storehouseId===e.storehouseId&&a.containerCode!==e.containerData.id?e.addConflictCommodityList.push(a):e.addCommodityList.push(a)}if(e.addConflictCommodityList.length>0)return void(e.onModal=!0);e.addCommodityList.length>0&&t.containerGoodsAdd()}else uni.showToast({title:"暂无商品数据",icon:"none",duration:1e3});else uni.showToast({title:i.meta.message,icon:"none",duration:1e3})}))}},deleteItem:function(t){var e=this,i=this.containerGoodsList[t];uni.showModal({title:"提示",content:"是否删除当前商品",success:function(t){if(t.confirm){var o={ids:i.id,depotPartition:2==e.containerData.depotPartition?e.containerData.depotPartition:1};d.default.containerGoodsDelete(o).then((function(t){t.meta.success?(uni.showToast({title:"删除商品成功",icon:"none",duration:1e3}),setTimeout((function(){e.loadData()}),500)):uni.showToast({title:t.meta.message,icon:"none",duration:1e3})}))}else t.cancel}})},showModal:function(){this.onModal=!1,this.loadData()},addData:function(){var t=this;this.addCommodityList=this.addCommodityList.concat(this.addConflictCommodityList);var e=[],i=this;if(this.addConflictCommodityList.length>0){for(var o=0;o<this.addCommodityList.length;o++){var a=this.addCommodityList[o];e.push(a.id)}var n={isRepest:0,storehouseId:i.containerData.storehouseId,containerId:i.containerData.id,goodsIds:e.join(","),depotPartition:2==i.containerData.depotPartition?i.containerData.depotPartition:1};d.default.containerGoodsAdd(n).then((function(e){e.meta.success?(t.onModal=!1,i.addConflictCommodityList=[],i.loadData()):uni.showToast({title:e.meta.message,icon:"none",duration:1e3})}))}},scanningEquipment:function(t){var e=this,i=this.containerGoodsList[t];uni.scanCode({success:function(o){i.deviceNo=o.result,e.$set(e.containerGoodsList,t,i)}})},saveDeviceNo:function(t){var e=this,i=this.containerGoodsList[t];uni.showModal({title:"提示",content:"是否保存当前设备号",success:function(t){if(t.confirm){var o={id:i.id,deviceNo:i.deviceNo};d.default.updateDeviceNo(o).then((function(t){t.meta.success?(uni.showToast({title:"保存成功",icon:"none",duration:1e3}),setTimeout((function(){e.loadData()}),500)):uni.showToast({title:t.meta.message,icon:"none",duration:1e3})}))}else t.cancel}})},getLighting:function(){var t=this;d.default.getLighting({}).then((function(e){e.meta.success?t.lightnumList=e.data:uni.showToast({title:e.meta.message,icon:"none",duration:1e3})}))},lightnumChange:function(e,i){var o=this;t.log(e.detail.value,i);var a=this.containerGoodsList[i],n={id:a.id,lightnum:this.lightnumList[e.detail.value].dictionaryCode};d.default.updateDeviceNo(n).then((function(t){t.meta.success?(uni.showToast({title:"保存成功",icon:"none",duration:1e3}),setTimeout((function(){o.loadData()}),500)):uni.showToast({title:t.meta.message,icon:"none",duration:1e3})}))}})};e.default=u}).call(this,i("ba7c")["default"])},dadf:function(t,e,i){"use strict";var o=i("f1bf");e["a"]=o["a"]},f1bf:function(t,e,i){"use strict";(function(t){e["a"]=function(t){(t.options.wxs||(t.options.wxs={}))["refresh"]=function(t){var e={threshold:95,maxHeight:200,callRefresh:"onrefresh",callPullingDown:"onpullingdown",refreshSelector:".uni-refresh"};return t.exports={touchmove:function(t,i){var o=t.instance,a=o.getState();if(a.canPullDown){a.height;var n=t.touches[0].pageY||t.changedTouches[0].pageY,s=n-a.touchStartY;if(!(s>e.maxHeight)){var d=a.refreshInstance;d.setStyle({height:s+"px"}),s=s<e.maxHeight?s:e.maxHeight,a.height=s,d.callMethod(e.callPullingDown,{height:s})}}},touchstart:function(t,i){var o=i.getState();o.refreshInstance=i.selectComponent(e.refreshSelector),o.canPullDown=null!=o.refreshInstance&&void 0!=o.refreshInstance,o.canPullDown&&(o.height=0,o.touchStartY=t.touches[0].pageY||t.changedTouches[0].pageY,o.refreshInstance.setStyle({height:0}),o.refreshInstance.callMethod("onchange",!0))},touchend:function(t,i){var o=t.instance.getState();if(o.canPullDown){o.refreshInstance.callMethod("onchange",!1);var a=o.refreshInstance;o.height>e.threshold?a.callMethod(e.callRefresh):a.setStyle({height:0})}},propObserver:function(t,i,o){e=t}},t.exports}({exports:{}})}}).call(this,i("ba7c")["default"])},f269:function(t,e,i){var o=i("c86c");e=o(!1),e.push([t.i,".uni-list[data-v-f68df4d2]{flex:1;\ndisplay:flex;\nposition:relative;flex-direction:column}",""]),t.exports=e},f5cb:function(t,e,i){"use strict";i.r(e);var o=i("cf6b"),a=i.n(o);for(var n in o)["default"].indexOf(n)<0&&function(t){i.d(e,t,(function(){return o[t]}))}(n);e["default"]=a.a}}]);