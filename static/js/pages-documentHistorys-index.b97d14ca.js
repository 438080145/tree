(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-documentHistorys-index"],{"0b10":function(t,e,a){"use strict";var i=a("c9df"),n=a.n(i);n.a},"0b5a7":function(t,e,a){var i=a("4a75");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("967d").default;n("30d43d98",i,!0,{sourceMap:!1,shadowMode:!1})},"0c1d":function(t,e,a){"use strict";(function(t){a("6a54");var i=a("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("c223"),a("fd3c");var n=i(a("2634")),s=i(a("2fdc")),r=i(a("9b1b")),o=a("f55d"),l=i(a("63d3")),c=a("9cee"),u=a("8f59"),d=i(a("f80c")),f={name:"saleRebundsNote",data:function(){return{list:[],hasNextPage:!0,pageNum:1,pageSize:20,isLoading:!0,payStatusName:c.payStatusName,scrollTop:0,triggered:!1,checkStatusName:c.checkStatusName,oldScrollTop:0}},computed:(0,r.default)((0,r.default)({isShowNoData:function(){return this.list.length<=0}},(0,u.mapState)({customParams:function(t){return t.custom.customParams}})),{},{isCanCheck:function(){return this.$store.getters.getMenubtnsByUrl({parentUrl:"main/sale/rebundsNote/2",authority:"chk"})},isCanAdd:function(){return this.$store.getters.getMenubtnsByUrl({parentUrl:"main/sale/rebundsNote/1",authority:"add"})},isCanEdit:function(){return this.$store.getters.getMenubtnsByUrl({parentUrl:"main/sale/rebundsNote/1",authority:"edit"})}}),filters:{formatDate:function(t){return t?l.default.timeTransfer(t):""}},created:function(){this.getData()},methods:(0,r.default)((0,r.default)({},(0,u.mapMutations)(["setparams"])),{},{getData:function(){var t=this;return(0,s.default)((0,n.default)().mark((function e(){var a,i,s,l,c;return(0,n.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=(0,r.default)({pageNum:t.pageNum,pageSize:t.pageSize},t.customParams),t.setLoadingStatus(!0),e.prev=2,e.next=5,t.get("api/sale/main/203/page",a,1);case 5:return i=e.sent,e.next=8,(0,o.wait)(300);case 8:if(t.setLoadingStatus(!1),!i.meta.success){e.next=19;break}if(s=i.data.page,s){e.next=14;break}return t.hasNextPage=!1,e.abrupt("return");case 14:l=s.hasNextPage,c=s.list,t.hasNextPage=l,t.list=(1==t.pageNum?[]:t.list).concat(Array.prototype.map.call(c||[],(function(t){return(0,r.default)((0,r.default)({},t),{},{deflag:1})}))),e.next=20;break;case 19:uni.showToast({title:i.meta.message,icon:"none",duration:2e3});case 20:e.next=25;break;case 22:e.prev=22,e.t0=e["catch"](2),t.setLoadingStatus(!1);case 25:case"end":return e.stop()}}),e,null,[[2,22]])})))()},setLoadingStatus:function(t){t?uni.showLoading({title:"加载中"}):(this.triggered&&(this.triggered=!1),uni.hideLoading()),this.isLoading=t},loadMore:function(){this.hasNextPage&&!this.isLoading&&(this.pageNum+=1,this.getData())},initData:function(){this.pageNum=1,this.hasNextPage=!0,this.getData()},checkOrder:function(e){var a=this;return(0,s.default)((0,n.default)().mark((function i(){var s,r;return(0,n.default)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,(0,o.showModal)({content:"是否审核该单据"});case 3:if(s=i.sent,s){i.next=6;break}return i.abrupt("return");case 6:return uni.showLoading({title:"正在审核中",mask:!0}),i.next=9,a.get("sale/main/check?id=".concat(e.id),{},3);case 9:return r=i.sent,i.next=12,(0,o.wait)(300);case 12:uni.hideLoading(),r.meta.success?(uni.showToast({title:"审核成功",icon:"none",duration:2e3}),e.checkStatus=2,e.checkStatusName="已审核"):uni.showToast({title:r.meta.message,icon:"none",duration:2e3}),i.next=19;break;case 16:i.prev=16,i.t0=i["catch"](0),t.error(i.t0);case 19:case"end":return i.stop()}}),i,null,[[0,16]])})))()},toOpenNewNote:function(e){t.log(e);var a=uni.getStorageSync("employeeId"),i=uni.getStorageSync("privilegeMap");if(a==e.creator||1!=i.banMoOtherDocStatus)if(1==i.banChangeSaleStatus&&e.printCount>0)uni.showToast({title:"禁止修改打印过的单据",icon:"none",duration:2e3});else{uni.setStorageSync("saleReturnId",e.id);var n={customerId:e.customerId,customerName:e.customerName||"",storehouseName:e.storehouseName||"",storehouseId:e.storehouseId};uni.setStorageSync("saleReturnNoteTemp",n),uni.navigateTo({url:"/pages/index/salesReturn/salesReturn"})}else uni.showToast({title:"不能修改他人单据",icon:"none",duration:2e3})},tapBtn:function(t,e){var a=t.target,i=e.id;if(i){var n=a.dataset.method;n&&this[n](e)}},tapPrint:function(t){var e=t.id;d.default.getPrintData(e)},toDetail:function(e){if(e.id&&this.isCanEdit){var a=this;uni.navigateTo({url:"/pages/documentHistorys/children/saleRebundsNoteDetail?id=".concat(e.id,"&hasPriceAuth=").concat(e.hasPriceAuth),events:{changStatus:function(i){var n=i.checkStatus,s=i.deflag;t.log(s),Object.assign(e,{checkStatus:n||0,deflag:s||0!==s?1:0}),a.$forceUpdate()}}})}},watchScroll:function(t){var e=t.detail,a=e.scrollTop;this.oldScrollTop=a||0},toTop:function(){var t=this;this.scrollTop=this.oldScrollTop,this.$nextTick((function(){t.scrollTop=0,t.oldScrollTop=0}))},onRefresh:function(){this.isLoading||(this.triggered=!0,this.initData())},onRestore:function(){this.triggered=!1},refresherabort:function(){this.triggered=!1}})};e.default=f}).call(this,a("ba7c")["default"])},"0c44":function(t,e,a){"use strict";var i=a("bd8d0"),n=a.n(i);n.a},"0c88":function(t,e,a){"use strict";a.d(e,"b",(function(){return i})),a.d(e,"c",(function(){return n})),a.d(e,"a",(function(){}));var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-scroll-view",{staticClass:"scrollView",attrs:{"scroll-y":"true","scroll-top":t.scrollTop,"refresher-enabled":"true","refresher-triggered":t.triggered,"refresher-threshold":100},on:{scrolltolower:function(e){arguments[0]=e=t.$handleEvent(e),t.loadMore.apply(void 0,arguments)},scroll:function(e){arguments[0]=e=t.$handleEvent(e),t.watchScroll.apply(void 0,arguments)},refresherrefresh:function(e){arguments[0]=e=t.$handleEvent(e),t.onRefresh.apply(void 0,arguments)},refresherrestore:function(e){arguments[0]=e=t.$handleEvent(e),t.onRestore.apply(void 0,arguments)},refresherabort:function(e){arguments[0]=e=t.$handleEvent(e),t.refresherabort.apply(void 0,arguments)}}},[t._l(t.list,(function(e){return[1==e.deflag?a("v-uni-view",{key:e.id+"_0",staticClass:"listItem",on:{click:function(a){a.stopPropagation(),arguments[0]=a=t.$handleEvent(a),t.toDetail(e)}}},[a("v-uni-view",{staticClass:"listItem_text"},[t._v(" 单号："+t._s(e.purchaseNo||"")),a("v-uni-text",{staticClass:"auditStatus"},[t._v(t._s(t.checkStatusName[e.checkStatus]||"未审核"))]),a("v-uni-text",{staticClass:"payStatus"},[t._v(t._s(t.endStatusName[e.endState]||"未转单"))])],1),a("v-uni-view",{staticClass:"listItem_subtext"},[a("v-uni-view",[t._v("开单日期：")]),a("v-uni-view",{staticClass:"listItem_subtext-content"},[t._v(t._s(t._f("formatDate")(e.fillDate)))])],1),a("v-uni-view",{staticClass:"listItem_subtext alginCenter"},[a("v-uni-view",[t._v("仓库名称：")]),a("v-uni-view",{staticClass:"listItem_subtext-content"},[t._v(t._s(e.storehouseName||""))]),a("v-uni-view",{staticClass:"listItem_subtext-amt"},[a("v-uni-text",[t._v("¥")]),t._v(t._s(e.totalAmount||0)+" ")],1)],1),a("v-uni-view",{staticClass:"listItem_subtext"},[a("v-uni-view",[t._v("供应商名称：")]),a("v-uni-view",{staticClass:"listItem_subtext-content"},[t._v(t._s(e.supplierName||""))])],1),a("v-uni-view",{staticClass:"listItem_subtext"},[a("v-uni-view",[t._v("单据打印次数：")]),a("v-uni-view",{staticClass:"listItem_subtext-content"},[t._v(t._s(e.printCount||0))])],1),a("v-uni-view",{staticClass:"listItem_btngroud",on:{click:function(a){a.stopPropagation(),arguments[0]=a=t.$handleEvent(a),t.tapBtn(a,e)}}},[t.isCanAdd&&2!=e.checkStatus?a("v-uni-view",{staticClass:"listItem_btngroud-btn",attrs:{"data-method":"toOpenNewNote"}},[t._v("编辑")]):t._e(),t.isCanCheck&&2!=e.checkStatus?a("v-uni-view",{staticClass:"listItem_btngroud-btn",attrs:{"data-method":"checkOrder"}},[t._v("审核")]):t._e()],1)],1):t._e()]})),t.isShowNoData&&!t.isLoading?[a("v-uni-view",{staticClass:"nodata"},[a("v-uni-image",{attrs:{src:"/static/img/nodata.png"}}),a("v-uni-view",[t._v("暂无数据")])],1)]:t._e(),a("v-uni-view",{staticClass:"scrollImg",class:{show:t.oldScrollTop>1e3},on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.toTop.apply(void 0,arguments)}}},[a("v-uni-image",{attrs:{src:"/static/img/scrollTop.png"}})],1)],2)},n=[]},"0ce5":function(t,e,a){var i=a("c86c");e=i(!1),e.push([t.i,".scrollView[data-v-65bd0148]{width:100%;height:100%}.scrollView .listItem[data-v-65bd0148]{font-size:%?28?%;font-family:PingFangSC-Regular,PingFang SC;font-weight:400;color:grey;line-height:%?40?%;padding:%?40?%}.scrollView .listItem + .listItem[data-v-65bd0148]{border-top:%?1?% solid #eee}.scrollView .listItem .listItem_text[data-v-65bd0148]{overflow:hidden;text-overflow:ellipsis;word-break:break-all;font-size:%?32?%;font-weight:500;color:#333;line-height:%?45?%}.scrollView .listItem .listItem_text uni-text[data-v-65bd0148]{font-size:%?22?%;color:#fff;line-height:%?30?%;padding:0 %?5?%;margin-left:%?15?%;border-radius:%?4?%;vertical-align:middle}.scrollView .listItem .listItem_text uni-text.auditStatus[data-v-65bd0148]{background:#5ccc8b}.scrollView .listItem .listItem_text uni-text.wmsStatus[data-v-65bd0148]{background:#f97067}.scrollView .listItem .listItem_text uni-text.payStatus[data-v-65bd0148]{background:#3da9fa}.scrollView .listItem .listItem_subtext[data-v-65bd0148]{display:flex;margin-top:%?20?%}.scrollView .listItem .listItem_subtext .listItem_subtext-content[data-v-65bd0148]{flex:1;word-break:break-all;text-align:left}.scrollView .listItem .listItem_subtext .listItem_subtext-amt[data-v-65bd0148]{font-size:%?32?%;font-weight:500;color:red;line-height:%?45?%;margin-left:%?10?%}.scrollView .listItem .listItem_subtext .listItem_subtext-amt uni-text[data-v-65bd0148]{font-size:%?24?%;line-height:%?33?%;font-weight:400;margin-right:%?10?%}.scrollView .listItem .listItem_subtext.alginCenter[data-v-65bd0148]{align-items:center}.scrollView .listItem .listItem_btngroud[data-v-65bd0148]{margin-top:%?30?%;display:flex;flex-wrap:wrap;justify-content:flex-end;color:#666}.scrollView .listItem .listItem_btngroud .listItem_btngroud-btn[data-v-65bd0148]{padding:%?12?% %?45?%;border-radius:%?32?%;border:%?1?% solid #ccc}.scrollView .listItem .listItem_btngroud .listItem_btngroud-btn + .listItem_btngroud-btn[data-v-65bd0148]{margin-left:%?20?%}.scrollView .nodata[data-v-65bd0148]{text-align:center}.scrollView .nodata uni-image[data-v-65bd0148]{width:100%;height:100%}.scrollView .scrollImg[data-v-65bd0148]{position:fixed;left:%?-80?%;bottom:%?201?%;z-index:99;background:#fff;box-shadow:%?2?% %?2?% %?13?% %?0?% hsla(0,0%,40%,.2);width:%?80?%;height:%?80?%;border-radius:50%;display:flex;align-items:center;justify-content:center;opacity:0;transition:all .5s}.scrollView .scrollImg uni-image[data-v-65bd0148]{width:%?31?%;height:%?40?%}.scrollView .scrollImg.show[data-v-65bd0148]{left:%?35?%;opacity:1}",""]),t.exports=e},"0fa6d":function(t,e,a){"use strict";a.d(e,"b",(function(){return i})),a.d(e,"c",(function(){return n})),a.d(e,"a",(function(){}));var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-scroll-view",{staticClass:"scrollView",attrs:{"scroll-y":"true","scroll-top":t.scrollTop,"refresher-enabled":"true","refresher-triggered":t.triggered,"refresher-threshold":100},on:{scrolltolower:function(e){arguments[0]=e=t.$handleEvent(e),t.loadMore.apply(void 0,arguments)},scroll:function(e){arguments[0]=e=t.$handleEvent(e),t.watchScroll.apply(void 0,arguments)},refresherrefresh:function(e){arguments[0]=e=t.$handleEvent(e),t.onRefresh.apply(void 0,arguments)},refresherrestore:function(e){arguments[0]=e=t.$handleEvent(e),t.onRestore.apply(void 0,arguments)},refresherabort:function(e){arguments[0]=e=t.$handleEvent(e),t.refresherabort.apply(void 0,arguments)}}},[t._l(t.list,(function(e){return[1==e.deflag?a("v-uni-view",{key:e.id+"_0",staticClass:"listItem",on:{click:function(a){a.stopPropagation(),arguments[0]=a=t.$handleEvent(a),t.toDetail(e)}}},[a("v-uni-view",{staticClass:"listItem_text"},[t._v(" 单号："+t._s(e.saleNo||"")),a("v-uni-text",{staticClass:"auditStatus"},[t._v(t._s(t.checkStatusName[e.checkStatus||0]))]),a("v-uni-text",{staticClass:"payStatus"},[t._v(t._s(t.endStatusName[e.endState]||"未转单"))])],1),a("v-uni-view",{staticClass:"listItem_subtext"},[a("v-uni-view",[t._v("客户名称：")]),a("v-uni-view",{staticClass:"listItem_subtext-content"},[t._v(t._s(e.customerName||""))])],1),a("v-uni-view",{staticClass:"listItem_subtext alginCenter"},[a("v-uni-view",[t._v("开单日期：")]),a("v-uni-view",{staticClass:"listItem_subtext-content"},[t._v(t._s(t._f("formatDate")(e.fillDate)))]),a("v-uni-view",{staticClass:"listItem_subtext-amt"},[a("v-uni-text",[t._v("¥")]),t._v(t._s(e.hasPriceAuth||void 0===e.hasPriceAuth?e.totalAmount||0:"****")+" ")],1)],1),a("v-uni-view",{staticClass:"listItem_subtext"},[a("v-uni-view",[t._v("单据打印次数：")]),a("v-uni-view",{staticClass:"listItem_subtext-content"},[t._v(t._s(e.printCount||0))])],1),a("v-uni-view",{staticClass:"listItem_btngroud",on:{click:function(a){a.stopPropagation(),arguments[0]=a=t.$handleEvent(a),t.tapBtn(a,e)}}},[t.isCanAdd&&2!=e.checkStatus?a("v-uni-view",{staticClass:"listItem_btngroud-btn",attrs:{"data-method":"toOpenNewNote"}},[t._v("编辑")]):t._e(),t.isCanCheck&&2!=e.checkStatus?a("v-uni-view",{staticClass:"listItem_btngroud-btn",attrs:{"data-method":"checkOrder"}},[t._v("审核")]):t._e()],1)],1):t._e()]})),t.isShowNoData&&!t.isLoading?[a("v-uni-view",{staticClass:"nodata"},[a("v-uni-image",{attrs:{src:"/static/img/nodata.png"}}),a("v-uni-view",[t._v("暂无数据")])],1)]:t._e(),a("v-uni-view",{staticClass:"scrollImg",class:{show:t.oldScrollTop>1e3},on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.toTop.apply(void 0,arguments)}}},[a("v-uni-image",{attrs:{src:"/static/img/scrollTop.png"}})],1)],2)},n=[]},1837:function(t,e,a){"use strict";(function(t){a("6a54");var i=a("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("c223"),a("fd3c");var n=i(a("2634")),s=i(a("2fdc")),r=i(a("9b1b")),o=a("f55d"),l=i(a("63d3")),c=a("9cee"),u=a("8f59"),d=i(a("f80c")),f={name:"saleOrder",data:function(){return{list:[],hasNextPage:!0,pageNum:1,pageSize:20,isLoading:!0,endStatusName:c.endStatusName,scrollTop:0,triggered:!1,checkStatusName:c.checkStatusName,oldScrollTop:0}},computed:(0,r.default)((0,r.default)({isShowNoData:function(){return this.list.length<=0}},(0,u.mapState)({customParams:function(t){return t.custom.customParams}})),{},{isCanCheck:function(){return this.$store.getters.getMenubtnsByUrl({parentUrl:"main/sale/saleOrder/2",authority:"chk"})},isCanAdd:function(){return this.$store.getters.getMenubtnsByUrl({parentUrl:"main/sale/saleOrder/1",authority:"add"})},isCanEdit:function(){return this.$store.getters.getMenubtnsByUrl({parentUrl:"main/sale/saleOrder/1",authority:"edit"})}}),filters:{formatDate:function(t){return t?l.default.timeTransfer(t):""}},created:function(){this.getData()},methods:(0,r.default)((0,r.default)({},(0,u.mapMutations)(["setparams"])),{},{getData:function(){var t=this;return(0,s.default)((0,n.default)().mark((function e(){var a,i,s,l,c;return(0,n.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=(0,r.default)({pageNum:t.pageNum,pageSize:t.pageSize},t.customParams),t.setLoadingStatus(!0),e.prev=2,e.next=5,t.get("api/sale/main/206/page",a,1);case 5:return i=e.sent,e.next=8,(0,o.wait)(300);case 8:if(t.setLoadingStatus(!1),!i.meta.success){e.next=19;break}if(s=i.data.page,s){e.next=14;break}return t.hasNextPage=!1,e.abrupt("return");case 14:l=s.hasNextPage,c=s.list,t.hasNextPage=l,t.list=(1==t.pageNum?[]:t.list).concat(Array.prototype.map.call(c||[],(function(t){return(0,r.default)((0,r.default)({},t),{},{deflag:1})}))),e.next=20;break;case 19:uni.showToast({title:i.meta.message,icon:"none",duration:2e3});case 20:e.next=25;break;case 22:e.prev=22,e.t0=e["catch"](2),t.setLoadingStatus(!1);case 25:case"end":return e.stop()}}),e,null,[[2,22]])})))()},setLoadingStatus:function(t){t?uni.showLoading({title:"加载中"}):(this.triggered&&(this.triggered=!1),uni.hideLoading()),this.isLoading=t},loadMore:function(){this.hasNextPage&&!this.isLoading&&(this.pageNum+=1,this.getData())},initData:function(){this.pageNum=1,this.hasNextPage=!0,this.getData()},checkOrder:function(e){var a=this;return(0,s.default)((0,n.default)().mark((function i(){var s,r;return(0,n.default)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,(0,o.showModal)({content:"是否审核该单据"});case 3:if(s=i.sent,s){i.next=6;break}return i.abrupt("return");case 6:return uni.showLoading({title:"正在审核中",mask:!0}),i.next=9,a.get("sale/main/check?id=".concat(e.id),{},3);case 9:return r=i.sent,i.next=12,(0,o.wait)(300);case 12:uni.hideLoading(),r.meta.success?(uni.showToast({title:"审核成功",icon:"none",duration:2e3}),e.checkStatus=2,e.checkStatusName="已审核"):uni.showToast({title:r.meta.message,icon:"none",duration:2e3}),i.next=19;break;case 16:i.prev=16,i.t0=i["catch"](0),t.error(i.t0);case 19:case"end":return i.stop()}}),i,null,[[0,16]])})))()},toOpenNewNote:function(e){t.log(e);var a=uni.getStorageSync("employeeId"),i=uni.getStorageSync("privilegeMap");if(a==e.creator||1!=i.banMoOtherDocStatus)if(1==i.banChangeSaleStatus&&e.printCount>0)uni.showToast({title:"禁止修改打印过的单据",icon:"none",duration:2e3});else{var n={customerId:e.customerId,customerName:e.customerName||"",warehouse:e.storehouseName||"",storehouseId:e.storehouseId,customersiteName:this.noteInfo?this.noteInfo.customersiteName:"",customersiteId:this.noteInfo?this.noteInfo.customersiteId:""};uni.setStorageSync("saleOrderTemp",n),uni.setStorageSync("againSaleOrderId",e.id),uni.navigateTo({url:"/pages/index/salesOrder/salesOrder"})}else uni.showToast({title:"不能修改他人单据",icon:"none",duration:2e3})},tapBtn:function(t,e){var a=t.target,i=e.id;if(i){var n=a.dataset.method;n&&this[n](e)}},tapPrint:function(t){var e=t.id;d.default.getPrintData(e)},toDetail:function(e){if(e.id&&this.isCanEdit){var a=this;uni.navigateTo({url:"/pages/documentHistorys/children/saleOrderDetail?id=".concat(e.id,"&hasPriceAuth=").concat(e.hasPriceAuth),events:{changStatus:function(i){var n=i.checkStatus,s=i.deflag,r=i.endState;t.log(s),Object.assign(e,{checkStatus:n||0,deflag:s||0!==s?1:0,endState:r||0!==r?r:0}),a.$forceUpdate()}}})}},watchScroll:function(t){var e=t.detail,a=e.scrollTop;this.oldScrollTop=a||0},toTop:function(){var t=this;this.scrollTop=this.oldScrollTop,this.$nextTick((function(){t.scrollTop=0,t.oldScrollTop=0}))},onRefresh:function(){this.isLoading||(this.triggered=!0,this.initData())},onRestore:function(){this.triggered=!1},refresherabort:function(){this.triggered=!1}})};e.default=f}).call(this,a("ba7c")["default"])},"1a29":function(t,e,a){var i=a("c86c");e=i(!1),e.push([t.i,'.page[data-v-3a495d54]{height:100%;display:flex;flex-direction:column;font-family:PingFangSC-Regular,PingFang SC}.page .screen[data-v-3a495d54]{display:flex}.page .screen uni-image[data-v-3a495d54]{width:%?48?%;height:%?48?%}.page .tabBox[data-v-3a495d54]{overflow-x:auto;font-size:%?28?%;font-weight:400;color:#666;line-height:%?37?%;white-space:nowrap;box-sizing:border-box;padding:0 %?40?%}.page .tabBox[data-v-3a495d54]::-webkit-scrollbar{width:0}.page .tabBox .tabItem[data-v-3a495d54]{flex-shrink:0;padding:%?26?% 0;position:relative;color:#666;transition:all .3s;display:inline-block;white-space:nowrap;width:%?130?%;text-align:center}.page .tabBox .tabItem + .tabItem[data-v-3a495d54]{margin-left:%?55?%}.page .tabBox .tabItem[data-v-3a495d54]::after{content:"";position:absolute;width:%?0?%;height:%?4?%;bottom:0;left:0;-webkit-transform:translateX(-50%);transform:translateX(-50%);background:#ffc300;transition:all .3s}.page .tabBox .tabItem.active[data-v-3a495d54]{color:#333}.page .tabBox .tabItem.active[data-v-3a495d54]::after{width:%?64?%;left:50%}.page .content[data-v-3a495d54]{flex:1;overflow:hidden}.page .cnodata[data-v-3a495d54]{text-align:center;margin-top:%?100?%}.page .cnodata uni-image[data-v-3a495d54]{width:%?507?%;height:%?348?%}',""]),t.exports=e},"1b9c":function(t,e,a){"use strict";(function(t){a("6a54");var i=a("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("c223"),a("fd3c");var n=i(a("2634")),s=i(a("2fdc")),r=i(a("9b1b")),o=a("f55d"),l=i(a("63d3")),c=a("9cee"),u=a("8f59"),d={name:"transferNote",data:function(){return{list:[],hasNextPage:!0,pageNum:1,pageSize:20,isLoading:!0,scrollTop:0,triggered:!1,checkStatusName:c.checkStatusName,oldScrollTop:0}},computed:(0,r.default)((0,r.default)({isShowNoData:function(){return this.list.length<=0}},(0,u.mapState)({customParams:function(t){return t.custom.customParams}})),{},{isCanCheck:function(){return this.$store.getters.getMenubtnsByUrl({parentUrl:"main/stock/transferNote/2",authority:"chk"})},isCanAdd:function(){return this.$store.getters.getMenubtnsByUrl({parentUrl:"main/stock/transferNote/1",authority:"add"})},isCanEdit:function(){return this.$store.getters.getMenubtnsByUrl({parentUrl:"main/stock/transferNote/1",authority:"edit"})}}),filters:{formatDate:function(t){return t?l.default.timeTransfer(t):""}},created:function(){this.getData()},methods:(0,r.default)((0,r.default)({},(0,u.mapMutations)(["setparams"])),{},{getData:function(){var t=this;return(0,s.default)((0,n.default)().mark((function e(){var a,i,s,l,c;return(0,n.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=(0,r.default)({pageNum:t.pageNum,pageSize:t.pageSize},t.customParams),t.setLoadingStatus(!0),e.prev=2,e.next=5,t.get("api/transfer/main/page",a,1);case 5:return i=e.sent,e.next=8,(0,o.wait)(300);case 8:if(t.setLoadingStatus(!1),!i.meta.success){e.next=18;break}if(i.data){e.next=13;break}return t.hasNextPage=!1,e.abrupt("return");case 13:s=i.data,l=s.hasNextPage,c=s.list,t.hasNextPage=l,t.list=(1==t.pageNum?[]:t.list).concat(Array.prototype.map.call(c||[],(function(t){return(0,r.default)((0,r.default)({},t),{},{deflag:1})}))),e.next=19;break;case 18:uni.showToast({title:i.meta.message,icon:"none",duration:2e3});case 19:e.next=24;break;case 21:e.prev=21,e.t0=e["catch"](2),t.setLoadingStatus(!1);case 24:case"end":return e.stop()}}),e,null,[[2,21]])})))()},setLoadingStatus:function(t){t?uni.showLoading({title:"加载中"}):(this.triggered&&(this.triggered=!1),uni.hideLoading()),this.isLoading=t},loadMore:function(){this.hasNextPage&&!this.isLoading&&(this.pageNum+=1,this.getData())},initData:function(){this.pageNum=1,this.hasNextPage=!0,this.getData()},checkOrder:function(e){var a=this;return(0,s.default)((0,n.default)().mark((function i(){var s,r;return(0,n.default)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,(0,o.showModal)({content:"是否审核该单据"});case 3:if(s=i.sent,s){i.next=6;break}return i.abrupt("return");case 6:return uni.showLoading({title:"正在审核中",mask:!0}),i.next=9,a.post("api/transfer/main/check?id=".concat(e.id),{},1);case 9:return r=i.sent,i.next=12,(0,o.wait)(300);case 12:uni.hideLoading(),r.meta.success?(uni.showToast({title:"审核成功",icon:"none",duration:2e3}),e.checkStatus=2):uni.showToast({title:r.meta.message,icon:"none",duration:2e3}),i.next=19;break;case 16:i.prev=16,i.t0=i["catch"](0),t.error(i.t0);case 19:case"end":return i.stop()}}),i,null,[[0,16]])})))()},toOpenNewNote:function(t){var e=uni.getStorageSync("employeeId"),a=uni.getStorageSync("privilegeMap");e==t.creator||1!=a.banMoOtherDocStatus?1==a.banChangeSaleStatus&&t.printCount>0?uni.showToast({title:"禁止修改打印过的单据",icon:"none",duration:2e3}):uni.navigateTo({url:"/pages/index/transferNote/transferNote?billType=302&billid=".concat(t.id)}):uni.showToast({title:"不能修改他人单据",icon:"none",duration:2e3})},tapBtn:function(t,e){var a=t.target,i=e.id;if(i){var n=a.dataset.method;n&&this[n](e)}},toDetail:function(t){if(t.id&&this.isCanEdit){var e=this;uni.navigateTo({url:"/pages/documentHistorys/children/transferNoteDetail?id=".concat(t.id),events:{changStatus:function(a){var i=a.checkStatus,n=a.deflag;Object.assign(t,{checkStatus:i||0,deflag:n||0!==n?1:0}),e.$forceUpdate()}}})}},watchScroll:function(t){var e=t.detail,a=e.scrollTop;this.oldScrollTop=a||0},toTop:function(){var t=this;this.scrollTop=this.oldScrollTop,this.$nextTick((function(){t.scrollTop=0,t.oldScrollTop=0}))},onRefresh:function(){this.isLoading||(this.triggered=!0,this.initData())},onRestore:function(){this.triggered=!1},refresherabort:function(){this.triggered=!1}})};e.default=d}).call(this,a("ba7c")["default"])},"1f21":function(t,e,a){"use strict";a.r(e);var i=a("1b9c"),n=a.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(s);e["default"]=n.a},2113:function(t,e,a){"use strict";a.r(e);var i=a("29fa"),n=a("edc9");for(var s in n)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(s);a("d6e9");var r=a("828b"),o=Object(r["a"])(n["default"],i["b"],i["c"],!1,null,"85b0d128",null,!1,i["a"],void 0);e["default"]=o.exports},2288:function(t,e,a){"use strict";a.r(e);var i=a("c491"),n=a("7e35");for(var s in n)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(s);a("0c44");var r=a("828b"),o=Object(r["a"])(n["default"],i["b"],i["c"],!1,null,"3a495d54",null,!1,i["a"],void 0);e["default"]=o.exports},"22dd":function(t,e,a){"use strict";a.d(e,"b",(function(){return i})),a.d(e,"c",(function(){return n})),a.d(e,"a",(function(){}));var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-scroll-view",{staticClass:"scrollView",attrs:{"scroll-y":"true","scroll-top":t.scrollTop,"refresher-enabled":"true","refresher-triggered":t.triggered,"refresher-threshold":100},on:{scrolltolower:function(e){arguments[0]=e=t.$handleEvent(e),t.loadMore.apply(void 0,arguments)},scroll:function(e){arguments[0]=e=t.$handleEvent(e),t.watchScroll.apply(void 0,arguments)},refresherrefresh:function(e){arguments[0]=e=t.$handleEvent(e),t.onRefresh.apply(void 0,arguments)},refresherrestore:function(e){arguments[0]=e=t.$handleEvent(e),t.onRestore.apply(void 0,arguments)},refresherabort:function(e){arguments[0]=e=t.$handleEvent(e),t.refresherabort.apply(void 0,arguments)}}},[t._l(t.list,(function(e){return[1==e.deflag?a("v-uni-view",{key:e.id+"_0",staticClass:"listItem",on:{click:function(a){a.stopPropagation(),arguments[0]=a=t.$handleEvent(a),t.toDetail(e)}}},[a("v-uni-view",{staticClass:"listItem_text"},[t._v(" 单号："+t._s(e.saleNo||"")),a("v-uni-text",{staticClass:"auditStatus"},[t._v(t._s(t.checkStatusName[e.checkStatus||0]))]),a("v-uni-text",{staticClass:"payStatus"},[t._v(t._s(t.payStatusName[e.payFlag]||"未付款"))])],1),a("v-uni-view",{staticClass:"listItem_subtext"},[a("v-uni-view",[t._v("客户名称：")]),a("v-uni-view",{staticClass:"listItem_subtext-content"},[t._v(t._s(e.customerName||""))])],1),a("v-uni-view",{staticClass:"listItem_subtext alginCenter"},[a("v-uni-view",[t._v("开单日期：")]),a("v-uni-view",{staticClass:"listItem_subtext-content"},[t._v(t._s(t._f("formatDate")(e.fillDate)))]),a("v-uni-view",{staticClass:"listItem_subtext-amt"},[a("v-uni-text",[t._v("¥")]),t._v(t._s(e.hasPriceAuth||void 0===e.hasPriceAuth?e.totalAmount||0:"****")+" ")],1)],1),a("v-uni-view",{staticClass:"listItem_subtext"},[a("v-uni-view",[t._v("单据打印次数：")]),a("v-uni-view",{staticClass:"listItem_subtext-content"},[t._v(t._s(e.printCount||0))])],1),a("v-uni-view",{staticClass:"listItem_btngroud",on:{click:function(a){a.stopPropagation(),arguments[0]=a=t.$handleEvent(a),t.tapBtn(a,e)}}},[t.isCanAdd&&2!=e.checkStatus?a("v-uni-view",{staticClass:"listItem_btngroud-btn",attrs:{"data-method":"toOpenNewNote"}},[t._v("编辑")]):t._e(),t.isCanCheck&&2!=e.checkStatus?a("v-uni-view",{staticClass:"listItem_btngroud-btn",attrs:{"data-method":"checkOrder"}},[t._v("审核")]):t._e()],1)],1):t._e()]})),t.isShowNoData&&!t.isLoading?[a("v-uni-view",{staticClass:"nodata"},[a("v-uni-image",{attrs:{src:"/static/img/nodata.png"}}),a("v-uni-view",[t._v("暂无数据")])],1)]:t._e(),a("v-uni-view",{staticClass:"scrollImg",class:{show:t.oldScrollTop>1e3},on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.toTop.apply(void 0,arguments)}}},[a("v-uni-image",{attrs:{src:"/static/img/scrollTop.png"}})],1)],2)},n=[]},"23b9":function(t,e,a){"use strict";a.r(e);var i=a("0fa6d"),n=a("f8b6");for(var s in n)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(s);a("8758");var r=a("828b"),o=Object(r["a"])(n["default"],i["b"],i["c"],!1,null,"3a853e6a",null,!1,i["a"],void 0);e["default"]=o.exports},"24db":function(t,e,a){"use strict";a.d(e,"b",(function(){return i})),a.d(e,"c",(function(){return n})),a.d(e,"a",(function(){}));var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-scroll-view",{staticClass:"scrollView",attrs:{"scroll-y":"true","scroll-top":t.scrollTop,"refresher-enabled":"true","refresher-triggered":t.triggered,"refresher-threshold":100},on:{scrolltolower:function(e){arguments[0]=e=t.$handleEvent(e),t.loadMore.apply(void 0,arguments)},scroll:function(e){arguments[0]=e=t.$handleEvent(e),t.watchScroll.apply(void 0,arguments)},refresherrefresh:function(e){arguments[0]=e=t.$handleEvent(e),t.onRefresh.apply(void 0,arguments)},refresherrestore:function(e){arguments[0]=e=t.$handleEvent(e),t.onRestore.apply(void 0,arguments)},refresherabort:function(e){arguments[0]=e=t.$handleEvent(e),t.refresherabort.apply(void 0,arguments)}}},[t._l(t.list,(function(e){return[1==e.deflag?a("v-uni-view",{key:e.id+"_0",staticClass:"listItem",on:{click:function(a){a.stopPropagation(),arguments[0]=a=t.$handleEvent(a),t.toDetail(e)}}},[a("v-uni-view",{staticClass:"listItem_text"},[t._v(" 单号："+t._s(e.costAdjustNo||"")),a("v-uni-text",{staticClass:"auditStatus"},[t._v(t._s(t.checkStatusName[e.checkStatus]||"未审核"))])],1),a("v-uni-view",{staticClass:"listItem_subtext"},[a("v-uni-view",[t._v("开单日期：")]),a("v-uni-view",{staticClass:"listItem_subtext-content"},[t._v(t._s(t._f("formatDate")(e.fillDate)))])],1),a("v-uni-view",{staticClass:"listItem_subtext"},[a("v-uni-view",[t._v("仓库：")]),a("v-uni-view",{staticClass:"listItem_subtext-content"},[t._v(t._s(e.storehouseName||""))])],1),a("v-uni-view",{staticClass:"listItem_subtext"},[a("v-uni-view",[t._v("差异金额：")]),a("v-uni-view",{staticClass:"listItem_subtext-content"},[t._v(t._s(e.differenceValue||""))])],1),a("v-uni-view",{staticClass:"listItem_btngroud",on:{click:function(a){a.stopPropagation(),arguments[0]=a=t.$handleEvent(a),t.tapBtn(a,e)}}},[t.isCanCheck&&2!=e.checkStatus?a("v-uni-view",{staticClass:"listItem_btngroud-btn",attrs:{"data-method":"findCheckDetail"}},[t._v("审核")]):t._e()],1)],1):t._e()]})),t.isShowNoData&&!t.isLoading?[a("v-uni-view",{staticClass:"nodata"},[a("v-uni-image",{attrs:{src:"/static/img/nodata.png"}}),a("v-uni-view",[t._v("暂无数据")])],1)]:t._e(),a("v-uni-view",{staticClass:"scrollImg",class:{show:t.oldScrollTop>1e3},on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.toTop.apply(void 0,arguments)}}},[a("v-uni-image",{attrs:{src:"/static/img/scrollTop.png"}})],1)],2)},n=[]},"29fa":function(t,e,a){"use strict";a.d(e,"b",(function(){return i})),a.d(e,"c",(function(){return n})),a.d(e,"a",(function(){}));var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-scroll-view",{staticClass:"scrollView",attrs:{"scroll-y":"true","scroll-top":t.scrollTop,"refresher-enabled":"true","refresher-triggered":t.triggered,"refresher-threshold":100},on:{scrolltolower:function(e){arguments[0]=e=t.$handleEvent(e),t.loadMore.apply(void 0,arguments)},scroll:function(e){arguments[0]=e=t.$handleEvent(e),t.watchScroll.apply(void 0,arguments)},refresherrefresh:function(e){arguments[0]=e=t.$handleEvent(e),t.onRefresh.apply(void 0,arguments)},refresherrestore:function(e){arguments[0]=e=t.$handleEvent(e),t.onRestore.apply(void 0,arguments)},refresherabort:function(e){arguments[0]=e=t.$handleEvent(e),t.refresherabort.apply(void 0,arguments)}}},[t._l(t.list,(function(e){return[1==e.deflag?a("v-uni-view",{key:e.id+"_0",staticClass:"listItem",on:{click:function(a){a.stopPropagation(),arguments[0]=a=t.$handleEvent(a),t.toDetail(e)}}},[a("v-uni-view",{staticClass:"listItem_text"},[t._v(" 单号："+t._s(e.purchaseNo||"")),a("v-uni-text",{staticClass:"auditStatus"},[t._v(t._s(t.checkStatusName[e.checkStatus]||"未审核"))]),a("v-uni-text",{staticClass:"payStatus"},[t._v(t._s(t.payStatusName[e.payFlag]||"未付款"))])],1),a("v-uni-view",{staticClass:"listItem_subtext"},[a("v-uni-view",[t._v("开单日期：")]),a("v-uni-view",{staticClass:"listItem_subtext-content"},[t._v(t._s(t._f("formatDate")(e.fillDate)))])],1),a("v-uni-view",{staticClass:"listItem_subtext alginCenter"},[a("v-uni-view",[t._v("仓库名称：")]),a("v-uni-view",{staticClass:"listItem_subtext-content"},[t._v(t._s(e.storehouseName||""))]),a("v-uni-view",{staticClass:"listItem_subtext-amt"},[a("v-uni-text",[t._v("¥")]),t._v(t._s(e.totalAmount||0)+" ")],1)],1),a("v-uni-view",{staticClass:"listItem_subtext"},[a("v-uni-view",[t._v("供应商名称：")]),a("v-uni-view",{staticClass:"listItem_subtext-content"},[t._v(t._s(e.supplierName||""))])],1),a("v-uni-view",{staticClass:"listItem_subtext"},[a("v-uni-view",[t._v("单据打印次数：")]),a("v-uni-view",{staticClass:"listItem_subtext-content"},[t._v(t._s(e.printCount||0))])],1),a("v-uni-view",{staticClass:"listItem_btngroud",on:{click:function(a){a.stopPropagation(),arguments[0]=a=t.$handleEvent(a),t.tapBtn(a,e)}}},[t.isCanAdd&&2!=e.checkStatus?a("v-uni-view",{staticClass:"listItem_btngroud-btn",attrs:{"data-method":"toOpenNewNote"}},[t._v("编辑")]):t._e(),t.isCanCheck&&2!=e.checkStatus?a("v-uni-view",{staticClass:"listItem_btngroud-btn",attrs:{"data-method":"checkOrder"}},[t._v("审核")]):t._e()],1)],1):t._e()]})),t.isShowNoData&&!t.isLoading?[a("v-uni-view",{staticClass:"nodata"},[a("v-uni-image",{attrs:{src:"/static/img/nodata.png"}}),a("v-uni-view",[t._v("暂无数据")])],1)]:t._e(),a("v-uni-view",{staticClass:"scrollImg",class:{show:t.oldScrollTop>1e3},on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.toTop.apply(void 0,arguments)}}},[a("v-uni-image",{attrs:{src:"/static/img/scrollTop.png"}})],1)],2)},n=[]},"2c78":function(t,e,a){"use strict";a.r(e);var i=a("0c88"),n=a("c450");for(var s in n)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(s);a("583f");var r=a("828b"),o=Object(r["a"])(n["default"],i["b"],i["c"],!1,null,"6f93f78f",null,!1,i["a"],void 0);e["default"]=o.exports},"2dc5":function(t,e,a){var i=a("c86c");e=i(!1),e.push([t.i,".scrollView[data-v-69ed812e]{width:100%;height:100%}.scrollView .listItem[data-v-69ed812e]{font-size:%?28?%;font-family:PingFangSC-Regular,PingFang SC;font-weight:400;color:grey;line-height:%?40?%;padding:%?40?%}.scrollView .listItem + .listItem[data-v-69ed812e]{border-top:%?1?% solid #eee}.scrollView .listItem .listItem_text[data-v-69ed812e]{overflow:hidden;text-overflow:ellipsis;word-break:break-all;font-size:%?32?%;font-weight:500;color:#333;line-height:%?45?%}.scrollView .listItem .listItem_text uni-text[data-v-69ed812e]{font-size:%?22?%;color:#fff;line-height:%?30?%;padding:0 %?5?%;margin-left:%?15?%;border-radius:%?4?%;vertical-align:middle}.scrollView .listItem .listItem_text uni-text.auditStatus[data-v-69ed812e]{background:#5ccc8b}.scrollView .listItem .listItem_text uni-text.wmsStatus[data-v-69ed812e]{background:#f97067}.scrollView .listItem .listItem_text uni-text.payStatus[data-v-69ed812e]{background:#3da9fa}.scrollView .listItem .listItem_subtext[data-v-69ed812e]{display:flex;margin-top:%?20?%}.scrollView .listItem .listItem_subtext .listItem_subtext-content[data-v-69ed812e]{flex:1;word-break:break-all;text-align:left}.scrollView .listItem .listItem_subtext .listItem_subtext-amt[data-v-69ed812e]{font-size:%?32?%;font-weight:500;color:red;line-height:%?45?%;margin-left:%?10?%}.scrollView .listItem .listItem_subtext .listItem_subtext-amt uni-text[data-v-69ed812e]{font-size:%?24?%;line-height:%?33?%;font-weight:400;margin-right:%?10?%}.scrollView .listItem .listItem_subtext.alginCenter[data-v-69ed812e]{align-items:center}.scrollView .listItem .listItem_btngroud[data-v-69ed812e]{margin-top:%?30?%;display:flex;flex-wrap:wrap;justify-content:flex-end;color:#666}.scrollView .listItem .listItem_btngroud .listItem_btngroud-btn[data-v-69ed812e]{padding:%?12?% %?45?%;border-radius:%?32?%;border:%?1?% solid #ccc}.scrollView .listItem .listItem_btngroud .listItem_btngroud-btn + .listItem_btngroud-btn[data-v-69ed812e]{margin-left:%?20?%}.scrollView .nodata[data-v-69ed812e]{text-align:center}.scrollView .nodata uni-image[data-v-69ed812e]{width:100%;height:100%}.scrollView .scrollImg[data-v-69ed812e]{position:fixed;left:%?-80?%;bottom:%?201?%;z-index:99;background:#fff;box-shadow:%?2?% %?2?% %?13?% %?0?% hsla(0,0%,40%,.2);width:%?80?%;height:%?80?%;border-radius:50%;display:flex;align-items:center;justify-content:center;opacity:0;transition:all .5s}.scrollView .scrollImg uni-image[data-v-69ed812e]{width:%?31?%;height:%?40?%}.scrollView .scrollImg.show[data-v-69ed812e]{left:%?35?%;opacity:1}",""]),t.exports=e},"2e04":function(t,e,a){var i=a("c86c");e=i(!1),e.push([t.i,".scrollView[data-v-f7a65a76]{width:100%;height:100%}.scrollView .listItem[data-v-f7a65a76]{font-size:%?28?%;font-family:PingFangSC-Regular,PingFang SC;font-weight:400;color:grey;line-height:%?40?%;padding:%?40?%}.scrollView .listItem + .listItem[data-v-f7a65a76]{border-top:%?1?% solid #eee}.scrollView .listItem .listItem_text[data-v-f7a65a76]{overflow:hidden;text-overflow:ellipsis;word-break:break-all;font-size:%?32?%;font-weight:500;color:#333;line-height:%?45?%}.scrollView .listItem .listItem_text uni-text[data-v-f7a65a76]{font-size:%?22?%;color:#fff;line-height:%?30?%;padding:0 %?5?%;margin-left:%?15?%;border-radius:%?4?%;vertical-align:middle}.scrollView .listItem .listItem_text uni-text.auditStatus[data-v-f7a65a76]{background:#5ccc8b}.scrollView .listItem .listItem_text uni-text.wmsStatus[data-v-f7a65a76]{background:#f97067}.scrollView .listItem .listItem_text uni-text.payStatus[data-v-f7a65a76]{background:#3da9fa}.scrollView .listItem .listItem_subtext[data-v-f7a65a76]{display:flex;margin-top:%?20?%}.scrollView .listItem .listItem_subtext .listItem_subtext-content[data-v-f7a65a76]{flex:1;word-break:break-all;text-align:left}.scrollView .listItem .listItem_subtext .listItem_subtext-amt[data-v-f7a65a76]{font-size:%?32?%;font-weight:500;color:red;line-height:%?45?%;margin-left:%?10?%}.scrollView .listItem .listItem_subtext .listItem_subtext-amt uni-text[data-v-f7a65a76]{font-size:%?24?%;line-height:%?33?%;font-weight:400;margin-right:%?10?%}.scrollView .listItem .listItem_subtext.alginCenter[data-v-f7a65a76]{align-items:center}.scrollView .listItem .listItem_btngroud[data-v-f7a65a76]{margin-top:%?30?%;display:flex;flex-wrap:wrap;justify-content:flex-end;color:#666}.scrollView .listItem .listItem_btngroud .listItem_btngroud-btn[data-v-f7a65a76]{padding:%?12?% %?45?%;border-radius:%?32?%;border:%?1?% solid #ccc}.scrollView .listItem .listItem_btngroud .listItem_btngroud-btn + .listItem_btngroud-btn[data-v-f7a65a76]{margin-left:%?20?%}.scrollView .nodata[data-v-f7a65a76]{text-align:center}.scrollView .nodata uni-image[data-v-f7a65a76]{width:100%;height:100%}.scrollView .scrollImg[data-v-f7a65a76]{position:fixed;left:%?-80?%;bottom:%?201?%;z-index:99;background:#fff;box-shadow:%?2?% %?2?% %?13?% %?0?% hsla(0,0%,40%,.2);width:%?80?%;height:%?80?%;border-radius:50%;display:flex;align-items:center;justify-content:center;opacity:0;transition:all .5s}.scrollView .scrollImg uni-image[data-v-f7a65a76]{width:%?31?%;height:%?40?%}.scrollView .scrollImg.show[data-v-f7a65a76]{left:%?35?%;opacity:1}",""]),t.exports=e},3082:function(t,e,a){"use strict";a.r(e);var i=a("b601"),n=a.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(s);e["default"]=n.a},3622:function(t,e,a){var i=a("4a87");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("967d").default;n("7cb73fa0",i,!0,{sourceMap:!1,shadowMode:!1})},"392a":function(t,e,a){"use strict";(function(t){a("6a54");var i=a("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("c223"),a("fd3c");var n=i(a("2634")),s=i(a("2fdc")),r=i(a("9b1b")),o=a("f55d"),l=i(a("63d3")),c=a("9cee"),u=a("8f59"),d={name:"purchaseOrderNote",data:function(){return{list:[],hasNextPage:!0,pageNum:1,pageSize:20,isLoading:!0,endStatusName:c.endStatusName,scrollTop:0,triggered:!1,checkStatusName:c.checkStatusName,oldScrollTop:0}},computed:(0,r.default)((0,r.default)({isShowNoData:function(){return this.list.length<=0}},(0,u.mapState)({customParams:function(t){return t.custom.customParams}})),{},{isCanCheck:function(){return this.$store.getters.getMenubtnsByUrl({parentUrl:"main/purchase/orderNote/2",authority:"chk"})},isCanAdd:function(){return this.$store.getters.getMenubtnsByUrl({parentUrl:"main/purchase/orderNote/1",authority:"add"})},isCanEdit:function(){return this.$store.getters.getMenubtnsByUrl({parentUrl:"main/purchase/orderNote/1",authority:"edit"})}}),filters:{formatDate:function(t){return t?l.default.timeTransfer(t):""}},created:function(){this.getData()},methods:(0,r.default)((0,r.default)({},(0,u.mapMutations)(["setparams"])),{},{getData:function(){var t=this;return(0,s.default)((0,n.default)().mark((function e(){var a,i,s,l,c;return(0,n.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=(0,r.default)({pageNum:t.pageNum,pageSize:t.pageSize},t.customParams),t.setLoadingStatus(!0),e.prev=2,e.next=5,t.get("api/purchase/main/101/statisticsPage",a,1);case 5:return i=e.sent,e.next=8,(0,o.wait)(300);case 8:if(t.setLoadingStatus(!1),!i.meta.success){e.next=19;break}if(s=i.data.pageInfo,s){e.next=14;break}return t.hasNextPage=!1,e.abrupt("return");case 14:l=s.hasNextPage,c=s.list,t.hasNextPage=l,t.list=(1==t.pageNum?[]:t.list).concat(Array.prototype.map.call(c||[],(function(t){return(0,r.default)((0,r.default)({},t),{},{deflag:1})}))),e.next=20;break;case 19:uni.showToast({title:i.meta.message,icon:"none",duration:2e3});case 20:e.next=25;break;case 22:e.prev=22,e.t0=e["catch"](2),t.setLoadingStatus(!1);case 25:case"end":return e.stop()}}),e,null,[[2,22]])})))()},setLoadingStatus:function(t){t?uni.showLoading({title:"加载中"}):(this.triggered&&(this.triggered=!1),uni.hideLoading()),this.isLoading=t},loadMore:function(){this.hasNextPage&&!this.isLoading&&(this.pageNum+=1,this.getData())},initData:function(){this.pageNum=1,this.hasNextPage=!0,this.getData()},checkOrder:function(e){var a=this;return(0,s.default)((0,n.default)().mark((function i(){var s,r;return(0,n.default)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,(0,o.showModal)({content:"是否审核该单据"});case 3:if(s=i.sent,s){i.next=6;break}return i.abrupt("return");case 6:return uni.showLoading({title:"正在审核中",mask:!0}),i.next=9,a.post("api/purchase/main/".concat(e.id,"/check"),{},1);case 9:return r=i.sent,i.next=12,(0,o.wait)(300);case 12:uni.hideLoading(),r.meta.success?(uni.showToast({title:"审核成功",icon:"none",duration:2e3}),e.checkStatus=2):uni.showToast({title:r.meta.message,icon:"none",duration:2e3}),i.next=19;break;case 16:i.prev=16,i.t0=i["catch"](0),t.error(i.t0);case 19:case"end":return i.stop()}}),i,null,[[0,16]])})))()},toOpenNewNote:function(t){var e=uni.getStorageSync("employeeId"),a=uni.getStorageSync("privilegeMap");e==t.creator||1!=a.banMoOtherDocStatus?1==a.banChangeSaleStatus&&t.printCount>0?uni.showToast({title:"禁止修改打印过的单据",icon:"none",duration:2e3}):(uni.setStorageSync("againPurchase",(0,r.default)({},t)),uni.navigateTo({url:"/pages/index/purchaseNoteNew/purchaseNoteNew?purchaseType=1"})):uni.showToast({title:"不能修改他人单据",icon:"none",duration:2e3})},tapBtn:function(t,e){var a=t.target,i=e.id;if(i){var n=a.dataset.method;n&&this[n](e)}},toDetail:function(e){if(e.id&&this.isCanEdit){var a=this;uni.navigateTo({url:"/pages/documentHistorys/children/purchaseOrderNoteDetail?id=".concat(e.id),events:{changStatus:function(i){var n=i.checkStatus,s=i.deflag,r=i.endState;t.log(s),Object.assign(e,{checkStatus:n||0,deflag:s||0!==s?1:0,endState:r||0!==r?r:0}),a.$forceUpdate()}}})}},watchScroll:function(t){var e=t.detail,a=e.scrollTop;this.oldScrollTop=a||0},toTop:function(){var t=this;this.scrollTop=this.oldScrollTop,this.$nextTick((function(){t.scrollTop=0,t.oldScrollTop=0}))},onRefresh:function(){this.isLoading||(this.triggered=!0,this.initData())},onRestore:function(){this.triggered=!1},refresherabort:function(){this.triggered=!1}})};e.default=d}).call(this,a("ba7c")["default"])},4189:function(t,e,a){var i=a("c86c");e=i(!1),e.push([t.i,".scrollView[data-v-f7cab232]{width:100%;height:100%}.scrollView .listItem[data-v-f7cab232]{font-size:%?28?%;font-family:PingFangSC-Regular,PingFang SC;font-weight:400;color:grey;line-height:%?40?%;padding:%?40?%}.scrollView .listItem + .listItem[data-v-f7cab232]{border-top:%?1?% solid #eee}.scrollView .listItem .listItem_text[data-v-f7cab232]{overflow:hidden;text-overflow:ellipsis;word-break:break-all;font-size:%?32?%;font-weight:500;color:#333;line-height:%?45?%}.scrollView .listItem .listItem_text uni-text[data-v-f7cab232]{font-size:%?22?%;color:#fff;line-height:%?30?%;padding:0 %?5?%;margin-left:%?15?%;border-radius:%?4?%;vertical-align:middle}.scrollView .listItem .listItem_text uni-text.auditStatus[data-v-f7cab232]{background:#5ccc8b}.scrollView .listItem .listItem_text uni-text.wmsStatus[data-v-f7cab232]{background:#f97067}.scrollView .listItem .listItem_text uni-text.payStatus[data-v-f7cab232]{background:#3da9fa}.scrollView .listItem .listItem_subtext[data-v-f7cab232]{display:flex;margin-top:%?20?%}.scrollView .listItem .listItem_subtext .listItem_subtext-content[data-v-f7cab232]{flex:1;word-break:break-all;text-align:left}.scrollView .listItem .listItem_subtext .listItem_subtext-amt[data-v-f7cab232]{font-size:%?32?%;font-weight:500;color:red;line-height:%?45?%;margin-left:%?10?%}.scrollView .listItem .listItem_subtext .listItem_subtext-amt uni-text[data-v-f7cab232]{font-size:%?24?%;line-height:%?33?%;font-weight:400;margin-right:%?10?%}.scrollView .listItem .listItem_subtext.alginCenter[data-v-f7cab232]{align-items:center}.scrollView .listItem .listItem_btngroud[data-v-f7cab232]{margin-top:%?30?%;display:flex;flex-wrap:wrap;justify-content:flex-end;color:#666}.scrollView .listItem .listItem_btngroud .listItem_btngroud-btn[data-v-f7cab232]{padding:%?12?% %?45?%;border-radius:%?32?%;border:%?1?% solid #ccc}.scrollView .listItem .listItem_btngroud .listItem_btngroud-btn + .listItem_btngroud-btn[data-v-f7cab232]{margin-left:%?20?%}.scrollView .nodata[data-v-f7cab232]{text-align:center}.scrollView .nodata uni-image[data-v-f7cab232]{width:100%;height:100%}.scrollView .scrollImg[data-v-f7cab232]{position:fixed;left:%?-80?%;bottom:%?201?%;z-index:99;background:#fff;box-shadow:%?2?% %?2?% %?13?% %?0?% hsla(0,0%,40%,.2);width:%?80?%;height:%?80?%;border-radius:50%;display:flex;align-items:center;justify-content:center;opacity:0;transition:all .5s}.scrollView .scrollImg uni-image[data-v-f7cab232]{width:%?31?%;height:%?40?%}.scrollView .scrollImg.show[data-v-f7cab232]{left:%?35?%;opacity:1}",""]),t.exports=e},4295:function(t,e,a){"use strict";a.d(e,"b",(function(){return i})),a.d(e,"c",(function(){return n})),a.d(e,"a",(function(){}));var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-scroll-view",{staticClass:"scrollView",attrs:{"scroll-y":"true","scroll-top":t.scrollTop,"refresher-enabled":"true","refresher-triggered":t.triggered,"refresher-threshold":100},on:{scrolltolower:function(e){arguments[0]=e=t.$handleEvent(e),t.loadMore.apply(void 0,arguments)},scroll:function(e){arguments[0]=e=t.$handleEvent(e),t.watchScroll.apply(void 0,arguments)},refresherrefresh:function(e){arguments[0]=e=t.$handleEvent(e),t.onRefresh.apply(void 0,arguments)},refresherrestore:function(e){arguments[0]=e=t.$handleEvent(e),t.onRestore.apply(void 0,arguments)},refresherabort:function(e){arguments[0]=e=t.$handleEvent(e),t.refresherabort.apply(void 0,arguments)}}},[t._l(t.list,(function(e){return[1==e.deflag?a("v-uni-view",{key:e.id+"_0",staticClass:"listItem",on:{click:function(a){a.stopPropagation(),arguments[0]=a=t.$handleEvent(a),t.toDetail(e)}}},[a("v-uni-view",{staticClass:"listItem_text"},[t._v(" 单号："+t._s(e.inventoryNo||"")),a("v-uni-text",{staticClass:"auditStatus"},[t._v(t._s(t.checkStatusName[e.checkStatus]||"未审核"))])],1),a("v-uni-view",{staticClass:"listItem_subtext"},[a("v-uni-view",[t._v("开单日期：")]),a("v-uni-view",{staticClass:"listItem_subtext-content"},[t._v(t._s(t._f("formatDate")(e.fillDate)))])],1),a("v-uni-view",{staticClass:"listItem_subtext"},[a("v-uni-view",[t._v("仓库：")]),a("v-uni-view",{staticClass:"listItem_subtext-content"},[t._v(t._s(e.storehouseName||""))])],1),a("v-uni-view",{staticClass:"listItem_btngroud",on:{click:function(a){a.stopPropagation(),arguments[0]=a=t.$handleEvent(a),t.tapBtn(a,e)}}},[t.isCanAdd&&2!=e.checkStatus?a("v-uni-view",{staticClass:"listItem_btngroud-btn",attrs:{"data-method":"toOpenNewNote"}},[t._v("编辑")]):t._e(),t.isCanCheck&&2!=e.checkStatus?a("v-uni-view",{staticClass:"listItem_btngroud-btn",attrs:{"data-method":"findCheckDetail"}},[t._v("审核")]):t._e()],1)],1):t._e()]})),t.isShowNoData&&!t.isLoading?[a("v-uni-view",{staticClass:"nodata"},[a("v-uni-image",{attrs:{src:"/static/img/nodata.png"}}),a("v-uni-view",[t._v("暂无数据")])],1)]:t._e(),a("v-uni-view",{staticClass:"scrollImg",class:{show:t.oldScrollTop>1e3},on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.toTop.apply(void 0,arguments)}}},[a("v-uni-image",{attrs:{src:"/static/img/scrollTop.png"}})],1)],2)},n=[]},4580:function(t,e,a){"use strict";var i=a("3622"),n=a.n(i);n.a},4664:function(t,e,a){"use strict";a.d(e,"b",(function(){return i})),a.d(e,"c",(function(){return n})),a.d(e,"a",(function(){}));var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-scroll-view",{staticClass:"scrollView",attrs:{"scroll-y":"true","scroll-top":t.scrollTop,"refresher-enabled":"true","refresher-triggered":t.triggered,"refresher-threshold":100},on:{scrolltolower:function(e){arguments[0]=e=t.$handleEvent(e),t.loadMore.apply(void 0,arguments)},scroll:function(e){arguments[0]=e=t.$handleEvent(e),t.watchScroll.apply(void 0,arguments)},refresherrefresh:function(e){arguments[0]=e=t.$handleEvent(e),t.onRefresh.apply(void 0,arguments)},refresherrestore:function(e){arguments[0]=e=t.$handleEvent(e),t.onRestore.apply(void 0,arguments)},refresherabort:function(e){arguments[0]=e=t.$handleEvent(e),t.refresherabort.apply(void 0,arguments)}}},[t._l(t.list,(function(e){return[1==e.deflag?a("v-uni-view",{key:e.id+"_0",staticClass:"listItem",on:{click:function(a){a.stopPropagation(),arguments[0]=a=t.$handleEvent(a),t.toDetail(e)}}},[a("v-uni-view",{staticClass:"listItem_text"},[t._v(" 单号："+t._s(e.transferNo||"")),a("v-uni-text",{staticClass:"auditStatus"},[t._v(t._s(t.checkStatusName[e.checkStatus]||"未审核"))])],1),a("v-uni-view",{staticClass:"listItem_subtext alginCenter"},[a("v-uni-view",[t._v("出库仓库：")]),a("v-uni-view",{staticClass:"listItem_subtext-content"},[t._v(t._s(e.outStorehouseName||""))])],1),a("v-uni-view",{staticClass:"listItem_subtext"},[a("v-uni-view",[t._v("入库仓库：")]),a("v-uni-view",{staticClass:"listItem_subtext-content"},[t._v(t._s(e.inStorehouseName||""))])],1),a("v-uni-view",{staticClass:"listItem_subtext"},[a("v-uni-view",[t._v("开单日期：")]),a("v-uni-view",{staticClass:"listItem_subtext-content"},[t._v(t._s(t._f("formatDate")(e.fillDate)))])],1),a("v-uni-view",{staticClass:"listItem_btngroud",on:{click:function(a){a.stopPropagation(),arguments[0]=a=t.$handleEvent(a),t.tapBtn(a,e)}}},[t.isCanAdd&&2!=e.checkStatus?a("v-uni-view",{staticClass:"listItem_btngroud-btn",attrs:{"data-method":"toOpenNewNote"}},[t._v("编辑")]):t._e(),t.isCanCheck&&2!=e.checkStatus?a("v-uni-view",{staticClass:"listItem_btngroud-btn",attrs:{"data-method":"checkOrder"}},[t._v("审核")]):t._e()],1)],1):t._e()]})),t.isShowNoData&&!t.isLoading?[a("v-uni-view",{staticClass:"nodata"},[a("v-uni-image",{attrs:{src:"/static/img/nodata.png"}}),a("v-uni-view",[t._v("暂无数据")])],1)]:t._e(),a("v-uni-view",{staticClass:"scrollImg",class:{show:t.oldScrollTop>1e3},on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.toTop.apply(void 0,arguments)}}},[a("v-uni-image",{attrs:{src:"/static/img/scrollTop.png"}})],1)],2)},n=[]},"477d":function(t,e,a){"use strict";var i=a("b4e5"),n=a.n(i);n.a},"4a75":function(t,e,a){var i=a("c86c");e=i(!1),e.push([t.i,".scrollView[data-v-6f93f78f]{width:100%;height:100%}.scrollView .listItem[data-v-6f93f78f]{font-size:%?28?%;font-family:PingFangSC-Regular,PingFang SC;font-weight:400;color:grey;line-height:%?40?%;padding:%?40?%}.scrollView .listItem + .listItem[data-v-6f93f78f]{border-top:%?1?% solid #eee}.scrollView .listItem .listItem_text[data-v-6f93f78f]{overflow:hidden;text-overflow:ellipsis;word-break:break-all;font-size:%?32?%;font-weight:500;color:#333;line-height:%?45?%}.scrollView .listItem .listItem_text uni-text[data-v-6f93f78f]{font-size:%?22?%;color:#fff;line-height:%?30?%;padding:0 %?5?%;margin-left:%?15?%;border-radius:%?4?%;vertical-align:middle}.scrollView .listItem .listItem_text uni-text.auditStatus[data-v-6f93f78f]{background:#5ccc8b}.scrollView .listItem .listItem_text uni-text.wmsStatus[data-v-6f93f78f]{background:#f97067}.scrollView .listItem .listItem_text uni-text.payStatus[data-v-6f93f78f]{background:#3da9fa}.scrollView .listItem .listItem_subtext[data-v-6f93f78f]{display:flex;margin-top:%?20?%}.scrollView .listItem .listItem_subtext .listItem_subtext-content[data-v-6f93f78f]{flex:1;word-break:break-all;text-align:left}.scrollView .listItem .listItem_subtext .listItem_subtext-amt[data-v-6f93f78f]{font-size:%?32?%;font-weight:500;color:red;line-height:%?45?%;margin-left:%?10?%}.scrollView .listItem .listItem_subtext .listItem_subtext-amt uni-text[data-v-6f93f78f]{font-size:%?24?%;line-height:%?33?%;font-weight:400;margin-right:%?10?%}.scrollView .listItem .listItem_subtext.alginCenter[data-v-6f93f78f]{align-items:center}.scrollView .listItem .listItem_btngroud[data-v-6f93f78f]{margin-top:%?30?%;display:flex;flex-wrap:wrap;justify-content:flex-end;color:#666}.scrollView .listItem .listItem_btngroud .listItem_btngroud-btn[data-v-6f93f78f]{padding:%?12?% %?45?%;border-radius:%?32?%;border:%?1?% solid #ccc}.scrollView .listItem .listItem_btngroud .listItem_btngroud-btn + .listItem_btngroud-btn[data-v-6f93f78f]{margin-left:%?20?%}.scrollView .nodata[data-v-6f93f78f]{text-align:center}.scrollView .nodata uni-image[data-v-6f93f78f]{width:100%;height:100%}.scrollView .scrollImg[data-v-6f93f78f]{position:fixed;left:%?-80?%;bottom:%?201?%;z-index:99;background:#fff;box-shadow:%?2?% %?2?% %?13?% %?0?% hsla(0,0%,40%,.2);width:%?80?%;height:%?80?%;border-radius:50%;display:flex;align-items:center;justify-content:center;opacity:0;transition:all .5s}.scrollView .scrollImg uni-image[data-v-6f93f78f]{width:%?31?%;height:%?40?%}.scrollView .scrollImg.show[data-v-6f93f78f]{left:%?35?%;opacity:1}",""]),t.exports=e},"4a87":function(t,e,a){var i=a("c86c");e=i(!1),e.push([t.i,".scrollView[data-v-b0718784]{width:100%;height:100%}.scrollView .listItem[data-v-b0718784]{font-size:%?28?%;font-family:PingFangSC-Regular,PingFang SC;font-weight:400;color:grey;line-height:%?40?%;padding:%?40?%}.scrollView .listItem + .listItem[data-v-b0718784]{border-top:%?1?% solid #eee}.scrollView .listItem .listItem_text[data-v-b0718784]{overflow:hidden;text-overflow:ellipsis;word-break:break-all;font-size:%?32?%;font-weight:500;color:#333;line-height:%?45?%}.scrollView .listItem .listItem_text uni-text[data-v-b0718784]{font-size:%?22?%;color:#fff;line-height:%?30?%;padding:0 %?5?%;margin-left:%?15?%;border-radius:%?4?%;vertical-align:middle}.scrollView .listItem .listItem_text uni-text.auditStatus[data-v-b0718784]{background:#5ccc8b}.scrollView .listItem .listItem_text uni-text.wmsStatus[data-v-b0718784]{background:#f97067}.scrollView .listItem .listItem_text uni-text.payStatus[data-v-b0718784]{background:#3da9fa}.scrollView .listItem .listItem_subtext[data-v-b0718784]{display:flex;margin-top:%?20?%}.scrollView .listItem .listItem_subtext .listItem_subtext-content[data-v-b0718784]{flex:1;word-break:break-all;text-align:left}.scrollView .listItem .listItem_subtext .listItem_subtext-amt[data-v-b0718784]{font-size:%?32?%;font-weight:500;color:red;line-height:%?45?%;margin-left:%?10?%}.scrollView .listItem .listItem_subtext .listItem_subtext-amt uni-text[data-v-b0718784]{font-size:%?24?%;line-height:%?33?%;font-weight:400;margin-right:%?10?%}.scrollView .listItem .listItem_subtext.alginCenter[data-v-b0718784]{align-items:center}.scrollView .listItem .listItem_btngroud[data-v-b0718784]{margin-top:%?30?%;display:flex;flex-wrap:wrap;justify-content:flex-end;color:#666}.scrollView .listItem .listItem_btngroud .listItem_btngroud-btn[data-v-b0718784]{padding:%?12?% %?45?%;border-radius:%?32?%;border:%?1?% solid #ccc}.scrollView .listItem .listItem_btngroud .listItem_btngroud-btn + .listItem_btngroud-btn[data-v-b0718784]{margin-left:%?20?%}.scrollView .nodata[data-v-b0718784]{text-align:center}.scrollView .nodata uni-image[data-v-b0718784]{width:100%;height:100%}.scrollView .scrollImg[data-v-b0718784]{position:fixed;left:%?-80?%;bottom:%?201?%;z-index:99;background:#fff;box-shadow:%?2?% %?2?% %?13?% %?0?% hsla(0,0%,40%,.2);width:%?80?%;height:%?80?%;border-radius:50%;display:flex;align-items:center;justify-content:center;opacity:0;transition:all .5s}.scrollView .scrollImg uni-image[data-v-b0718784]{width:%?31?%;height:%?40?%}.scrollView .scrollImg.show[data-v-b0718784]{left:%?35?%;opacity:1}",""]),t.exports=e},"4e64":function(t,e,a){var i=a("c86c");e=i(!1),e.push([t.i,".scrollView[data-v-d288295e]{width:100%;height:100%}.scrollView .listItem[data-v-d288295e]{font-size:%?28?%;font-family:PingFangSC-Regular,PingFang SC;font-weight:400;color:grey;line-height:%?40?%;padding:%?40?%}.scrollView .listItem + .listItem[data-v-d288295e]{border-top:%?1?% solid #eee}.scrollView .listItem .listItem_text[data-v-d288295e]{overflow:hidden;text-overflow:ellipsis;word-break:break-all;font-size:%?32?%;font-weight:500;color:#333;line-height:%?45?%}.scrollView .listItem .listItem_text uni-text[data-v-d288295e]{font-size:%?22?%;color:#fff;line-height:%?30?%;padding:0 %?5?%;margin-left:%?15?%;border-radius:%?4?%;vertical-align:middle}.scrollView .listItem .listItem_text uni-text.auditStatus[data-v-d288295e]{background:#5ccc8b}.scrollView .listItem .listItem_text uni-text.wmsStatus[data-v-d288295e]{background:#f97067}.scrollView .listItem .listItem_text uni-text.payStatus[data-v-d288295e]{background:#3da9fa}.scrollView .listItem .listItem_subtext[data-v-d288295e]{display:flex;margin-top:%?20?%}.scrollView .listItem .listItem_subtext .listItem_subtext-content[data-v-d288295e]{flex:1;word-break:break-all;text-align:left}.scrollView .listItem .listItem_subtext .listItem_subtext-amt[data-v-d288295e]{font-size:%?32?%;font-weight:500;color:red;line-height:%?45?%;margin-left:%?10?%}.scrollView .listItem .listItem_subtext .listItem_subtext-amt uni-text[data-v-d288295e]{font-size:%?24?%;line-height:%?33?%;font-weight:400;margin-right:%?10?%}.scrollView .listItem .listItem_subtext.alginCenter[data-v-d288295e]{align-items:center}.scrollView .listItem .listItem_btngroud[data-v-d288295e]{margin-top:%?30?%;display:flex;flex-wrap:wrap;justify-content:flex-end;color:#666}.scrollView .listItem .listItem_btngroud .listItem_btngroud-btn[data-v-d288295e]{padding:%?12?% %?45?%;border-radius:%?32?%;border:%?1?% solid #ccc}.scrollView .listItem .listItem_btngroud .listItem_btngroud-btn + .listItem_btngroud-btn[data-v-d288295e]{margin-left:%?20?%}.scrollView .nodata[data-v-d288295e]{text-align:center}.scrollView .nodata uni-image[data-v-d288295e]{width:100%;height:100%}.scrollView .scrollImg[data-v-d288295e]{position:fixed;left:%?-80?%;bottom:%?201?%;z-index:99;background:#fff;box-shadow:%?2?% %?2?% %?13?% %?0?% hsla(0,0%,40%,.2);width:%?80?%;height:%?80?%;border-radius:50%;display:flex;align-items:center;justify-content:center;opacity:0;transition:all .5s}.scrollView .scrollImg uni-image[data-v-d288295e]{width:%?31?%;height:%?40?%}.scrollView .scrollImg.show[data-v-d288295e]{left:%?35?%;opacity:1}",""]),t.exports=e},"526b":function(t,e,a){var i=a("2e04");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("967d").default;n("2e049c48",i,!0,{sourceMap:!1,shadowMode:!1})},5345:function(t,e,a){"use strict";a.d(e,"b",(function(){return i})),a.d(e,"c",(function(){return n})),a.d(e,"a",(function(){}));var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-scroll-view",{staticClass:"scrollView",attrs:{"scroll-y":"true","scroll-top":t.scrollTop,"refresher-enabled":"true","refresher-triggered":t.triggered,"refresher-threshold":100},on:{scrolltolower:function(e){arguments[0]=e=t.$handleEvent(e),t.loadMore.apply(void 0,arguments)},scroll:function(e){arguments[0]=e=t.$handleEvent(e),t.watchScroll.apply(void 0,arguments)},refresherrefresh:function(e){arguments[0]=e=t.$handleEvent(e),t.onRefresh.apply(void 0,arguments)},refresherrestore:function(e){arguments[0]=e=t.$handleEvent(e),t.onRestore.apply(void 0,arguments)},refresherabort:function(e){arguments[0]=e=t.$handleEvent(e),t.refresherabort.apply(void 0,arguments)}}},[t._l(t.list,(function(e){return[1==e.deflag?a("v-uni-view",{key:e.id+"_0",staticClass:"listItem",on:{click:function(a){a.stopPropagation(),arguments[0]=a=t.$handleEvent(a),t.toDetail(e)}}},[a("v-uni-view",{staticClass:"listItem_text"},[t._v(" "+t._s(e.saleNo||"")),a("v-uni-text",{staticClass:"auditStatus"},[t._v(t._s(t.checkStatusName[e.checkStatus||0]))]),a("v-uni-text",{staticClass:"wmsStatus"},[t._v(t._s(t.sendBillStatusName[e.sendBill||0]))]),a("v-uni-text",{staticClass:"payStatus"},[t._v(t._s(t.payStatusName[e.payFlag]||"未付款"))])],1),a("v-uni-view",{staticClass:"listItem_subtext"},[a("v-uni-view",[t._v("客户名称：")]),a("v-uni-view",{staticClass:"listItem_subtext-content"},[t._v(t._s(e.customerName||""))])],1),a("v-uni-view",{staticClass:"listItem_subtext alginCenter"},[a("v-uni-view",[t._v("开单日期：")]),a("v-uni-view",{staticClass:"listItem_subtext-content"},[t._v(t._s(t._f("formatDate")(e.fillDate)))]),a("v-uni-view",{staticClass:"listItem_subtext-amt"},[a("v-uni-text",[t._v("¥")]),t._v(t._s(e.hasPriceAuth||void 0===e.hasPriceAuth?e.totalAmount||0:"****")+" ")],1)],1),a("v-uni-view",{staticClass:"listItem_subtext"},[a("v-uni-view",[t._v("单据打印次数：")]),a("v-uni-view",{staticClass:"listItem_subtext-content"},[t._v(t._s(e.printCount||0))])],1),a("v-uni-view",{staticClass:"listItem_btngroud",on:{click:function(a){a.stopPropagation(),arguments[0]=a=t.$handleEvent(a),t.tapBtn(a,e)}}},[t.isCanAdd&&2!=e.checkStatus?a("v-uni-view",{staticClass:"listItem_btngroud-btn",attrs:{"data-method":"toOpenNewNote"}},[t._v("编辑")]):t._e(),a("v-uni-view",{staticClass:"listItem_btngroud-btn",attrs:{"data-method":"tapPrint"}},[t._v("打印")]),a("v-uni-view",{staticClass:"listItem_btngroud-btn",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.share(e.id)}}},[t._v("分享")]),t.isCanCheck&&2!=e.checkStatus?a("v-uni-view",{staticClass:"listItem_btngroud-btn",attrs:{"data-method":"checkOrder"}},[t._v("审核")]):t._e()],1)],1):t._e()]})),t.isShowNoData&&!t.isLoading?[a("v-uni-view",{staticClass:"nodata"},[a("v-uni-image",{attrs:{src:"/static/img/nodata.png"}}),a("v-uni-view",[t._v("暂无数据")])],1)]:t._e(),a("v-uni-view",{staticClass:"scrollImg",class:{show:t.oldScrollTop>1e3},on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.toTop.apply(void 0,arguments)}}},[a("v-uni-image",{attrs:{src:"/static/img/scrollTop.png"}})],1)],2)},n=[]},"583f":function(t,e,a){"use strict";var i=a("0b5a7"),n=a.n(i);n.a},"59ba":function(t,e,a){"use strict";(function(t){a("6a54");var i=a("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("c223"),a("fd3c");var n=i(a("2634")),s=i(a("2fdc")),r=i(a("9b1b")),o=a("f55d"),l=i(a("63d3")),c=a("9cee"),u=a("8f59"),d={name:"countNote",data:function(){return{list:[],hasNextPage:!0,pageNum:1,pageSize:20,isLoading:!0,scrollTop:0,triggered:!1,checkStatusName:c.checkStatusName,oldScrollTop:0}},computed:(0,r.default)((0,r.default)({isShowNoData:function(){return this.list.length<=0}},(0,u.mapState)({customParams:function(t){return t.custom.customParams}})),{},{isCanCheck:function(){return this.$store.getters.getMenubtnsByUrl({parentUrl:"main/stock/countNote/2",authority:"chk"})},isCanAdd:function(){return this.$store.getters.getMenubtnsByUrl({parentUrl:"main/stock/countNote/1",authority:"add"})},isCanEdit:function(){return this.$store.getters.getMenubtnsByUrl({parentUrl:"main/stock/countNote/1",authority:"edit"})}}),filters:{formatDate:function(t){return t?l.default.timeTransfer(t):""}},created:function(){this.getData()},methods:(0,r.default)((0,r.default)({},(0,u.mapMutations)(["setparams"])),{},{getData:function(){var t=this;return(0,s.default)((0,n.default)().mark((function e(){var a,i,s,l,c;return(0,n.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=(0,r.default)({pageNum:t.pageNum,pageSize:t.pageSize},t.customParams),t.setLoadingStatus(!0),e.prev=2,e.next=5,t.get("api/check/main/page",a,1);case 5:return i=e.sent,e.next=8,(0,o.wait)(300);case 8:if(t.setLoadingStatus(!1),!i.meta.success){e.next=19;break}if(s=i.data.CheckMain,s){e.next=14;break}return t.hasNextPage=!1,e.abrupt("return");case 14:l=s.hasNextPage,c=s.list,t.hasNextPage=l,t.list=(1==t.pageNum?[]:t.list).concat(Array.prototype.map.call(c||[],(function(t){return(0,r.default)((0,r.default)({},t),{},{deflag:1})}))),e.next=20;break;case 19:uni.showToast({title:i.meta.message,icon:"none",duration:2e3});case 20:e.next=25;break;case 22:e.prev=22,e.t0=e["catch"](2),t.setLoadingStatus(!1);case 25:case"end":return e.stop()}}),e,null,[[2,22]])})))()},setLoadingStatus:function(t){t?uni.showLoading({title:"加载中"}):(this.triggered&&(this.triggered=!1),uni.hideLoading()),this.isLoading=t},loadMore:function(){this.hasNextPage&&!this.isLoading&&(this.pageNum+=1,this.getData())},initData:function(){this.pageNum=1,this.hasNextPage=!0,this.getData()},findCheckDetail:function(e){var a=this;return(0,s.default)((0,n.default)().mark((function i(){var s,r,l,c;return(0,n.default)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,(0,o.showModal)({content:"是否审核该单据"});case 3:if(s=i.sent,s){i.next=6;break}return i.abrupt("return");case 6:return uni.showLoading({title:"正在查找数据",mask:!0}),i.next=9,a.get("/api/im/check/detail/page",{inventoryId:e.id},1);case 9:return r=i.sent,i.next=12,(0,o.wait)(300);case 12:if(uni.hideLoading(),!r.meta.success){i.next=24;break}if(l=r.data.list,l&&!(l.length<=0)){i.next=18;break}return uni.showToast({icon:"none",title:"该盘点单没有盘点任何数据,无法审核!",duration:2e3}),i.abrupt("return");case 18:return i.next=20,a.checkOrder(e.id);case 20:c=i.sent,c&&(e.checkStatus=2),i.next=25;break;case 24:uni.showToast({title:r.meta.message,icon:"none",duration:2e3});case 25:i.next=30;break;case 27:i.prev=27,i.t0=i["catch"](0),t.error(i.t0);case 30:case"end":return i.stop()}}),i,null,[[0,27]])})))()},checkOrder:function(e){var a=this;return(0,s.default)((0,n.default)().mark((function i(){var s;return(0,n.default)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.prev=0,uni.showLoading({title:"正在审核中",mask:!0}),i.next=4,a.post("/api/im/check/".concat(e),{},1);case 4:return s=i.sent,i.next=7,(0,o.wait)(300);case 7:if(uni.hideLoading(),!s.meta.success){i.next=13;break}return uni.showToast({title:"审核成功",icon:"none",duration:2e3}),i.abrupt("return",!0);case 13:uni.showToast({title:s.meta.message,icon:"none",duration:2e3});case 14:i.next=19;break;case 16:i.prev=16,i.t0=i["catch"](0),t.error(i.t0);case 19:case"end":return i.stop()}}),i,null,[[0,16]])})))()},toOpenNewNote:function(t){var e=uni.getStorageSync("employeeId"),a=uni.getStorageSync("privilegeMap");e==t.creator||1!=a.banMoOtherDocStatus?1==a.banChangeSaleStatus&&t.printCount>0?uni.showToast({title:"禁止修改打印过的单据",icon:"none",duration:2e3}):(uni.setStorageSync("againInventor",(0,r.default)({},t)),uni.navigateTo({url:"/pages/index/countNoteNew/countNoteNew?againtype=1"})):uni.showToast({title:"不能修改他人单据",icon:"none",duration:2e3})},tapBtn:function(t,e){var a=t.target,i=e.id;if(i){var n=a.dataset.method;n&&this[n](e)}},toDetail:function(t){if(t.id&&this.isCanEdit){var e=this;uni.navigateTo({url:"/pages/documentHistorys/children/countNoteDetail?id=".concat(t.id),events:{changStatus:function(a){var i=a.checkStatus,n=a.deflag;Object.assign(t,{checkStatus:i||0,deflag:n||0!==n?1:0}),e.$forceUpdate()}}})}},watchScroll:function(t){var e=t.detail,a=e.scrollTop;this.oldScrollTop=a||0},toTop:function(){var t=this;this.scrollTop=this.oldScrollTop,this.$nextTick((function(){t.scrollTop=0,t.oldScrollTop=0}))},onRefresh:function(){this.isLoading||(this.triggered=!0,this.initData())},onRestore:function(){this.triggered=!1},refresherabort:function(){this.triggered=!1}})};e.default=d}).call(this,a("ba7c")["default"])},"5fa6":function(t,e,a){"use strict";var i=a("f3c4"),n=a.n(i);n.a},"6b7c":function(t,e,a){var i=a("d3a5");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("967d").default;n("3ee4e43a",i,!0,{sourceMap:!1,shadowMode:!1})},"6c04":function(t,e,a){"use strict";var i=a("526b"),n=a.n(i);n.a},"6d2d":function(t,e,a){var i=a("c86c");e=i(!1),e.push([t.i,".scrollView[data-v-41f8ccf8]{width:100%;height:100%}.scrollView .listItem[data-v-41f8ccf8]{font-size:%?28?%;font-family:PingFangSC-Regular,PingFang SC;font-weight:400;color:grey;line-height:%?40?%;padding:%?40?%}.scrollView .listItem + .listItem[data-v-41f8ccf8]{border-top:%?1?% solid #eee}.scrollView .listItem .listItem_text[data-v-41f8ccf8]{overflow:hidden;text-overflow:ellipsis;word-break:break-all;font-size:%?32?%;font-weight:500;color:#333;line-height:%?45?%}.scrollView .listItem .listItem_text uni-text[data-v-41f8ccf8]{font-size:%?22?%;color:#fff;line-height:%?30?%;padding:0 %?5?%;margin-left:%?15?%;border-radius:%?4?%;vertical-align:middle}.scrollView .listItem .listItem_text uni-text.auditStatus[data-v-41f8ccf8]{background:#5ccc8b}.scrollView .listItem .listItem_text uni-text.wmsStatus[data-v-41f8ccf8]{background:#f97067}.scrollView .listItem .listItem_text uni-text.payStatus[data-v-41f8ccf8]{background:#3da9fa}.scrollView .listItem .listItem_subtext[data-v-41f8ccf8]{display:flex;margin-top:%?20?%}.scrollView .listItem .listItem_subtext .listItem_subtext-content[data-v-41f8ccf8]{flex:1;word-break:break-all;text-align:left}.scrollView .listItem .listItem_subtext .listItem_subtext-amt[data-v-41f8ccf8]{font-size:%?32?%;font-weight:500;color:red;line-height:%?45?%;margin-left:%?10?%}.scrollView .listItem .listItem_subtext .listItem_subtext-amt uni-text[data-v-41f8ccf8]{font-size:%?24?%;line-height:%?33?%;font-weight:400;margin-right:%?10?%}.scrollView .listItem .listItem_subtext.alginCenter[data-v-41f8ccf8]{align-items:center}.scrollView .listItem .listItem_btngroud[data-v-41f8ccf8]{margin-top:%?30?%;display:flex;flex-wrap:wrap;justify-content:flex-end;color:#666}.scrollView .listItem .listItem_btngroud .listItem_btngroud-btn[data-v-41f8ccf8]{padding:%?12?% %?45?%;border-radius:%?32?%;border:%?1?% solid #ccc}.scrollView .listItem .listItem_btngroud .listItem_btngroud-btn + .listItem_btngroud-btn[data-v-41f8ccf8]{margin-left:%?20?%}.scrollView .nodata[data-v-41f8ccf8]{text-align:center}.scrollView .nodata uni-image[data-v-41f8ccf8]{width:100%;height:100%}.scrollView .scrollImg[data-v-41f8ccf8]{position:fixed;left:%?-80?%;bottom:%?201?%;z-index:99;background:#fff;box-shadow:%?2?% %?2?% %?13?% %?0?% hsla(0,0%,40%,.2);width:%?80?%;height:%?80?%;border-radius:50%;display:flex;align-items:center;justify-content:center;opacity:0;transition:all .5s}.scrollView .scrollImg uni-image[data-v-41f8ccf8]{width:%?31?%;height:%?40?%}.scrollView .scrollImg.show[data-v-41f8ccf8]{left:%?35?%;opacity:1}",""]),t.exports=e},"7bd6":function(t,e,a){"use strict";a.d(e,"b",(function(){return i})),a.d(e,"c",(function(){return n})),a.d(e,"a",(function(){}));var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-scroll-view",{staticClass:"scrollView",attrs:{"scroll-y":"true","scroll-top":t.scrollTop,"refresher-enabled":"true","refresher-triggered":t.triggered,"refresher-threshold":100},on:{scrolltolower:function(e){arguments[0]=e=t.$handleEvent(e),t.loadMore.apply(void 0,arguments)},scroll:function(e){arguments[0]=e=t.$handleEvent(e),t.watchScroll.apply(void 0,arguments)},refresherrefresh:function(e){arguments[0]=e=t.$handleEvent(e),t.onRefresh.apply(void 0,arguments)},refresherrestore:function(e){arguments[0]=e=t.$handleEvent(e),t.onRestore.apply(void 0,arguments)},refresherabort:function(e){arguments[0]=e=t.$handleEvent(e),t.refresherabort.apply(void 0,arguments)}}},[t._l(t.list,(function(e){return[1==e.deflag?a("v-uni-view",{key:e.id+"_0",staticClass:"listItem",on:{click:function(a){a.stopPropagation(),arguments[0]=a=t.$handleEvent(a),t.toDetail(e)}}},[a("v-uni-view",{staticClass:"listItem_text"},[t._v(" 单号："+t._s(e.purchaseNo||"")),a("v-uni-text",{staticClass:"auditStatus"},[t._v(t._s(t.checkStatusName[e.checkStatus]||"未审核"))]),a("v-uni-text",{staticClass:"payStatus"},[t._v(t._s(t.payStatusName[e.payFlag]||"未结款"))])],1),a("v-uni-view",{staticClass:"listItem_subtext"},[a("v-uni-view",[t._v("开单日期：")]),a("v-uni-view",{staticClass:"listItem_subtext-content"},[t._v(t._s(t._f("formatDate")(e.fillDate)))])],1),a("v-uni-view",{staticClass:"listItem_subtext alginCenter"},[a("v-uni-view",[t._v("仓库名称：")]),a("v-uni-view",{staticClass:"listItem_subtext-content"},[t._v(t._s(e.storehouseName||""))]),a("v-uni-view",{staticClass:"listItem_subtext-amt"},[a("v-uni-text",[t._v("¥")]),t._v(t._s(e.totalAmount||0)+" ")],1)],1),a("v-uni-view",{staticClass:"listItem_subtext"},[a("v-uni-view",[t._v("供应商名称：")]),a("v-uni-view",{staticClass:"listItem_subtext-content"},[t._v(t._s(e.supplierName||""))])],1),a("v-uni-view",{staticClass:"listItem_subtext"},[a("v-uni-view",[t._v("单据打印次数：")]),a("v-uni-view",{staticClass:"listItem_subtext-content"},[t._v(t._s(e.printCount||0))])],1),a("v-uni-view",{staticClass:"listItem_btngroud",on:{click:function(a){a.stopPropagation(),arguments[0]=a=t.$handleEvent(a),t.tapBtn(a,e)}}},[t.isCanAdd&&2!=e.checkStatus?a("v-uni-view",{staticClass:"listItem_btngroud-btn",attrs:{"data-method":"toOpenNewNote"}},[t._v("编辑")]):t._e(),t.isCanCheck&&2!=e.checkStatus?a("v-uni-view",{staticClass:"listItem_btngroud-btn",attrs:{"data-method":"checkOrder"}},[t._v("审核")]):t._e()],1)],1):t._e()]})),t.isShowNoData&&!t.isLoading?[a("v-uni-view",{staticClass:"nodata"},[a("v-uni-image",{attrs:{src:"/static/img/nodata.png"}}),a("v-uni-view",[t._v("暂无数据")])],1)]:t._e(),a("v-uni-view",{staticClass:"scrollImg",class:{show:t.oldScrollTop>1e3},on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.toTop.apply(void 0,arguments)}}},[a("v-uni-image",{attrs:{src:"/static/img/scrollTop.png"}})],1)],2)},n=[]},"7d89":function(t,e,a){"use strict";a.r(e);var i=a("7bd6"),n=a("ceac");for(var s in n)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(s);a("0b10");var r=a("828b"),o=Object(r["a"])(n["default"],i["b"],i["c"],!1,null,"69ed812e",null,!1,i["a"],void 0);e["default"]=o.exports},"7e35":function(t,e,a){"use strict";a.r(e);var i=a("d4a4"),n=a.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(s);e["default"]=n.a},"7fe3":function(t,e,a){"use strict";var i=a("c8fe"),n=a.n(i);n.a},"85bc":function(t,e,a){"use strict";a.r(e);var i=a("cace"),n=a("a559");for(var s in n)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(s);a("97a4");var r=a("828b"),o=Object(r["a"])(n["default"],i["b"],i["c"],!1,null,"41f8ccf8",null,!1,i["a"],void 0);e["default"]=o.exports},8758:function(t,e,a){"use strict";var i=a("fd31"),n=a.n(i);n.a},"97a4":function(t,e,a){"use strict";var i=a("a6f0"),n=a.n(i);n.a},a2cf:function(t,e,a){"use strict";a.r(e);var i=a("5345"),n=a("b0da");for(var s in n)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(s);a("6c04");var r=a("828b"),o=Object(r["a"])(n["default"],i["b"],i["c"],!1,null,"f7a65a76",null,!1,i["a"],void 0);e["default"]=o.exports},a559:function(t,e,a){"use strict";a.r(e);var i=a("c740"),n=a.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(s);e["default"]=n.a},a6f0:function(t,e,a){var i=a("6d2d");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("967d").default;n("6277c6ec",i,!0,{sourceMap:!1,shadowMode:!1})},b0da:function(t,e,a){"use strict";a.r(e);var i=a("dec1"),n=a.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(s);e["default"]=n.a},b397:function(t,e,a){"use strict";a.r(e);var i=a("59ba"),n=a.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(s);e["default"]=n.a},b4e5:function(t,e,a){var i=a("0ce5");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("967d").default;n("1c255422",i,!0,{sourceMap:!1,shadowMode:!1})},b601:function(t,e,a){"use strict";(function(t){a("6a54");var i=a("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("c223"),a("fd3c");var n=i(a("2634")),s=i(a("2fdc")),r=i(a("9b1b")),o=a("f55d"),l=i(a("63d3")),c=a("9cee"),u=a("8f59"),d={name:"costAdjustList",data:function(){return{list:[],hasNextPage:!0,pageNum:1,pageSize:20,isLoading:!0,scrollTop:0,triggered:!1,checkStatusName:c.checkStatusName,oldScrollTop:0}},computed:(0,r.default)((0,r.default)({isShowNoData:function(){return this.list.length<=0}},(0,u.mapState)({customParams:function(t){return t.custom.customParams}})),{},{isCanCheck:function(){return this.$store.getters.getMenubtnsByUrl({parentUrl:"main/stock/costAdjustNote/2",authority:"chk"})},isCanAdd:function(){return this.$store.getters.getMenubtnsByUrl({parentUrl:"main/stock/costAdjustNote/1",authority:"add"})},isCanEdit:function(){return this.$store.getters.getMenubtnsByUrl({parentUrl:"main/stock/costAdjustNote/1",authority:"edit"})}}),filters:{formatDate:function(t){return t?l.default.timeTransfer(t):""}},created:function(){this.getData()},methods:(0,r.default)((0,r.default)({},(0,u.mapMutations)(["setparams"])),{},{getData:function(){var t=this;return(0,s.default)((0,n.default)().mark((function e(){var a,i,s,l,c;return(0,n.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=(0,r.default)({pageNum:t.pageNum,pageSize:t.pageSize},t.customParams),t.setLoadingStatus(!0),e.prev=2,e.next=5,t.get("api/costadjust/main/page",a,1);case 5:return i=e.sent,e.next=8,(0,o.wait)(300);case 8:t.setLoadingStatus(!1),i.meta.success?(s=i.data,l=s.hasNextPage,c=s.list,t.hasNextPage=l,t.list=(1==t.pageNum?[]:t.list).concat(Array.prototype.map.call(c||[],(function(t){return(0,r.default)((0,r.default)({},t),{},{deflag:1})})))):uni.showToast({title:i.meta.message,icon:"none",duration:2e3}),e.next=15;break;case 12:e.prev=12,e.t0=e["catch"](2),t.setLoadingStatus(!1);case 15:case"end":return e.stop()}}),e,null,[[2,12]])})))()},setLoadingStatus:function(t){t?uni.showLoading({title:"加载中"}):(this.triggered&&(this.triggered=!1),uni.hideLoading()),this.isLoading=t},loadMore:function(){this.hasNextPage&&!this.isLoading&&(this.pageNum+=1,this.getData())},initData:function(){this.pageNum=1,this.hasNextPage=!0,this.getData()},findCheckDetail:function(e){var a=this;return(0,s.default)((0,n.default)().mark((function i(){var s,r;return(0,n.default)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,(0,o.showModal)({content:"是否审核该单据"});case 3:if(s=i.sent,s){i.next=6;break}return i.abrupt("return");case 6:return uni.showLoading({title:"正在审核...",mask:!0}),i.next=9,a.get("/api/costadjust/main/checkApp/"+e.id,{checkType:0},1);case 9:return r=i.sent,i.next=12,(0,o.wait)(300);case 12:uni.hideLoading(),r.meta.success?(r.data.list,uni.showToast({icon:"none",title:"审核成功!",duration:2e3}),e.checkStatus=2):uni.showToast({title:r.meta.message,icon:"none",duration:2e3}),i.next=19;break;case 16:i.prev=16,i.t0=i["catch"](0),t.error(i.t0);case 19:case"end":return i.stop()}}),i,null,[[0,16]])})))()},checkOrder:function(e){var a=this;return(0,s.default)((0,n.default)().mark((function i(){var s;return(0,n.default)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.prev=0,uni.showLoading({title:"正在审核中",mask:!0}),i.next=4,a.post("/api/im/check/".concat(e),{},1);case 4:return s=i.sent,i.next=7,(0,o.wait)(300);case 7:if(uni.hideLoading(),!s.meta.success){i.next=13;break}return uni.showToast({title:"审核成功",icon:"none",duration:2e3}),i.abrupt("return",!0);case 13:uni.showToast({title:s.meta.message,icon:"none",duration:2e3});case 14:i.next=19;break;case 16:i.prev=16,i.t0=i["catch"](0),t.error(i.t0);case 19:case"end":return i.stop()}}),i,null,[[0,16]])})))()},toOpenNewNote:function(t){uni.setStorageSync("againInventor",(0,r.default)({},t)),uni.navigateTo({url:"/pages/index/countNoteNew/countNoteNew?againtype=1"})},tapBtn:function(t,e){var a=t.target,i=e.id;if(i){var n=a.dataset.method;n&&this[n](e)}},toDetail:function(e){if(t.log(e),e.id&&this.isCanEdit){var a=this;uni.navigateTo({url:"/pages/documentHistorys/children/costAdjustListDetail?id=".concat(e.id),events:{changStatus:function(t){var i=t.checkStatus,n=t.deflag;Object.assign(e,{checkStatus:i||0,deflag:n||0!==n?1:0}),a.$forceUpdate()}}})}},watchScroll:function(t){var e=t.detail,a=e.scrollTop;this.oldScrollTop=a||0},toTop:function(){var t=this;this.scrollTop=this.oldScrollTop,this.$nextTick((function(){t.scrollTop=0,t.oldScrollTop=0}))},onRefresh:function(){this.isLoading||(this.triggered=!0,this.initData())},onRestore:function(){this.triggered=!1},refresherabort:function(){this.triggered=!1}})};e.default=d}).call(this,a("ba7c")["default"])},b6ed:function(t,e,a){"use strict";a.r(e);var i=a("0c1d"),n=a.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(s);e["default"]=n.a},bd8d0:function(t,e,a){var i=a("1a29");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("967d").default;n("c6a100a2",i,!0,{sourceMap:!1,shadowMode:!1})},c450:function(t,e,a){"use strict";a.r(e);var i=a("392a"),n=a.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(s);e["default"]=n.a},c491:function(t,e,a){"use strict";a.d(e,"b",(function(){return i})),a.d(e,"c",(function(){return n})),a.d(e,"a",(function(){}));var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{staticClass:"page"},[a("customHeader",{attrs:{title:"单据历史",isNotShowBack:!0}},[t.isShowPage?a("v-uni-view",{staticClass:"screen",on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.toScreenPage.apply(void 0,arguments)}}},[a("v-uni-image",{attrs:{src:"/static/img/outNote/shop-shaixuan.png"}})],1):t._e()],1),a("v-uni-scroll-view",{staticClass:"tabBox",attrs:{"scroll-x":"true","scroll-left":t.scrollLeft},on:{scroll:function(e){arguments[0]=e=t.$handleEvent(e),t.scroll.apply(void 0,arguments)}}},[t._l(t.tabData,(function(e,i){var n=e.type,s=e.name,r=e.isShow;return[r?a("v-uni-view",{key:i+"_0",staticClass:"tabItem",class:{active:n==t.currentTab.type},attrs:{"data-index":i},on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.changeTab(i)}}},[t._v(t._s(s))]):t._e()]}))],2),t.isShowPage?a("v-uni-view",{staticClass:"content"},[t._l(t.tabData,(function(e,i){var n=e.type,s=e.component,r=e.isShow;return[t.cacheType.includes(n)&&r?a(s,{directives:[{name:"show",rawName:"v-show",value:t.currentTab.type==n,expression:"currentTab.type == type"}],key:i+"_0",ref:s,refInFor:!0,tag:"component"}):t._e()]}))],2):t._e(),t.isShowPage?t._e():[a("v-uni-view",{staticClass:"cnodata"},[a("v-uni-image",{attrs:{src:"/static/img/nodata.png"}}),a("v-uni-view",[t._v("你当前没有权限, 请先返回首页重新获取权限")])],1)]],2)},n=[]},c740:function(t,e,a){"use strict";(function(t){a("6a54");var i=a("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("c223"),a("fd3c");var n=i(a("2634")),s=i(a("2fdc")),r=i(a("9b1b")),o=a("f55d"),l=i(a("63d3")),c=a("9cee"),u=a("8f59"),d=i(a("f80c")),f={name:"saleQuoteNote",data:function(){return{list:[],hasNextPage:!0,pageNum:1,pageSize:20,isLoading:!0,endStatusName:c.endStatusName,scrollTop:0,triggered:!1,checkStatusName:c.checkStatusName,oldScrollTop:0}},computed:(0,r.default)((0,r.default)({isShowNoData:function(){return this.list.length<=0}},(0,u.mapState)({customParams:function(t){return t.custom.customParams}})),{},{isCanCheck:function(){return this.$store.getters.getMenubtnsByUrl({parentUrl:"main/sale/quoteNote/2",authority:"chk"})},isCanAdd:function(){return this.$store.getters.getMenubtnsByUrl({parentUrl:"main/sale/quoteNote/1",authority:"add"})},isCanEdit:function(){return this.$store.getters.getMenubtnsByUrl({parentUrl:"main/sale/quoteNote/1",authority:"edit"})}}),filters:{formatDate:function(t){return t?l.default.timeTransfer(t):""}},created:function(){this.getData()},methods:(0,r.default)((0,r.default)({},(0,u.mapMutations)(["setparams"])),{},{getData:function(){var t=this;return(0,s.default)((0,n.default)().mark((function e(){var a,i,s,l,c;return(0,n.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=(0,r.default)({pageNum:t.pageNum,pageSize:t.pageSize},t.customParams),t.setLoadingStatus(!0),e.prev=2,e.next=5,t.get("api/sale/main/201/page",a,1);case 5:return i=e.sent,e.next=8,(0,o.wait)(300);case 8:if(t.setLoadingStatus(!1),!i.meta.success){e.next=19;break}if(s=i.data.page,s){e.next=14;break}return t.hasNextPage=!1,e.abrupt("return");case 14:l=s.hasNextPage,c=s.list,t.hasNextPage=l,t.list=(1==t.pageNum?[]:t.list).concat(Array.prototype.map.call(c||[],(function(t){return(0,r.default)((0,r.default)({},t),{},{deflag:1})}))),e.next=20;break;case 19:uni.showToast({title:i.meta.message,icon:"none",duration:2e3});case 20:e.next=25;break;case 22:e.prev=22,e.t0=e["catch"](2),t.setLoadingStatus(!1);case 25:case"end":return e.stop()}}),e,null,[[2,22]])})))()},setLoadingStatus:function(t){t?uni.showLoading({title:"加载中"}):(this.triggered&&(this.triggered=!1),uni.hideLoading()),this.isLoading=t},loadMore:function(){this.hasNextPage&&!this.isLoading&&(this.pageNum+=1,this.getData())},initData:function(){this.pageNum=1,this.hasNextPage=!0,this.getData()},checkOrder:function(e){var a=this;return(0,s.default)((0,n.default)().mark((function i(){var s,r;return(0,n.default)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,(0,o.showModal)({content:"是否审核该单据"});case 3:if(s=i.sent,s){i.next=6;break}return i.abrupt("return");case 6:return uni.showLoading({title:"正在审核中",mask:!0}),i.next=9,a.get("sale/main/check?id=".concat(e.id),{},3);case 9:return r=i.sent,i.next=12,(0,o.wait)(300);case 12:uni.hideLoading(),r.meta.success?(uni.showToast({title:"审核成功",icon:"none",duration:2e3}),e.checkStatus=2,e.checkStatusName="已审核"):uni.showToast({title:r.meta.message,icon:"none",duration:2e3}),i.next=19;break;case 16:i.prev=16,i.t0=i["catch"](0),t.error(i.t0);case 19:case"end":return i.stop()}}),i,null,[[0,16]])})))()},toOpenNewNote:function(e){t.log(e);var a=uni.getStorageSync("employeeId"),i=uni.getStorageSync("privilegeMap");if(a==e.creator||1!=i.banMoOtherDocStatus)if(1==i.banChangeSaleStatus&&e.printCount>0)uni.showToast({title:"禁止修改打印过的单据",icon:"none",duration:2e3});else{var n={customerId:e.customerId,customerName:e.customerName||"",warehouse:e.storehouseName||"",storehouseId:e.storehouseId};uni.setStorageSync("salequotationNoteTemp",n),uni.setStorageSync("againQuotationId",e.id),uni.navigateTo({url:"/pages/index/salesQuotation/salesQuotation"})}else uni.showToast({title:"不能修改他人单据",icon:"none",duration:2e3})},tapBtn:function(t,e){var a=t.target,i=e.id;if(i){var n=a.dataset.method;n&&this[n](e)}},tapPrint:function(t){var e=t.id;d.default.getPrintData(e)},toDetail:function(e){if(e.id&&this.isCanEdit){var a=this;uni.navigateTo({url:"/pages/documentHistorys/children/saleQuoteNoteDetail?id=".concat(e.id,"&hasPriceAuth=").concat(e.hasPriceAuth),events:{changStatus:function(i){var n=i.checkStatus,s=i.deflag,r=i.endState;t.log(s),Object.assign(e,{checkStatus:n||0,deflag:s||0!==s?1:0,endState:r||0!==r?r:0}),a.$forceUpdate()}}})}},watchScroll:function(t){var e=t.detail,a=e.scrollTop;this.oldScrollTop=a||0},toTop:function(){var t=this;this.scrollTop=this.oldScrollTop,this.$nextTick((function(){t.scrollTop=0,t.oldScrollTop=0}))},onRefresh:function(){this.isLoading||(this.triggered=!0,this.initData())},onRestore:function(){this.triggered=!1},refresherabort:function(){this.triggered=!1}})};e.default=f}).call(this,a("ba7c")["default"])},c8fe:function(t,e,a){var i=a("4189");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("967d").default;n("108e1c09",i,!0,{sourceMap:!1,shadowMode:!1})},c9df:function(t,e,a){var i=a("2dc5");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("967d").default;n("0cfe03c6",i,!0,{sourceMap:!1,shadowMode:!1})},cace:function(t,e,a){"use strict";a.d(e,"b",(function(){return i})),a.d(e,"c",(function(){return n})),a.d(e,"a",(function(){}));var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-scroll-view",{staticClass:"scrollView",attrs:{"scroll-y":"true","scroll-top":t.scrollTop,"refresher-enabled":"true","refresher-triggered":t.triggered,"refresher-threshold":100},on:{scrolltolower:function(e){arguments[0]=e=t.$handleEvent(e),t.loadMore.apply(void 0,arguments)},scroll:function(e){arguments[0]=e=t.$handleEvent(e),t.watchScroll.apply(void 0,arguments)},refresherrefresh:function(e){arguments[0]=e=t.$handleEvent(e),t.onRefresh.apply(void 0,arguments)},refresherrestore:function(e){arguments[0]=e=t.$handleEvent(e),t.onRestore.apply(void 0,arguments)},refresherabort:function(e){arguments[0]=e=t.$handleEvent(e),t.refresherabort.apply(void 0,arguments)}}},[t._l(t.list,(function(e){return[1==e.deflag?a("v-uni-view",{key:e.id+"_0",staticClass:"listItem",on:{click:function(a){a.stopPropagation(),arguments[0]=a=t.$handleEvent(a),t.toDetail(e)}}},[a("v-uni-view",{staticClass:"listItem_text"},[t._v(" 单号："+t._s(e.saleNo||"")),a("v-uni-text",{staticClass:"auditStatus"},[t._v(t._s(t.checkStatusName[e.checkStatus||0]))]),a("v-uni-text",{staticClass:"payStatus"},[t._v(t._s(t.endStatusName[e.endState]||"未转单"))])],1),a("v-uni-view",{staticClass:"listItem_subtext"},[a("v-uni-view",[t._v("客户名称：")]),a("v-uni-view",{staticClass:"listItem_subtext-content"},[t._v(t._s(e.customerName||""))])],1),a("v-uni-view",{staticClass:"listItem_subtext alginCenter"},[a("v-uni-view",[t._v("开单日期：")]),a("v-uni-view",{staticClass:"listItem_subtext-content"},[t._v(t._s(t._f("formatDate")(e.fillDate)))]),a("v-uni-view",{staticClass:"listItem_subtext-amt"},[a("v-uni-text",[t._v("¥")]),t._v(t._s(e.hasPriceAuth||void 0===e.hasPriceAuth?e.totalAmount||0:"****")+" ")],1)],1),a("v-uni-view",{staticClass:"listItem_subtext"},[a("v-uni-view",[t._v("单据打印次数：")]),a("v-uni-view",{staticClass:"listItem_subtext-content"},[t._v(t._s(e.printCount||0))])],1),a("v-uni-view",{staticClass:"listItem_btngroud",on:{click:function(a){a.stopPropagation(),arguments[0]=a=t.$handleEvent(a),t.tapBtn(a,e)}}},[t.isCanAdd&&2!=e.checkStatus?a("v-uni-view",{staticClass:"listItem_btngroud-btn",attrs:{"data-method":"toOpenNewNote"}},[t._v("编辑")]):t._e(),t.isCanCheck&&2!=e.checkStatus?a("v-uni-view",{staticClass:"listItem_btngroud-btn",attrs:{"data-method":"checkOrder"}},[t._v("审核")]):t._e()],1)],1):t._e()]})),t.isShowNoData&&!t.isLoading?[a("v-uni-view",{staticClass:"nodata"},[a("v-uni-image",{attrs:{src:"/static/img/nodata.png"}}),a("v-uni-view",[t._v("暂无数据")])],1)]:t._e(),a("v-uni-view",{staticClass:"scrollImg",class:{show:t.oldScrollTop>1e3},on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.toTop.apply(void 0,arguments)}}},[a("v-uni-image",{attrs:{src:"/static/img/scrollTop.png"}})],1)],2)},n=[]},ceac:function(t,e,a){"use strict";a.r(e);var i=a("f46b"),n=a.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(s);e["default"]=n.a},d3a5:function(t,e,a){var i=a("c86c");e=i(!1),e.push([t.i,".scrollView[data-v-85b0d128]{width:100%;height:100%}.scrollView .listItem[data-v-85b0d128]{font-size:%?28?%;font-family:PingFangSC-Regular,PingFang SC;font-weight:400;color:grey;line-height:%?40?%;padding:%?40?%}.scrollView .listItem + .listItem[data-v-85b0d128]{border-top:%?1?% solid #eee}.scrollView .listItem .listItem_text[data-v-85b0d128]{overflow:hidden;text-overflow:ellipsis;word-break:break-all;font-size:%?32?%;font-weight:500;color:#333;line-height:%?45?%}.scrollView .listItem .listItem_text uni-text[data-v-85b0d128]{font-size:%?22?%;color:#fff;line-height:%?30?%;padding:0 %?5?%;margin-left:%?15?%;border-radius:%?4?%;vertical-align:middle}.scrollView .listItem .listItem_text uni-text.auditStatus[data-v-85b0d128]{background:#5ccc8b}.scrollView .listItem .listItem_text uni-text.wmsStatus[data-v-85b0d128]{background:#f97067}.scrollView .listItem .listItem_text uni-text.payStatus[data-v-85b0d128]{background:#3da9fa}.scrollView .listItem .listItem_subtext[data-v-85b0d128]{display:flex;margin-top:%?20?%}.scrollView .listItem .listItem_subtext .listItem_subtext-content[data-v-85b0d128]{flex:1;word-break:break-all;text-align:left}.scrollView .listItem .listItem_subtext .listItem_subtext-amt[data-v-85b0d128]{font-size:%?32?%;font-weight:500;color:red;line-height:%?45?%;margin-left:%?10?%}.scrollView .listItem .listItem_subtext .listItem_subtext-amt uni-text[data-v-85b0d128]{font-size:%?24?%;line-height:%?33?%;font-weight:400;margin-right:%?10?%}.scrollView .listItem .listItem_subtext.alginCenter[data-v-85b0d128]{align-items:center}.scrollView .listItem .listItem_btngroud[data-v-85b0d128]{margin-top:%?30?%;display:flex;flex-wrap:wrap;justify-content:flex-end;color:#666}.scrollView .listItem .listItem_btngroud .listItem_btngroud-btn[data-v-85b0d128]{padding:%?12?% %?45?%;border-radius:%?32?%;border:%?1?% solid #ccc}.scrollView .listItem .listItem_btngroud .listItem_btngroud-btn + .listItem_btngroud-btn[data-v-85b0d128]{margin-left:%?20?%}.scrollView .nodata[data-v-85b0d128]{text-align:center}.scrollView .nodata uni-image[data-v-85b0d128]{width:100%;height:100%}.scrollView .scrollImg[data-v-85b0d128]{position:fixed;left:%?-80?%;bottom:%?201?%;z-index:99;background:#fff;box-shadow:%?2?% %?2?% %?13?% %?0?% hsla(0,0%,40%,.2);width:%?80?%;height:%?80?%;border-radius:50%;display:flex;align-items:center;justify-content:center;opacity:0;transition:all .5s}.scrollView .scrollImg uni-image[data-v-85b0d128]{width:%?31?%;height:%?40?%}.scrollView .scrollImg.show[data-v-85b0d128]{left:%?35?%;opacity:1}",""]),t.exports=e},d3e4:function(t,e,a){"use strict";(function(t){a("6a54");var i=a("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("c223"),a("fd3c");var n=i(a("2634")),s=i(a("2fdc")),r=i(a("9b1b")),o=a("f55d"),l=i(a("63d3")),c=a("9cee"),u=a("8f59"),d={name:"purchaseReturnNote",data:function(){return{list:[],hasNextPage:!0,pageNum:1,pageSize:20,isLoading:!0,payStatusName:c.payStatusName,scrollTop:0,triggered:!1,checkStatusName:c.checkStatusName,oldScrollTop:0}},computed:(0,r.default)((0,r.default)({isShowNoData:function(){return this.list.length<=0}},(0,u.mapState)({customParams:function(t){return t.custom.customParams}})),{},{isCanCheck:function(){return this.$store.getters.getMenubtnsByUrl({parentUrl:"main/purchase/returnNote/2",authority:"chk"})},isCanAdd:function(){return this.$store.getters.getMenubtnsByUrl({parentUrl:"main/purchase/returnNote/1",authority:"add"})},isCanEdit:function(){return this.$store.getters.getMenubtnsByUrl({parentUrl:"main/purchase/returnNote/1",authority:"edit"})}}),filters:{formatDate:function(t){return t?l.default.timeTransfer(t):""}},created:function(){this.getData()},methods:(0,r.default)((0,r.default)({},(0,u.mapMutations)(["setparams"])),{},{getData:function(){var t=this;return(0,s.default)((0,n.default)().mark((function e(){var a,i,s,l,c;return(0,n.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=(0,r.default)({pageNum:t.pageNum,pageSize:t.pageSize},t.customParams),t.setLoadingStatus(!0),e.prev=2,e.next=5,t.get("api/purchase/main/103/statisticsPage",a,1);case 5:return i=e.sent,e.next=8,(0,o.wait)(300);case 8:if(t.setLoadingStatus(!1),!i.meta.success){e.next=19;break}if(s=i.data.pageInfo,s){e.next=14;break}return t.hasNextPage=!1,e.abrupt("return");case 14:l=s.hasNextPage,c=s.list,t.hasNextPage=l,t.list=(1==t.pageNum?[]:t.list).concat(Array.prototype.map.call(c||[],(function(t){return(0,r.default)((0,r.default)({},t),{},{deflag:1})}))),e.next=20;break;case 19:uni.showToast({title:i.meta.message,icon:"none",duration:2e3});case 20:e.next=25;break;case 22:e.prev=22,e.t0=e["catch"](2),t.setLoadingStatus(!1);case 25:case"end":return e.stop()}}),e,null,[[2,22]])})))()},setLoadingStatus:function(t){t?uni.showLoading({title:"加载中"}):(this.triggered&&(this.triggered=!1),uni.hideLoading()),this.isLoading=t},loadMore:function(){this.hasNextPage&&!this.isLoading&&(this.pageNum+=1,this.getData())},initData:function(){this.pageNum=1,this.hasNextPage=!0,this.getData()},checkOrder:function(e){var a=this;return(0,s.default)((0,n.default)().mark((function i(){var s,r;return(0,n.default)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,(0,o.showModal)({content:"是否审核该单据"});case 3:if(s=i.sent,s){i.next=6;break}return i.abrupt("return");case 6:return uni.showLoading({title:"正在审核中",mask:!0}),i.next=9,a.post("api/purchase/main/".concat(e.id,"/check"),{},1);case 9:return r=i.sent,i.next=12,(0,o.wait)(300);case 12:uni.hideLoading(),r.meta.success?(uni.showToast({title:"审核成功",icon:"none",duration:2e3}),e.checkStatus=2):uni.showToast({title:r.meta.message,icon:"none",duration:2e3}),i.next=19;break;case 16:i.prev=16,i.t0=i["catch"](0),t.error(i.t0);case 19:case"end":return i.stop()}}),i,null,[[0,16]])})))()},toOpenNewNote:function(t){var e=uni.getStorageSync("employeeId"),a=uni.getStorageSync("privilegeMap");e==t.creator||1!=a.banMoOtherDocStatus?1==a.banChangeSaleStatus&&t.printCount>0?uni.showToast({title:"禁止修改打印过的单据",icon:"none",duration:2e3}):(uni.setStorageSync("againPurchaseReturn",(0,r.default)({},t)),uni.navigateTo({url:"/pages/index/purchaseReturn/purchaseReturn?purchaseType=1"})):uni.showToast({title:"不能修改他人单据",icon:"none",duration:2e3})},tapBtn:function(t,e){var a=t.target,i=e.id;if(i){var n=a.dataset.method;n&&this[n](e)}},toDetail:function(e){if(e.id&&this.isCanEdit){var a=this;uni.navigateTo({url:"/pages/documentHistorys/children/purchaseReturnNoteDetail?id=".concat(e.id),events:{changStatus:function(i){t.log(i);var n=i.checkStatus,s=i.deflag;t.log(s),Object.assign(e,{checkStatus:n||0,deflag:s||0!==s?1:0}),a.$forceUpdate()}}})}},watchScroll:function(t){var e=t.detail,a=e.scrollTop;this.oldScrollTop=a||0},toTop:function(){var t=this;this.scrollTop=this.oldScrollTop,this.$nextTick((function(){t.scrollTop=0,t.oldScrollTop=0}))},onRefresh:function(){this.isLoading||(this.triggered=!0,this.initData())},onRestore:function(){this.triggered=!1},refresherabort:function(){this.triggered=!1}})};e.default=d}).call(this,a("ba7c")["default"])},d4a4:function(t,e,a){"use strict";(function(t){a("6a54");var i=a("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("4626"),a("5ac7"),a("aa9c"),a("aa77"),a("bf0f"),a("bd06");var n=i(a("2634")),s=i(a("2fdc")),r=i(a("9b1b")),o=i(a("f92a")),l=a("9cee"),c=a("8f59"),u=a("f55d"),d=i(a("7d89")),f=i(a("2c78")),h=i(a("2113")),g=i(a("a2cf")),v=i(a("85bc")),m=i(a("f806")),p=i(a("23b9")),b=i(a("f3751")),w=i(a("f3af")),x=i(a("d989")),_={components:{customHeader:o.default,purchaseInNote:d.default,purchaseOrderNote:f.default,purchaseReturnNote:h.default,saleOutNote:g.default,saleQuoteNote:v.default,saleRebundsNote:m.default,saleOrder:p.default,transferNote:b.default,countNote:w.default,costAdjustNote:x.default},data:function(){return{tabData:[],currentTab:{},isShowPage:!1,typeparams:"",cacheType:[],scrollLeft:0,oldScrollLeft:0}},onLoad:function(){this.tabData=(0,l.getAuthorityTabData)()},onShow:function(){this.initPageData(),this.isShowPage||(this.tabData=(0,l.getAuthorityTabData)(),this.initPageData())},computed:(0,r.default)({},(0,c.mapState)({customScreenList:function(t){return t.custom.customScreenList}})),methods:(0,r.default)((0,r.default)({},(0,c.mapActions)(["setCustomScreenList"])),{},{changeTab:function(t){if(t||0===t){var e=this.tabData[t].type;if(this.currentTab.type==e)return;this.currentTab=(0,r.default)({},this.tabData[t]),this.typeparams=this.currentTab.type,uni.setStorageSync("Type",this.typeparams),this.setCustomScreenList(this.currentTab.screenData||[]),!this.cacheType.includes(this.typeparams)&&this.cacheType.push(this.typeparams)}},toScreenPage:function(){var t=this;this.setCustomScreenList(this.currentTab.screenData||[]),uni.navigateTo({url:"../customReport/screenPage",events:{refreshList:function(){var e=t.tabData.find((function(e){var a=e.type;return t.currentTab.type==a}));t.currentTab.screenData=t.customScreenList,e.screenData=t.customScreenList,t.refreshList()}}})},initPageData:function(){var e=this;return(0,s.default)((0,n.default)().mark((function a(){var i,s;return(0,n.default)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!(e.tabData.length>0)){a.next=26;break}if(e.isShowPage=!0,i=uni.getStorageSync("Type"),s=uni.getStorageSync("refreshNoteList"),!e.typeparams||e.typeparams!=i){a.next=11;break}if(e.setScrollLeft(),!s){a.next=10;break}return a.next=9,(0,u.wait)(100);case 9:e.refreshList();case 10:return a.abrupt("return");case 11:if(e.currentTab=e.tabData.some((function(t){return t.type==i}))?(0,r.default)({},e.tabData.find((function(t){return t.type==i}))):(0,r.default)({},e.tabData[0]),e.typeparams=(i||e.currentTab.type)+"",e.setCustomScreenList(e.currentTab.screenData||[]),uni.setStorageSync("Type",e.typeparams),e.setScrollLeft(),!e.cacheType.includes(e.typeparams+"")){a.next=23;break}return t.log(e.cacheType),a.next=20,(0,u.wait)(100);case 20:e.refreshList(),a.next=24;break;case 23:e.cacheType.push(e.typeparams);case 24:a.next=27;break;case 26:e.isShowPage=!1;case 27:case"end":return a.stop()}}),a)})))()},setScrollLeft:function(){var t=this,e=this.tabData.findIndex((function(e){var a=e.type;return a==t.currentTab.type})),a=e>2?(e+1)/3*85*2:0;this.goLeft(a)},scroll:function(t){this.oldScrollLeft=t.detail.scrollLeft},goLeft:function(t){this.scrollLeft=this.oldScrollLeft,this.$nextTick((function(){this.scrollLeft=t}))},refreshList:function(){var t=this.$refs[this.currentTab.component][0];t&&(t.initData(),t.scrollTop=t.oldScrollTop,this.$nextTick((function(){t.scrollTop=0}))),uni.setStorageSync("refreshNoteList",!1)}}),onUnLoad:function(){this.setCustomScreenList([])}};e.default=_}).call(this,a("ba7c")["default"])},d6e9:function(t,e,a){"use strict";var i=a("6b7c"),n=a.n(i);n.a},d989:function(t,e,a){"use strict";a.r(e);var i=a("24db"),n=a("3082");for(var s in n)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(s);a("4580");var r=a("828b"),o=Object(r["a"])(n["default"],i["b"],i["c"],!1,null,"b0718784",null,!1,i["a"],void 0);e["default"]=o.exports},dec1:function(t,e,a){"use strict";(function(t){a("6a54");var i=a("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("aa77"),a("bf0f"),a("c223"),a("fd3c");var n=i(a("2634")),s=i(a("2fdc")),r=i(a("9b1b")),o=a("f55d"),l=i(a("63d3")),c=a("9cee"),u=a("8f59"),d=i(a("f80c")),f=i(a("f7b7")),h={name:"saleOutNote",data:function(){return{list:[],hasNextPage:!0,pageNum:1,pageSize:20,isLoading:!0,payStatusName:c.payStatusName,scrollTop:0,triggered:!1,sendBillStatusName:c.sendBillStatusName,checkStatusName:c.checkStatusName,oldScrollTop:0,intervalPrint:!1}},computed:(0,r.default)((0,r.default)({isShowNoData:function(){return this.list.length<=0}},(0,u.mapState)({customParams:function(t){return t.custom.customParams}})),{},{isCanCheck:function(){return this.$store.getters.getMenubtnsByUrl({parentUrl:"main/sale/outNote/2",authority:"chk"})},isCanAdd:function(){return this.$store.getters.getMenubtnsByUrl({parentUrl:"main/sale/outNote/1",authority:"add"})},isCanEdit:function(){return this.$store.getters.getMenubtnsByUrl({parentUrl:"main/sale/outNote/1",authority:"edit"})}}),filters:{formatDate:function(t){return t?l.default.timeTransfer(t):""}},created:function(){this.getData();var t=f.default.state.sysConfig,e=t[7].find((function(t){return"basic.app.intervalPrint"==t.key}));this.intervalPrint=!(!e||!e.check)},methods:(0,r.default)((0,r.default)({},(0,u.mapMutations)(["setparams"])),{},{getData:function(){var t=this;return(0,s.default)((0,n.default)().mark((function e(){var a,i,s,l,c;return(0,n.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=(0,r.default)({pageNum:t.pageNum,pageSize:t.pageSize},t.customParams),t.setLoadingStatus(!0),e.prev=2,e.next=5,t.get("api/sale/main/202/page",a,1);case 5:return i=e.sent,e.next=8,(0,o.wait)(300);case 8:if(t.setLoadingStatus(!1),!i.meta.success){e.next=19;break}if(s=i.data.page,s){e.next=14;break}return t.hasNextPage=!1,e.abrupt("return");case 14:l=s.hasNextPage,c=s.list,t.hasNextPage=l,t.list=(1==t.pageNum?[]:t.list).concat(Array.prototype.map.call(c||[],(function(t){return(0,r.default)((0,r.default)({},t),{},{deflag:1})}))),e.next=20;break;case 19:uni.showToast({title:i.meta.message,icon:"none",duration:2e3});case 20:e.next=25;break;case 22:e.prev=22,e.t0=e["catch"](2),t.setLoadingStatus(!1);case 25:case"end":return e.stop()}}),e,null,[[2,22]])})))()},setLoadingStatus:function(t){t?uni.showLoading({title:"加载中"}):(this.triggered&&(this.triggered=!1),uni.hideLoading()),this.isLoading=t},loadMore:function(){this.hasNextPage&&!this.isLoading&&(this.pageNum+=1,this.getData())},initData:function(){this.pageNum=1,this.hasNextPage=!0,this.getData()},checkOrder:function(e){var a=this;return(0,s.default)((0,n.default)().mark((function i(){var s,r;return(0,n.default)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,(0,o.showModal)({content:"是否审核该单据"});case 3:if(s=i.sent,s){i.next=6;break}return i.abrupt("return");case 6:return uni.showLoading({title:"正在审核中",mask:!0}),i.next=9,a.get("sale/main/check?id=".concat(e.id),{},3);case 9:return r=i.sent,i.next=12,(0,o.wait)(300);case 12:uni.hideLoading(),r.meta.success?(uni.showToast({title:"审核成功",icon:"none",duration:2e3}),e.checkStatus=2,e.checkStatusName="已审核"):uni.showToast({title:r.meta.message,icon:"none",duration:2e3}),i.next=19;break;case 16:i.prev=16,i.t0=i["catch"](0),t.error(i.t0);case 19:case"end":return i.stop()}}),i,null,[[0,16]])})))()},getOrderList:function(t){var e=this;return(0,s.default)((0,n.default)().mark((function a(){var i;return(0,n.default)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return i=e,a.abrupt("return",e.get("api/sale/detail/list?saleId="+t,null,1).then((function(t){t.meta.success&&(i.listDetails=t.data)})));case 2:case"end":return a.stop()}}),a)})))()},share:function(e){var a=this;return(0,s.default)((0,n.default)().mark((function i(){var s;return(0,n.default)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:return s=a,i.next=3,a.getOrderList(e);case 3:a.get("api/sale/main?saleId="+e,null,1).then((function(e){if(e.meta.success){s.listTotalAmount=e.data.stattistics.totalAmount,s.orderDetails=e.data;var a={totalAmount:e.data.saleMain.totalAmount,fillDate:e.data.saleMain.fillDate,checkStatus:e.data.saleMain.checkStatus,creator:e.data.saleMain.creator,createTime:e.data.saleMain.createTime,customerId:e.data.saleMain.customerId,printCount:e.data.saleMain.printCount,id:e.data.saleMain.id,customerName:e.data.saleMain.customerName,saleNo:e.data.saleMain.saleNo,zdy:uni.getStorageSync("Name"),remark:e.data.saleMain.remark};t.log("list",s.listDetails),t.log("amount",s.listTotalAmount),t.log("orderDetails",a),s.setparams({title:"销售出仓单",list:s.listDetails,amount:s.listTotalAmount,orderDetails:a,billType:202}),uni.navigateTo({url:"/pages/index/canvasShare/canvasShare?type=202"})}}));case 4:case"end":return i.stop()}}),i)})))()},toOpenNewNote:function(e){t.log(e);var a=uni.getStorageSync("employeeId"),i=uni.getStorageSync("privilegeMap");if(a==e.creator||1!=i.banMoOtherDocStatus)if(1==i.banChangeSaleStatus&&e.printCount>0)uni.showToast({title:"禁止修改打印过的单据",icon:"none",duration:2e3});else{var n={customerId:e.customerId,customerName:e.customerName||"",warehouse:e.storehouseName||"",storehouseId:e.storehouseId,customersiteName:e.customersiteName||"",customersiteId:e.customersiteId||""};uni.setStorageSync("saleBillId",e.id),uni.setStorageSync("outNoteTemp",n),uni.navigateTo({url:"/pages/index/sale/outNote/outNote"})}else uni.showToast({title:"不能修改他人单据",icon:"none",duration:2e3})},tapBtn:function(t,e){var a=t.target,i=e.id;if(i){var n=a.dataset.method;n&&this[n](e)}},tapPrint:function(e){var a=e.id;t.log(111111),this.intervalPrint?this.documentsPrintAdd(a):d.default.getPrintData(a)},documentsPrintAdd:function(t){this.post("api/timing/timingDocumentsPrint/documentsPrintAdd",{type:String(202),relationId:t},1).then((function(t){t.meta.success?uni.showToast({title:"单据已推送",duration:2e3,icon:"none",mask:!0}):uni.showToast({title:t.meta.message,duration:2e3,icon:"none",mask:!0})}))},toDetail:function(e){if(e.id&&this.isCanEdit){var a=this;uni.navigateTo({url:"/pages/documentHistorys/children/saleOutNoteDetail?id=".concat(e.id,"&hasPriceAuth=").concat(e.hasPriceAuth),events:{changStatus:function(i){var n=i.sendBill,s=i.checkStatus,r=i.payFlag,o=i.deflag;t.log(o),Object.assign(e,{sendBill:n||0,checkStatus:s||0,payFlag:r||0,deflag:o||0!==o?1:0}),a.$forceUpdate()}}})}},watchScroll:function(t){var e=t.detail,a=e.scrollTop;this.oldScrollTop=a||0},toTop:function(){var t=this;this.scrollTop=this.oldScrollTop,this.$nextTick((function(){t.scrollTop=0,t.oldScrollTop=0}))},onRefresh:function(){this.isLoading||(this.triggered=!0,this.initData())},onRestore:function(){this.triggered=!1},refresherabort:function(){this.triggered=!1}})};e.default=h}).call(this,a("ba7c")["default"])},e4a1:function(t,e,a){var i=a("c86c");e=i(!1),e.push([t.i,".scrollView[data-v-3a853e6a]{width:100%;height:100%}.scrollView .listItem[data-v-3a853e6a]{font-size:%?28?%;font-family:PingFangSC-Regular,PingFang SC;font-weight:400;color:grey;line-height:%?40?%;padding:%?40?%}.scrollView .listItem + .listItem[data-v-3a853e6a]{border-top:%?1?% solid #eee}.scrollView .listItem .listItem_text[data-v-3a853e6a]{overflow:hidden;text-overflow:ellipsis;word-break:break-all;font-size:%?32?%;font-weight:500;color:#333;line-height:%?45?%}.scrollView .listItem .listItem_text uni-text[data-v-3a853e6a]{font-size:%?22?%;color:#fff;line-height:%?30?%;padding:0 %?5?%;margin-left:%?15?%;border-radius:%?4?%;vertical-align:middle}.scrollView .listItem .listItem_text uni-text.auditStatus[data-v-3a853e6a]{background:#5ccc8b}.scrollView .listItem .listItem_text uni-text.wmsStatus[data-v-3a853e6a]{background:#f97067}.scrollView .listItem .listItem_text uni-text.payStatus[data-v-3a853e6a]{background:#3da9fa}.scrollView .listItem .listItem_subtext[data-v-3a853e6a]{display:flex;margin-top:%?20?%}.scrollView .listItem .listItem_subtext .listItem_subtext-content[data-v-3a853e6a]{flex:1;word-break:break-all;text-align:left}.scrollView .listItem .listItem_subtext .listItem_subtext-amt[data-v-3a853e6a]{font-size:%?32?%;font-weight:500;color:red;line-height:%?45?%;margin-left:%?10?%}.scrollView .listItem .listItem_subtext .listItem_subtext-amt uni-text[data-v-3a853e6a]{font-size:%?24?%;line-height:%?33?%;font-weight:400;margin-right:%?10?%}.scrollView .listItem .listItem_subtext.alginCenter[data-v-3a853e6a]{align-items:center}.scrollView .listItem .listItem_btngroud[data-v-3a853e6a]{margin-top:%?30?%;display:flex;flex-wrap:wrap;justify-content:flex-end;color:#666}.scrollView .listItem .listItem_btngroud .listItem_btngroud-btn[data-v-3a853e6a]{padding:%?12?% %?45?%;border-radius:%?32?%;border:%?1?% solid #ccc}.scrollView .listItem .listItem_btngroud .listItem_btngroud-btn + .listItem_btngroud-btn[data-v-3a853e6a]{margin-left:%?20?%}.scrollView .nodata[data-v-3a853e6a]{text-align:center}.scrollView .nodata uni-image[data-v-3a853e6a]{width:100%;height:100%}.scrollView .scrollImg[data-v-3a853e6a]{position:fixed;left:%?-80?%;bottom:%?201?%;z-index:99;background:#fff;box-shadow:%?2?% %?2?% %?13?% %?0?% hsla(0,0%,40%,.2);width:%?80?%;height:%?80?%;border-radius:50%;display:flex;align-items:center;justify-content:center;opacity:0;transition:all .5s}.scrollView .scrollImg uni-image[data-v-3a853e6a]{width:%?31?%;height:%?40?%}.scrollView .scrollImg.show[data-v-3a853e6a]{left:%?35?%;opacity:1}",""]),t.exports=e},edc9:function(t,e,a){"use strict";a.r(e);var i=a("d3e4"),n=a.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(s);e["default"]=n.a},f3751:function(t,e,a){"use strict";a.r(e);var i=a("4664"),n=a("1f21");for(var s in n)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(s);a("477d");var r=a("828b"),o=Object(r["a"])(n["default"],i["b"],i["c"],!1,null,"65bd0148",null,!1,i["a"],void 0);e["default"]=o.exports},f3af:function(t,e,a){"use strict";a.r(e);var i=a("4295"),n=a("b397");for(var s in n)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(s);a("7fe3");var r=a("828b"),o=Object(r["a"])(n["default"],i["b"],i["c"],!1,null,"f7cab232",null,!1,i["a"],void 0);e["default"]=o.exports},f3c4:function(t,e,a){var i=a("4e64");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("967d").default;n("5bad3f30",i,!0,{sourceMap:!1,shadowMode:!1})},f46b:function(t,e,a){"use strict";(function(t){a("6a54");var i=a("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("c223"),a("fd3c");var n=i(a("2634")),s=i(a("2fdc")),r=i(a("9b1b")),o=a("f55d"),l=i(a("63d3")),c=a("9cee"),u=a("8f59"),d={name:"purchaseInNote",data:function(){return{list:[],hasNextPage:!0,pageNum:1,pageSize:20,isLoading:!0,payStatusName:c.payStatusName,scrollTop:0,triggered:!1,checkStatusName:c.checkStatusName,oldScrollTop:0}},computed:(0,r.default)((0,r.default)({isShowNoData:function(){return this.list.length<=0}},(0,u.mapState)({customParams:function(t){return t.custom.customParams}})),{},{isCanCheck:function(){return this.$store.getters.getMenubtnsByUrl({parentUrl:"main/purchase/inNote/2",authority:"chk"})},isCanAdd:function(){return this.$store.getters.getMenubtnsByUrl({parentUrl:"main/purchase/inNote/1",authority:"add"})},isCanEdit:function(){return this.$store.getters.getMenubtnsByUrl({parentUrl:"main/purchase/inNote/1",authority:"edit"})}}),filters:{formatDate:function(t){return t?l.default.timeTransfer(t):""}},created:function(){this.getData()},methods:(0,r.default)((0,r.default)({},(0,u.mapMutations)(["setparams"])),{},{getData:function(){var t=this;return(0,s.default)((0,n.default)().mark((function e(){var a,i,s,l,c;return(0,n.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=(0,r.default)({pageNum:t.pageNum,pageSize:t.pageSize},t.customParams),t.setLoadingStatus(!0),e.prev=2,e.next=5,t.get("api/purchase/main/102/statisticsPage",a,1);case 5:return i=e.sent,e.next=8,(0,o.wait)(300);case 8:if(t.setLoadingStatus(!1),!i.meta.success){e.next=19;break}if(s=i.data.pageInfo,s){e.next=14;break}return t.hasNextPage=!1,e.abrupt("return");case 14:l=s.hasNextPage,c=s.list,t.hasNextPage=l,t.list=(1==t.pageNum?[]:t.list).concat(Array.prototype.map.call(c||[],(function(t){return(0,r.default)((0,r.default)({},t),{},{deflag:1})}))),e.next=20;break;case 19:uni.showToast({title:i.meta.message,icon:"none",duration:2e3});case 20:e.next=25;break;case 22:e.prev=22,e.t0=e["catch"](2),t.setLoadingStatus(!1);case 25:case"end":return e.stop()}}),e,null,[[2,22]])})))()},setLoadingStatus:function(t){t?uni.showLoading({title:"加载中"}):(this.triggered&&(this.triggered=!1),uni.hideLoading()),this.isLoading=t},loadMore:function(){this.hasNextPage&&!this.isLoading&&(this.pageNum+=1,this.getData())},initData:function(){this.pageNum=1,this.hasNextPage=!0,this.getData()},checkOrder:function(e){var a=this;return(0,s.default)((0,n.default)().mark((function i(){var s,r;return(0,n.default)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,(0,o.showModal)({content:"是否审核该单据"});case 3:if(s=i.sent,s){i.next=6;break}return i.abrupt("return");case 6:return uni.showLoading({title:"正在审核中",mask:!0}),i.next=9,a.post("api/purchase/main/".concat(e.id,"/check"),{},1);case 9:return r=i.sent,i.next=12,(0,o.wait)(300);case 12:uni.hideLoading(),r.meta.success?(uni.showToast({title:"审核成功",icon:"none",duration:2e3}),e.checkStatus=2):uni.showToast({title:r.meta.message,icon:"none",duration:2e3}),i.next=19;break;case 16:i.prev=16,i.t0=i["catch"](0),t.error(i.t0);case 19:case"end":return i.stop()}}),i,null,[[0,16]])})))()},toOpenNewNote:function(t){var e=uni.getStorageSync("employeeId"),a=uni.getStorageSync("privilegeMap");e==t.creator||1!=a.banMoOtherDocStatus?1==a.banChangeSaleStatus&&t.printCount>0?uni.showToast({title:"禁止修改打印过的单据",icon:"none",duration:2e3}):(uni.setStorageSync("againPurchaseInto",(0,r.default)({},t)),uni.navigateTo({url:"/pages/index/purchaseIntoNew/purchaseIntoNew?purchaseType=1"})):uni.showToast({title:"不能修改他人单据",icon:"none",duration:2e3})},tapBtn:function(t,e){var a=t.target,i=e.id;if(i){var n=a.dataset.method;n&&this[n](e)}},toDetail:function(t){if(t.id&&this.isCanEdit){var e=this;uni.navigateTo({url:"/pages/documentHistorys/children/purchaseInNoteDetail?id=".concat(t.id),events:{changStatus:function(a){var i=a.checkStatus,n=a.deflag;Object.assign(t,{checkStatus:i||0,deflag:n||0!==n?1:0}),e.$forceUpdate()}}})}},watchScroll:function(t){var e=t.detail,a=e.scrollTop;this.oldScrollTop=a||0},toTop:function(){var t=this;this.scrollTop=this.oldScrollTop,this.$nextTick((function(){t.scrollTop=0,t.oldScrollTop=0}))},onRefresh:function(){this.isLoading||(this.triggered=!0,this.initData())},onRestore:function(){this.triggered=!1},refresherabort:function(){this.triggered=!1}})};e.default=d}).call(this,a("ba7c")["default"])},f806:function(t,e,a){"use strict";a.r(e);var i=a("22dd"),n=a("b6ed");for(var s in n)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(s);a("5fa6");var r=a("828b"),o=Object(r["a"])(n["default"],i["b"],i["c"],!1,null,"d288295e",null,!1,i["a"],void 0);e["default"]=o.exports},f8b6:function(t,e,a){"use strict";a.r(e);var i=a("1837"),n=a.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(s);e["default"]=n.a},fd31:function(t,e,a){var i=a("e4a1");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("967d").default;n("133ec79a",i,!0,{sourceMap:!1,shadowMode:!1})}}]);