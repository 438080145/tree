(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-documentHistorys-children-saleOutNoteDetail"],{"16cf":function(t,e,n){var o=n("7204");o.__esModule&&(o=o.default),"string"===typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);var a=n("967d").default;a("4982a160",o,!0,{sourceMap:!1,shadowMode:!1})},"33b1":function(t,e,n){"use strict";n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return a})),n.d(e,"a",(function(){}));var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"page"},[n("customHeader",{attrs:{title:"销售出仓明细",isBackMethodForParent:!0},on:{back:function(e){arguments[0]=e=t.$handleEvent(e),t.goBack.apply(void 0,arguments)}}},[t.isShowPage?n("v-uni-view",{staticClass:"headerBtnGroup"},[t.isCanAdd&&2!=t.noteInfo.checkStatus?n("v-uni-image",{attrs:{src:"/static/img/outNote/edit.png"},on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.toOpenNewNote.apply(void 0,arguments)}}}):t._e(),n("v-uni-image",{attrs:{src:"/static/img/outNote/point.png"},on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.changShowMoreBtn.apply(void 0,arguments)}}}),n("v-uni-view",{staticClass:"moreBtnBox",class:{show:t.isShowMoreBtn}},[t.isCanCopy?n("v-uni-view",{staticClass:"moreBtnBox_item",on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.copyNote.apply(void 0,arguments)}}},[n("v-uni-image",{attrs:{src:"/static/img/noteDetail/copy.png"}}),n("v-uni-view",[t._v("复制")])],1):t._e(),t.isCanDelete&&2!=t.noteInfo.checkStatus?n("v-uni-view",{staticClass:"moreBtnBox_item",on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.deleteNote.apply(void 0,arguments)}}},[n("v-uni-image",{attrs:{src:"/static/img/noteDetail/delete.png"}}),n("v-uni-view",[t._v("作废")])],1):t._e(),2!=t.noteInfo.checkStatus?n("v-uni-view",{staticClass:"moreBtnBox_item",on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.tapPrint.apply(void 0,arguments)}}},[n("v-uni-image",{attrs:{src:"/static/img/noteDetail/print.png"}}),n("v-uni-view",[t._v("打印")])],1):t._e(),t.isCanGenerateOrderNote&&2!=t.noteInfo.checkStatus?n("v-uni-view",{staticClass:"moreBtnBox_item",on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.generateOrderNote.apply(void 0,arguments)}}},[n("v-uni-image",{attrs:{src:"/static/img/noteDetail/transefor.png"}}),n("v-uni-view",[t._v("转采购订货")])],1):t._e(),t.isCanBackChk&&2==t.noteInfo.checkStatus?n("v-uni-view",{staticClass:"moreBtnBox_item",on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.backCeck.apply(void 0,arguments)}}},[n("v-uni-image",{attrs:{src:"/static/img/noteDetail/audit.png"}}),n("v-uni-view",[t._v("反审")])],1):t._e()],1)],1):t._e()],1),t.isShowPage?n("v-uni-view",{staticClass:"content",on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.isShowMoreBtn=!1}}},[n("v-uni-view",{staticClass:"noteInfo"},[n("v-uni-view",{staticClass:"noteInfo_textBox"},[n("v-uni-view",{staticClass:"noteInfo_textBox-flex1"},[n("v-uni-text",{staticClass:"noteNo"},[t._v(t._s(t.noteInfo.saleNo||""))]),n("v-uni-text",{staticClass:"textbtn autidStatus"},[t._v(t._s(t.checkStatusName[t.noteInfo.checkStatus]||""))]),n("v-uni-text",{staticClass:"textbtn wmsStatus"},[t._v(t._s(t.sendBillStatusName[t.noteInfo.sendBill||0]||""))]),n("v-uni-text",{staticClass:"textbtn payStatus"},[t._v(t._s(t.payStatusName[t.noteInfo.payFlag||0]))])],1)],1),n("v-uni-view",{staticClass:"noteInfo_textBox"},[n("v-uni-view",[t._v("客户名称：")]),n("v-uni-view",{staticClass:"noteInfo_textBox-flex1"},[t._v(t._s(t.noteInfo.customerName||""))])],1),n("v-uni-view",{staticClass:"noteInfo_textBox"},[n("v-uni-view",[t._v("仓库：")]),n("v-uni-view",{staticClass:"noteInfo_textBox-flex1"},[t._v(t._s(t.noteInfo.storehouseName||""))])],1),n("v-uni-view",{staticClass:"noteInfo_textBox"},[n("v-uni-view",[t._v("开单日期：")]),n("v-uni-view",{staticClass:"noteInfo_textBox-flex1"},[t._v(t._s(t._f("formatDate")(t.noteInfo.fillDate)))])],1),n("v-uni-view",{staticClass:"noteInfo_textBox"},[n("v-uni-view",[t._v("经手人：")]),n("v-uni-view",{staticClass:"noteInfo_textBox-flex1"},[t._v(t._s(t.noteInfo.operatorName||""))])],1),n("v-uni-view",{staticClass:"noteInfo_textBox"},[n("v-uni-view",[t._v("业务员：")]),n("v-uni-view",{staticClass:"noteInfo_textBox-flex1"},[t._v(t._s(t.noteInfo.salesmanName||""))])],1),n("v-uni-view",{staticClass:"noteInfo_textBox"},[n("v-uni-view",[t._v("部门：")]),n("v-uni-view",{staticClass:"noteInfo_textBox-flex1"},[t._v(t._s(t.noteInfo.deptName||""))])],1),n("v-uni-view",{staticClass:"noteInfo_textBox"},[n("v-uni-view",[t._v("客户备注：")]),n("v-uni-view",{staticClass:"noteInfo_textBox-flex1"},[t._v(t._s(t.noteInfo.clientRemark||"无"))])],1),n("v-uni-view",{staticClass:"noteInfo_textBox"},[n("v-uni-view",[t._v("销售单备注：")]),n("v-uni-view",{staticClass:"noteInfo_textBox-flex1"},[t._v(t._s(t.noteInfo.remark||"无"))])],1)],1),t._l(t.goodsList,(function(e,o){return[n("v-uni-view",{key:o+"_0",staticClass:"goodsBox"},[n("v-uni-view",{staticClass:"goodsBox_header"},[e.picture?n("v-uni-image",{attrs:{src:e.picture}}):n("v-uni-image",{attrs:{src:"/static/img/outNote/photo.png"}}),n("v-uni-view",{staticClass:"goodBox_header-right"},[n("v-uni-view",{staticClass:"goodsbox_header-text title"},[t._v(t._s(e.goodsName||""))]),n("v-uni-view",{staticClass:"goodsbox_header-text"},[t._v("条码："+t._s(e.barCode||""))]),n("v-uni-view",{staticClass:"goodsbox_header-text"},[t._v("数量："+t._s(e.quantity||0)+" "),n("v-uni-text",{staticClass:"amt"},[t._v("金额：")]),n("v-uni-text",{staticClass:"red"},[t._v("¥"+t._s(t.hasPriceAuth?e.amount||0:"****"))])],1)],1)],1),t.useMultUnit?n("v-uni-view",{staticClass:"goodsBox_content"},[n("v-uni-view",{staticClass:"goodsBox_content-item"},[n("v-uni-view",[t._v("单价")]),n("v-uni-view",{staticClass:"bottom"},[t._v(t._s(t.hasPriceAuth?e.specUnitPrice||0:"****"))])],1),n("v-uni-view",{staticClass:"goodsBox_content-item"},[n("v-uni-view",[t._v("数量")]),n("v-uni-view",{staticClass:"bottom"},[t._v(t._s(e.specUnitQuantity||0))])],1),n("v-uni-view",{staticClass:"goodsBox_content-item"},[n("v-uni-view",[t._v("单位")]),n("v-uni-view",{staticClass:"bottom"},[t._v(t._s(t.hasPriceAuth?e.specUnit||0:"****"))])],1),n("v-uni-view",{staticClass:"goodsBox_content-item"},[n("v-uni-view",[t._v("折扣%")]),n("v-uni-view",{staticClass:"bottom"},[t._v(t._s(t.hasPriceAuth?e.discount||0:"****"))])],1)],1):n("v-uni-view",{staticClass:"goodsBox_content"},[n("v-uni-view",{staticClass:"goodsBox_content-item"},[n("v-uni-view",[t._v("件价")]),n("v-uni-view",{staticClass:"bottom"},[t._v(t._s(t.hasPriceAuth?e.getIP||0:"****"))])],1),n("v-uni-view",{staticClass:"goodsBox_content-item"},[n("v-uni-view",[t._v("件数")]),n("v-uni-view",{staticClass:"bottom"},[t._v(t._s(e.itemQuantity||0))])],1),n("v-uni-view",{staticClass:"goodsBox_content-item"},[n("v-uni-view",[t._v("散价")]),n("v-uni-view",{staticClass:"bottom"},[t._v(t._s(t.hasPriceAuth?e.getSP||0:"****"))])],1),n("v-uni-view",{staticClass:"goodsBox_content-item"},[n("v-uni-view",[t._v("散数")]),n("v-uni-view",{staticClass:"bottom"},[t._v(t._s(e.scatteredQuantity||0))])],1),n("v-uni-view",{staticClass:"goodsBox_content-item"},[n("v-uni-view",[t._v("折扣%")]),n("v-uni-view",{staticClass:"bottom"},[t._v(t._s(t.hasPriceAuth?e.discount||0:"****"))])],1)],1),n("v-uni-view",{staticClass:"goodsBox_fotter",class:{show:e.isShowMore}},[n("v-uni-view",{staticClass:"goodsBox_fotter-textBox"},[n("v-uni-view",[t._v("型号：")]),n("v-uni-view",{staticClass:"right"},[t._v(t._s(e.typeSpecification||""))])],1),n("v-uni-view",{staticClass:"goodsBox_fotter-textBox"},[n("v-uni-view",[t._v("备注：")]),n("v-uni-view",{staticClass:"right"},[t._v(t._s(e.remark||""))])],1)],1),n("v-uni-view",{staticClass:"exprand",on:{click:function(n){n.stopPropagation(),arguments[0]=n=t.$handleEvent(n),t.changItemShowMore(e)}}},[t._v(t._s(e.isShowMore?"点击收起":"展开更多")+" "),n("v-uni-image",{class:{show:e.isShowMore},attrs:{src:"/static/img/outNote/right.png"}})],1)],1)]})),n("v-uni-view",{staticClass:"amtBox"},[n("v-uni-view",{staticClass:"amtBox_text"},[n("v-uni-view",[t._v("总数量：")]),n("v-uni-view",{staticClass:"right"},[t._v(t._s(t.totalInfo.totalQuantity||0))])],1),n("v-uni-view",{staticClass:"amtBox_text"},[n("v-uni-view",[t._v("总金额：")]),n("v-uni-view",{staticClass:"right"},[t._v("¥"+t._s(t.hasPriceAuth?t.totalInfo.totalAmount||0:"****"))])],1),n("v-uni-view",{staticClass:"amtBox_text"},[n("v-uni-view",[t._v("整单优惠：")]),n("v-uni-view",{staticClass:"right"},[t._v("¥"+t._s(t.hasPriceAuth?t.totalInfo.discountAmount||0:"****"))])],1),n("v-uni-view",{staticClass:"amtBox_text"},[n("v-uni-view",[t._v("应收金额：")]),n("v-uni-view",{staticClass:"right"},[t._v("¥"+t._s(t.hasPriceAuth?t.totalInfo.totalAmount||0:"****"))])],1)],1)],2):t._e(),t.isShowPage?n("v-uni-view",{staticClass:"fotter"},[n("v-uni-view",{staticClass:"fotter_content"},[n("v-uni-view",{staticClass:"amt"},[t._v("应收金额 "),n("v-uni-text",[t._v("¥"+t._s(t.hasPriceAuth?t.totalInfo.totalAmount||0:"****"))])],1),n("v-uni-view",{staticClass:"number"},[t._v("总数量 "),n("v-uni-text",[t._v(t._s(t.totalInfo.totalQuantity||0))])],1)],1),t.isCanSendPicking&&2!=t.noteInfo.checkStatus&&0==t.noteInfo.sendBill?n("v-uni-view",{staticClass:"fotter_btn send",on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.wmsOrder.apply(void 0,arguments)}}},[t._v("拣货送单")]):t._e(),t.isCanCheck&&2!=t.noteInfo.checkStatus?n("v-uni-view",{staticClass:"fotter_btn autid",on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.checkOrder.apply(void 0,arguments)}}},[t._v("审核")]):t._e(),2==t.noteInfo.checkStatus?n("v-uni-view",{staticClass:"fotter_btn send",on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.tapPrint.apply(void 0,arguments)}}},[t._v("打印")]):t._e()],1):t._e()],1)},a=[]},3672:function(t,e,n){"use strict";n.r(e);var o=n("f2fc"),a=n.n(o);for(var i in o)["default"].indexOf(i)<0&&function(t){n.d(e,t,(function(){return o[t]}))}(i);e["default"]=a.a},"4e51":function(t,e,n){"use strict";var o=n("16cf"),a=n.n(o);a.a},7204:function(t,e,n){var o=n("c86c");e=o(!1),e.push([t.i,".page[data-v-6ffd9da4]{display:flex;height:100%;overflow:hidden;flex-direction:column;font-size:%?28?%;font-family:PingFangSC-Regular,PingFang SC;font-weight:400;color:#333;line-height:%?40?%}.page .headerBtnGroup[data-v-6ffd9da4]{display:flex;align-items:center;position:relative}.page .headerBtnGroup uni-image[data-v-6ffd9da4]{width:%?40?%;height:%?40?%;margin-left:%?20?%}.page .headerBtnGroup .moreBtnBox[data-v-6ffd9da4]{position:absolute;bottom:0;right:0;z-index:99;padding:%?37?% %?0?% %?52?% %?0?%;font-size:%?30?%;color:#333;line-height:%?42?%;background:#fff;width:%?250?%;box-shadow:%?2?% %?3?% %?23?% %?0?% rgba(220,217,207,.5);overflow:hidden;opacity:0;-webkit-transform:translate(100%,100%);transform:translate(100%,100%);transition:all .3s}.page .headerBtnGroup .moreBtnBox .moreBtnBox_item[data-v-6ffd9da4]{display:flex;align-items:center}.page .headerBtnGroup .moreBtnBox .moreBtnBox_item uni-image[data-v-6ffd9da4]{width:%?44?%;height:%?44?%;margin-right:%?24?%;margin-left:%?24?%}.page .headerBtnGroup .moreBtnBox .moreBtnBox_item + .moreBtnBox_item[data-v-6ffd9da4]{margin-top:%?46?%}.page .headerBtnGroup .moreBtnBox.show[data-v-6ffd9da4]{opacity:1;-webkit-transform:translateY(100%);transform:translateY(100%)}.page .content[data-v-6ffd9da4]{flex:1;overflow-y:auto}.page .content[data-v-6ffd9da4]::-webkit-scrollbar{width:0;display:none}.page .content .noteInfo[data-v-6ffd9da4]{color:grey;padding:%?40?%;background:#fff;border-bottom:%?2?% solid #eee;margin-bottom:%?25?%}.page .content .noteInfo .noteInfo_textBox[data-v-6ffd9da4]{display:flex}.page .content .noteInfo .noteInfo_textBox + .noteInfo_textBox[data-v-6ffd9da4]{margin-top:%?20?%}.page .content .noteInfo .noteInfo_textBox .noteInfo_textBox-flex1[data-v-6ffd9da4]{flex:1;overflow:hidden;text-overflow:ellipsis;word-break:break-all;color:#333}.page .content .noteInfo .noteInfo_textBox .noteInfo_textBox-flex1 .noteNo[data-v-6ffd9da4]{font-size:%?32?%;line-height:%?45?%;font-weight:500;margin-right:%?10?%;vertical-align:middle}.page .content .noteInfo .noteInfo_textBox .noteInfo_textBox-flex1 .textbtn[data-v-6ffd9da4]{margin-left:%?10?%;padding:0 %?5?%;border-radius:%?4?%;color:#fff;font-size:%?22?%;line-height:%?30?%;vertical-align:middle}.page .content .noteInfo .noteInfo_textBox .noteInfo_textBox-flex1 .textbtn.autidStatus[data-v-6ffd9da4]{background:#5ccc8b}.page .content .noteInfo .noteInfo_textBox .noteInfo_textBox-flex1 .textbtn.wmsStatus[data-v-6ffd9da4]{background:#f97067}.page .content .noteInfo .noteInfo_textBox .noteInfo_textBox-flex1 .textbtn.payStatus[data-v-6ffd9da4]{background:#3da9fa}.page .content .noteInfo .noteInfo_textBox .noteInfo_btn[data-v-6ffd9da4]{font-size:%?22?%;color:#333;line-height:%?30?%;padding:%?5?% %?18?%;margin-left:%?10?%;border-radius:%?100?%;border:%?1?% solid #ccc}.page .content .goodsBox[data-v-6ffd9da4]{padding:%?40?% %?40?% %?0?% %?40?%;background:#fff}.page .content .goodsBox .goodsBox_header[data-v-6ffd9da4]{display:flex}.page .content .goodsBox .goodsBox_header uni-image[data-v-6ffd9da4]{width:%?160?%;height:%?160?%}.page .content .goodsBox .goodsBox_header .goodBox_header-right[data-v-6ffd9da4]{margin-left:%?20?%;flex:1;color:grey}.page .content .goodsBox .goodsBox_header .goodBox_header-right .goodsbox_header-text[data-v-6ffd9da4]{overflow:hidden;word-break:break-all}.page .content .goodsBox .goodsBox_header .goodBox_header-right .goodsbox_header-text + .goodsbox_header-text[data-v-6ffd9da4]{margin-top:%?20?%}.page .content .goodsBox .goodsBox_header .goodBox_header-right .goodsbox_header-text.title[data-v-6ffd9da4]{font-size:%?32?%;font-weight:500;color:#333;line-height:%?45?%}.page .content .goodsBox .goodsBox_header .goodBox_header-right .goodsbox_header-text .amt[data-v-6ffd9da4]{margin-left:%?20?%}.page .content .goodsBox .goodsBox_header .goodBox_header-right .goodsbox_header-text .red[data-v-6ffd9da4]{font-size:%?32?%;font-weight:500;color:#ef2f46;line-height:%?45?%;color:#ef2f46}.page .content .goodsBox .goodsBox_content[data-v-6ffd9da4]{display:flex;justify-content:space-between;padding-top:%?40?%}.page .content .goodsBox .goodsBox_content .goodsBox_content-item[data-v-6ffd9da4]{color:grey;text-align:center}.page .content .goodsBox .goodsBox_content .goodsBox_content-item .bottom[data-v-6ffd9da4]{color:#333;font-size:%?32?%;font-weight:500;line-height:%?45?%}.page .content .goodsBox .goodsBox_fotter[data-v-6ffd9da4]{overflow:hidden;height:%?0?%;transition:all .3s}.page .content .goodsBox .goodsBox_fotter .goodsBox_fotter-textBox[data-v-6ffd9da4]{display:flex;color:grey;margin-top:%?20?%}.page .content .goodsBox .goodsBox_fotter .goodsBox_fotter-textBox .right[data-v-6ffd9da4]{flex:1;margin-left:%?20?%;overflow:hidden;word-break:break-all;color:#333}.page .content .goodsBox .goodsBox_fotter .goodsBox_fotter-textBox[data-v-6ffd9da4]:last-child{margin-bottom:%?20?%}.page .content .goodsBox .goodsBox_fotter.show[data-v-6ffd9da4]{height:auto}.page .content .goodsBox .exprand[data-v-6ffd9da4]{display:flex;font-size:%?24?%;line-height:%?33?%;justify-content:center;align-items:center;padding:%?16?% 0}.page .content .goodsBox .exprand uni-image[data-v-6ffd9da4]{width:%?30?%;height:%?30?%;-webkit-transform:rotate(90deg);transform:rotate(90deg);transition:all .3s}.page .content .goodsBox .exprand uni-image.show[data-v-6ffd9da4]{-webkit-transform:rotate(-90deg);transform:rotate(-90deg)}.page .content .amtBox[data-v-6ffd9da4]{padding:%?20?% %?40?%;background:#fff;border-top:%?2?% solid #eee}.page .content .amtBox .amtBox_text[data-v-6ffd9da4]{display:flex;justify-content:space-between;align-items:center;color:grey}.page .content .amtBox .amtBox_text .right[data-v-6ffd9da4]{color:#333}.page .content .amtBox .amtBox_text + .amtBox_text[data-v-6ffd9da4]{margin-top:%?20?%}.page .fotter[data-v-6ffd9da4]{height:%?100?%;padding-left:%?40?%;background:#fff;overflow:hidden;display:flex;align-items:center;box-shadow:%?0?% %?2?% %?12?% %?0?% rgba(220,217,207,.5)}.page .fotter .fotter_content[data-v-6ffd9da4]{font-size:%?22?%;color:grey;line-height:%?30?%;flex:1}.page .fotter .fotter_content .amt uni-text[data-v-6ffd9da4]{margin-left:%?20?%;color:red;font-size:%?26?%;line-height:%?37?%}.page .fotter .fotter_content .number[data-v-6ffd9da4]{margin-top:%?10?%}.page .fotter .fotter_content .number uni-text[data-v-6ffd9da4]{margin-left:%?20?%;color:#333;font-size:%?26?%;line-height:%?37?%}.page .fotter .fotter_btn[data-v-6ffd9da4]{font-size:%?32?%;color:#fff;line-height:%?45?%;display:flex;align-items:center;width:%?200?%;height:100%;justify-content:center}.page .fotter .fotter_btn.send[data-v-6ffd9da4]{background:#ffc300}.page .fotter .fotter_btn.autid[data-v-6ffd9da4]{background:#fa6f1e}",""]),t.exports=e},ab4ac:function(t,e,n){"use strict";n.r(e);var o=n("33b1"),a=n("3672");for(var i in a)["default"].indexOf(i)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(i);n("4e51");var s=n("828b"),r=Object(s["a"])(a["default"],o["b"],o["c"],!1,null,"6ffd9da4",null,!1,o["a"],void 0);e["default"]=r.exports},f2fc:function(t,e,n){"use strict";(function(t){n("6a54");var o=n("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,n("fd3c");var a=o(n("9b1b")),i=o(n("2634")),s=o(n("2fdc")),r=o(n("f92a")),d=n("9cee"),c=n("f55d"),u=o(n("f80c")),f=o(n("63d3")),l={components:{customHeader:r.default},data:function(){return{goodsList:[],noteInfo:{},totalInfo:{},saleId:"",isShowPage:!1,payStatusName:d.payStatusName,checkStatusName:d.checkStatusName,sendBillStatusName:d.sendBillStatusName,isShowMoreBtn:!1,eventChannel:null,isEmitNoteInfo:!1,hasPriceAuth:1,useMultUnit:!1}},computed:{isCanCheck:function(){return this.$store.getters.getMenubtnsByUrl({parentUrl:"main/sale/outNote/2",authority:"chk"})},isCanAdd:function(){return this.$store.getters.getMenubtnsByUrl({parentUrl:"main/sale/outNote/1",authority:"add"})},isCanSalesCollection:function(){return this.$store.getters.getMenubtnsByUrl({parentUrl:"main/sale/outNote/2",authority:"salesCollection"})},isCanSendPicking:function(){return this.$store.getters.getMenubtnsByUrl({parentUrl:"main/sale/outNote/2",authority:"sendPicking"})},isCanCopy:function(){return this.$store.getters.getMenubtnsByUrl({parentUrl:"main/sale/outNote/2",authority:"copy"})},isCanDelete:function(){return this.$store.getters.getMenubtnsByUrl({parentUrl:"main/sale/outNote/2",authority:"delNote"})},isCanGenerateOrderNote:function(){return this.$store.getters.getMenubtnsByUrl({parentUrl:"main/sale/outNote/2",authority:"generateOrderNote"})},isCanBackChk:function(){return this.$store.getters.getMenubtnsByUrl({parentUrl:"main/sale/outNote/2",authority:"backChk"})}},onLoad:function(t){var e=t.id,n=t.hasPriceAuth;this.saleId=e,"undefined"!=n&&(this.hasPriceAuth=+n);var o=this.getOpenerEventChannel();this.eventChannel=o,this.getNoteInfo(),this.getGoodsList(),this.useMultUnit=uni.getStorageSync("useMultUnit")},filters:{formatDate:function(t){return t?f.default.timeTransfer(t):""}},methods:{getNoteInfo:function(){var t=this;return(0,s.default)((0,i.default)().mark((function e(){var n,o,a,s,r;return(0,i.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.saleId){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,t.get("api/sale/main",{saleId:t.saleId},1);case 4:if(n=e.sent,!n.meta.success){e.next=15;break}if(o=n.data||{},a=o.saleMain,s=o.remark,r=o.stattistics,a&&r){e.next=10;break}return t.isShowPage=!1,e.abrupt("return");case 10:Object.assign(t.noteInfo,a,{clientRemark:s}),Object.assign(t.totalInfo,r),t.isShowPage=!0,e.next=16;break;case 15:uni.showToast({title:n.meta.message,icon:"none",duration:2e3});case 16:case"end":return e.stop()}}),e)})))()},getGoodsList:function(){var t=this;return(0,s.default)((0,i.default)().mark((function e(){var n;return(0,i.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.saleId){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,t.get("api/sale/detail/list",{saleId:t.saleId},1);case 4:n=e.sent,n.meta.success?t.goodsList=Array.prototype.map.call(n.data||[],(function(t){return(0,a.default)((0,a.default)({},t),{},{isShowMore:!1})})):uni.showToast({title:n.meta.message,icon:"none",duration:2e3});case 6:case"end":return e.stop()}}),e)})))()},changItemShowMore:function(t){t.isShowMore=!t.isShowMore},checkOrder:function(){var e=this;return(0,s.default)((0,i.default)().mark((function n(){var o,a;return(0,i.default)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(e.isShowMoreBtn=!1,e.saleId){n.next=3;break}return n.abrupt("return");case 3:return n.prev=3,n.next=6,(0,c.showModal)({content:"是否审核该单据"});case 6:if(o=n.sent,o){n.next=9;break}return n.abrupt("return");case 9:return uni.showLoading({title:"正在审核中",mask:!0}),n.next=12,e.get("sale/main/check?id=".concat(e.saleId),{},3);case 12:return a=n.sent,n.next=15,(0,c.wait)(300);case 15:uni.hideLoading(),a.meta.success?(uni.showToast({title:"审核成功",icon:"none",duration:2e3}),e.noteInfo.checkStatus=2,e.isEmitNoteInfo=!0,e.$forceUpdate()):uni.showToast({title:a.meta.message,icon:"none",duration:2e3}),n.next=22;break;case 19:n.prev=19,n.t0=n["catch"](3),t.error(n.t0);case 22:case"end":return n.stop()}}),n,null,[[3,19]])})))()},wmsOrder:function(){var t=this;return(0,s.default)((0,i.default)().mark((function e(){var n;return(0,i.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.isShowMoreBtn=!1,t.saleId){e.next=3;break}return e.abrupt("return");case 3:return uni.showLoading({title:"正在送单中",mask:!0}),e.next=6,t.get("/wms/saleMain/sendPick?isbarch=0",{saleIds:t.saleId},"wms",!0);case 6:return n=e.sent,e.next=9,(0,c.wait)(300);case 9:uni.hideLoading(),n.meta.success?(uni.showToast({title:"送单成功",icon:"none",duration:2e3}),t.noteInfo.sendBill=1,t.isEmitNoteInfo=!0,t.$forceUpdate()):uni.showToast({title:n.meta.message,icon:"none",duration:2e3});case 11:case"end":return e.stop()}}),e)})))()},tapPrint:function(){this.isShowMoreBtn=!1,this.saleId&&u.default.getPrintData(this.saleId)},toOpenNewNote:function(){var e=uni.getStorageSync("employeeId"),n=uni.getStorageSync("privilegeMap");if(e==this.noteInfo.creator||1!=n.banMoOtherDocStatus){if(1==n.banChangeSaleStatus&&this.noteInfo.printCount>0)uni.showToast({title:"禁止修改打印过的单据",icon:"none",duration:2e3});else if(t.log("noteInfo",this.noteInfo),this.saleId){var o={customerId:this.noteInfo?this.noteInfo.customerId:"",customerName:this.noteInfo?this.noteInfo.customerName:"",warehouse:this.noteInfo?this.noteInfo.storehouseName:"",storehouseId:this.noteInfo?this.noteInfo.storehouseId:"",customersiteName:this.noteInfo?this.noteInfo.customersiteName:"",customersiteId:this.noteInfo?this.noteInfo.customersiteId:""};uni.setStorageSync("outNoteTemp",o),uni.setStorageSync("saleBillId",this.saleId),uni.navigateTo({url:"/pages/index/sale/outNote/outNote"})}}else uni.showToast({title:"不能修改他人单据",icon:"none",duration:2e3})},changShowMoreBtn:function(){this.isShowMoreBtn=!this.isShowMoreBtn},deleteNote:function(){var e=this;return(0,s.default)((0,i.default)().mark((function n(){var o,a;return(0,i.default)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(e.isShowMoreBtn=!1,e.saleId){n.next=3;break}return n.abrupt("return");case 3:return n.prev=3,n.next=6,(0,c.showModal)({content:"是否作废该单据, 作废成功会返回单据历史页面"});case 6:if(o=n.sent,o){n.next=9;break}return n.abrupt("return");case 9:return uni.showLoading({title:"正在作废中",mask:!0}),n.next=12,e.del("api/sale/main?id=".concat(e.saleId),{},1);case 12:return a=n.sent,n.next=15,(0,c.wait)(300);case 15:uni.hideLoading(),a.meta.success?(uni.showToast({title:"作废成功",icon:"none",duration:2e3}),e.noteInfo.deflag=0,e.isEmitNoteInfo=!0,e.goBack(500)):uni.showToast({title:a.meta.message,icon:"none",duration:2e3}),n.next=22;break;case 19:n.prev=19,n.t0=n["catch"](3),t.error(n.t0);case 22:case"end":return n.stop()}}),n,null,[[3,19]])})))()},goBack:function(){var t=arguments,e=this;return(0,s.default)((0,i.default)().mark((function n(){var o;return(0,i.default)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(o=t.length>0&&void 0!==t[0]?t[0]:0,e.isEmitNoteInfo&&e.eventChannel.emit("changStatus",e.noteInfo),n.t0=e.isEmitNoteInfo&&o,!n.t0){n.next=6;break}return n.next=6,(0,c.wait)(o);case 6:uni.navigateBack();case 7:case"end":return n.stop()}}),n)})))()},copyNote:function(){var e=this;return(0,s.default)((0,i.default)().mark((function n(){var o,a;return(0,i.default)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(e.isShowMoreBtn=!1,e.saleId){n.next=3;break}return n.abrupt("return");case 3:return uni.showLoading({title:"正在复制中",mask:!0}),n.next=6,e.post("api/sale/copy?oldSaleId=".concat(e.saleId),{oldSaleId:e.saleId},1);case 6:return o=n.sent,n.next=9,(0,c.wait)(300);case 9:if(uni.hideLoading(),!o.meta.success){n.next=20;break}return uni.showToast({title:"复制成功",icon:"none",duration:2e3}),t.log(o.data),a=o.data.newId,n.next=16,(0,c.wait)(1e3);case 16:uni.setStorageSync("saleBillId",a),uni.navigateTo({url:"/pages/index/sale/outNote/outNote"}),n.next=21;break;case 20:uni.showToast({title:o.meta.message,icon:"none",duration:2e3});case 21:case"end":return n.stop()}}),n)})))()},backCeck:function(){var e=this;return(0,s.default)((0,i.default)().mark((function n(){var o,a;return(0,i.default)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(e.isShowMoreBtn=!1,e.saleId){n.next=3;break}return n.abrupt("return");case 3:return n.prev=3,n.next=6,(0,c.showModal)({content:"是否反审该单据"});case 6:if(o=n.sent,o){n.next=9;break}return n.abrupt("return");case 9:return uni.showLoading({title:"正在反审中",mask:!0}),n.next=12,e.get("api/sale/main/backCheckApp?id=".concat(e.saleId),{},1);case 12:return a=n.sent,n.next=15,(0,c.wait)(300);case 15:uni.hideLoading(),a.meta.success?(uni.showToast({title:"反审成功",icon:"none",duration:2e3}),e.noteInfo.checkStatus=1,e.isEmitNoteInfo=!0,t.log(e.noteInfo.checkStatus),e.$forceUpdate()):uni.showToast({title:a.meta.message,icon:"none",duration:2e3}),n.next=22;break;case 19:n.prev=19,n.t0=n["catch"](3),t.error(n.t0);case 22:case"end":return n.stop()}}),n,null,[[3,19]])})))()},generateOrderNote:function(){var t=this;return(0,s.default)((0,i.default)().mark((function e(){var n,o;return(0,i.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.isShowMoreBtn=!1,t.saleId){e.next=3;break}return e.abrupt("return");case 3:return uni.showLoading({title:"正在转单中",mask:!0}),e.next=6,t.get("api/purchase/saleGeneratePurchase",{saleId:t.saleId},1);case 6:return n=e.sent,e.next=9,(0,c.wait)(300);case 9:if(uni.hideLoading(),!n.meta.success){e.next=21;break}if(uni.showToast({title:"转单成功",icon:"none",duration:2e3}),o=n.data.main,o){e.next=15;break}return e.abrupt("return");case 15:return e.next=17,(0,c.wait)(1e3);case 17:uni.setStorageSync("againPurchase",(0,a.default)({},o)),uni.navigateTo({url:"/pages/index/purchaseNoteNew/purchaseNoteNew?purchaseType=1"}),e.next=22;break;case 21:uni.showToast({title:n.meta.message,icon:"none",duration:2e3});case 22:case"end":return e.stop()}}),e)})))()}}};e.default=l}).call(this,n("ba7c")["default"])}}]);