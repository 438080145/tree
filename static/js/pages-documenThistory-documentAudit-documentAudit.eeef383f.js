(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-documenThistory-documentAudit-documentAudit"],{"2f4a":function(t,i){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACwAAAAsCAYAAAAehFoBAAABAElEQVRYR+3YwQnDMAwFUKfk2g3sATpDN+gQ3aMbdIsuUcgM3cIXz6ESaKDkFNv/Swjsswwv3zl8NAVnZ3LmDQPMfrGRsNuEReRUSrnFGN/Ij6D8Ej/sS0TuIYRHSumJQsPBO+zmhKHh4JzzZZ7nj4icd6lC0HDwiiylXEVkYaApYCaaBmahqWAGmg5Go1XASLQaGIVWBSPQ6uBetAm4B20GbkWbglvQA1zTe1tKklnCLdg1DBNwK9YE3INVB/diVcEIrBoYhVUBI7F0MBpLBTOwNDALSwG7W6S4W1Wtz+ZqGbi1NVfr1pqKWTtr0tZqkf/zA9yT3pG7I+EjKfXMfAET5VI8nay5cwAAAABJRU5ErkJggg=="},"3e31":function(t,i,e){"use strict";e.d(i,"b",(function(){return a})),e.d(i,"c",(function(){return n})),e.d(i,"a",(function(){}));var a=function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("v-uni-view",[a("v-uni-view",{staticClass:"contain"},[a("v-uni-view",{staticClass:"head-item"},[a("v-uni-text",[t._v("总金额")]),a("v-uni-view",{staticClass:"head-item-money"},[a("v-uni-text",[t._v("￥")]),t._v(t._s(t.auditList.totalAmount))],1)],1),a("v-uni-view",{staticClass:"middle-item",staticStyle:{"border-top":"1upx solid #EEEEEE"}},[a("v-uni-view",{staticClass:"middle-item-fir"},[a("v-uni-view",{staticClass:"fir-left"},[t._v("结款金额")]),a("v-uni-input",{attrs:{type:"digit",placeholder:"请输入结款金额"},on:{confirm:function(i){arguments[0]=i=t.$handleEvent(i),t.settleEven.apply(void 0,arguments)}},model:{value:t.auditList.settleMent,callback:function(i){t.$set(t.auditList,"settleMent",i)},expression:"auditList.settleMent"}})],1)],1),a("v-uni-view",{staticClass:"middle-item"},[a("v-uni-view",{staticClass:"middle-item-fir"},[a("v-uni-view",{staticClass:"fir-left"},[t._v("优惠金额")]),a("v-uni-input",{attrs:{type:"digit",placeholder:"请输入优惠金额"},on:{confirm:function(i){arguments[0]=i=t.$handleEvent(i),t.discountEven.apply(void 0,arguments)}},model:{value:t.auditList.discount,callback:function(i){t.$set(t.auditList,"discount",i)},expression:"auditList.discount"}})],1)],1),a("v-uni-view",{staticClass:"middle-item",staticStyle:{"border-top":"1upx solid #EEEEEE"}},[a("v-uni-view",{staticClass:"middle-item-fir"},[a("v-uni-view",{staticClass:"fir-left"},[t._v("现金银行")]),a("v-uni-view",{staticClass:"fir-right"},[a("v-uni-picker",{attrs:{value:t.index,range:t.bankList,"range-key":"name"},on:{change:function(i){arguments[0]=i=t.$handleEvent(i),t.selectBank.apply(void 0,arguments)}}},[a("v-uni-view",{staticClass:"pickval"},[t._v(t._s(t.bank))])],1),a("v-uni-image",{attrs:{src:e("2f4a"),mode:""}})],1)],1)],1)],1),a("v-uni-view",{staticClass:"foot",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.submitCheck.apply(void 0,arguments)}}},[t._v("审核")])],1)},n=[]},"94cc6":function(t,i,e){var a=e("c86c");i=a(!1),i.push([t.i,"uni-page-body[data-v-3518b4da]{background:#f6f6f6}body.?%PAGE?%[data-v-3518b4da]{background:#f6f6f6}.head-item[data-v-3518b4da]{margin:%?100?% auto;text-align:center}.head-item uni-text[data-v-3518b4da]{font-size:%?32?%;font-weight:400;color:#666}.head-item-money[data-v-3518b4da]{margin-top:%?20?%;font-size:%?60?%;font-weight:500;color:#333}.middle-item[data-v-3518b4da]{margin:0 %?40?%}.middle-item[data-v-3518b4da]:first-child{border-top:%?1?% solid #eee}.middle-item-fir[data-v-3518b4da]{display:flex;justify-content:space-between;width:100%;height:%?100?%;line-height:%?100?%}.fir-left[data-v-3518b4da]{font-size:%?32?%;color:#666;line-height:45px}.middle-item-fir uni-input[data-v-3518b4da]{height:%?100?%;line-height:%?100?%;text-align:right}.fir-right[data-v-3518b4da]{display:flex;width:50%}.fir-right uni-picker[data-v-3518b4da]{height:%?100?%;width:100%}.pickval[data-v-3518b4da]{height:%?100?%;width:100%;line-height:%?100?%;text-align:right;font-size:%?32?%;color:#666}.fir-right uni-image[data-v-3518b4da]{width:%?44?%;height:%?44?%;margin-top:%?28?%}.foot[data-v-3518b4da]{width:%?670?%;height:%?88?%;line-height:%?88?%;text-align:center;background:#ffb822;border-radius:%?8?%;border:1px solid #ffb823;margin:0 auto;font-size:%?32?%;font-weight:400;color:#fff;margin-top:%?50?%}",""]),t.exports=i},c63c:function(t,i,e){"use strict";e.r(i);var a=e("3e31"),n=e("f97a");for(var s in n)["default"].indexOf(s)<0&&function(t){e.d(i,t,(function(){return n[t]}))}(s);e("d83a");var o=e("828b"),d=Object(o["a"])(n["default"],a["b"],a["c"],!1,null,"3518b4da",null,!1,a["a"],void 0);i["default"]=d.exports},d5b1:function(t,i,e){"use strict";(function(t){e("6a54"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var a={data:function(){return{bankList:[],index:0,bank:"",auditList:{totalAmount:"",settleMent:"",discount:"",id:""},asId:""}},methods:{getBank:function(){var t=this;t.get("api/AccountingSubjects/cashBank/",{},1).then((function(i){var e=i.data;i.meta.success&&(e.length>0?t.bankList=e:t.bankList=[])}))},selectBank:function(t){this.index=t.target.value,this.bank=this.bankList[this.index].name,this.asId=this.bankList[this.index].id},settleEven:function(i){var e=this.auditList,a=i.target.value;e.settleMent=Math.floor(100*a)/100;var n=Math.floor(.5*e.totalAmount*100)/100,s=Math.floor(100*(e.totalAmount-n))/100;t.log("item.settleMent结款金额::",e.settleMent),t.log("discountMax最大优惠金额::",n),t.log("settleMentMax最低结款金额：：",s),e.settleMent<s&&(t.log(111),e.settleMent=s,e.discount=e.totalAmount-e.settleMent),e.settleMent<=e.totalAmount||(e.settleMent=e.totalAmount),e.discount=e.totalAmount-e.settleMent},discountEven:function(){var i=this.auditList,e=event.target.value;i.discount=Math.floor(100*e)/100;var a=Math.floor(.5*i.totalAmount*100)/100,n=Math.floor(100*(i.totalAmount-a))/100;t.log("item.settleMent结款金额::",i.settleMent),t.log("discountMax最大优惠金额::",a),t.log("settleMentMax最低结款金额：：",n),i.discount>a?(i.discount=a,i.settleMent=i.totalAmount-i.discount):i.settleMent=i.totalAmount-i.discount},submitCheck:function(){t.log("auditList.totalAmount",this.auditList.totalAmount),t.log("auditList.discount",this.auditList.discount),t.log("auditList.settleMent",this.auditList.settleMent),t.log("asId",this.asId),t.log("Id",this.auditList.id),this.asId?this.get("sale/main/pcheck",{id:this.auditList.id,settleMent:this.auditList.settleMent?this.auditList.settleMent:0,discount:this.auditList.discount?this.auditList.discount:0,asId:this.asId},3).then((function(t){t.meta.success&&(uni.showToast({title:"审核成功",icon:"none",duration:500}),setTimeout((function(){uni.navigateBack({delta:1})}),1e3))})):uni.showToast({title:"请选择一个现金银行",icon:"none",duration:500})}},onLoad:function(i){if(t.log(i),i.auditList){var e=JSON.parse(i.auditList);for(var a in e)this.auditList[a]=e[a]}this.getBank()}};i.default=a}).call(this,e("ba7c")["default"])},d83a:function(t,i,e){"use strict";var a=e("f70e"),n=e.n(a);n.a},f70e:function(t,i,e){var a=e("94cc6");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=e("967d").default;n("e7edcad8",a,!0,{sourceMap:!1,shadowMode:!1})},f97a:function(t,i,e){"use strict";e.r(i);var a=e("d5b1"),n=e.n(a);for(var s in a)["default"].indexOf(s)<0&&function(t){e.d(i,t,(function(){return a[t]}))}(s);i["default"]=n.a}}]);