(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-index-salesmanTrajectory-salesmanTrajectory"],{"0aa2":function(e,t,i){"use strict";(function(e){i("6a54");var a=i("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,i("d4b5"),i("aa9c");var n=a(i("9b1b")),o=a(i("7fe9")),d=a(i("63d3")),l=(a(i("82d0")),i("8f59")),r={components:{},data:function(){return{windowWidth:0,windowHeight:0,rpx:0,headerpaddingTop:0,headerHeight:0,headerLeftWidth:0,headerLeftImageWidth:0,headerMiddleWidth:0,headerMiddlePickerLeftWidth:0,headerMiddlePickerText:0,headerRightWidth:0,headerRightImageWidth:0,headerRightfontSize:0,mapHeight:0,location:{latitude:0,longitude:0},markers:[],polyline:[],scrollViewItemIndex:0,scrollLeft:0,startDate:d.default.getDate({format:!0}),allEmployeesInfoList:[],maskShow:!1,myPoint:null,positionUrl:"/hybrid/html/line.html"}},created:function(e){var t=this;t.getLocation(),uni.getSystemInfo({success:function(e){t.windowWidth=e.windowWidth,t.windowHeight=e.windowHeight,t.headerpaddingTop=Math.ceil(.106*e.windowWidth),t.headerHeight=Math.ceil(.1333*e.windowWidth),t.headerLeftWidth=Math.round(.2*e.windowWidth),t.headerLeftImageWidth=Math.round(.56*t.headerHeight),t.headerMiddleWidth=Math.round(.6*e.windowWidth),t.headerMiddlePickerLeftWidth=Math.round(.044*t.headerMiddleWidth),t.headerMiddlePickerText=Math.round(.066*t.headerMiddleWidth),t.headerRightWidth=t.headerLeftWidth,t.headerRightImageWidth=Math.round(.34*t.headerHeight),t.headerRightfontSize=Math.round(.16*t.headerHeight),t.mapHeight=e.windowHeight-t.headerHeight-t.headerpaddingTop,t.rpx=e.windowWidth/750,t.scrollItemWidth=Math.round(312*t.rpx)}}),t.allEmployeesInfo()},computed:(0,n.default)({},(0,l.mapState)(["params"])),mounted:function(){},onShow:function(){},methods:(0,n.default)((0,n.default)({},(0,l.mapMutations)(["setparams"])),{},{setWebviewData:function(e){var t=this.$scope.$getAppWebview().children()[0];t&&setTimeout((function(){t.setStyle({top:140,bottom:1}),t.evalJS("init(".concat(JSON.stringify({markers:e||[]}),")"))}),500)},handleMapMessage:function(e){var t=e.detail,i=t.data[0];this.beforeMsg=i,i&&i.id?uni.navigateTo({url:"/pages/index/visitRecord/visitDetails/visitDetails?id="+i.id}):uni.showToast({icon:"none",title:"当前数据异常",duration:2e3})},goBack:function(){uni.navigateBack({delta:1})},getLocation:function(){var t=this;uni.getLocation({type:"gcj02",geocode:!0,success:function(i){e.log("当前位置的经度："+i.longitude),e.log("当前位置的纬度："+i.latitude),t.myPoint=new plus.maps.Point(i.longitude,i.latitude)},fail:function(e){},complete:function(e){}})},allEmployeesInfo:function(){var e=this,t={pageNum:1,pageSize:100,beginTime:new Date(e.startDate).getTime(),endTime:new Date(e.startDate).getTime()};o.default.visitingNumber(t).then((function(t){t.meta.success?(e.allEmployeesInfoList=t.data.list,e.visitingRecord(e.allEmployeesInfoList[e.scrollViewItemIndex])):uni.showToast({icon:"none",title:t.meta.message,duration:2e3})}))},bindDateChange:function(e){this.startDate=e.detail.value,this.allEmployeesInfo()},toSalesman:function(){this.setparams({beginTime:new Date(this.startDate).getTime(),endTime:new Date(this.startDate).getTime()}),uni.navigateTo({url:"./children/salesman/salesman"})},OnScrollViewItem:function(t){this.scrollViewItemIndex=t,this.scrollLeft=t*(this.scrollItemWidth+8)-Math.ceil((this.windowWidth-(this.scrollItemWidth+8))/2),e.log("this.scrollLeft",this.scrollLeft),this.visitingRecord(this.allEmployeesInfoList[t]),this.$forceUpdate()},visitingRecord:function(e){var t=this,i={pageNum:1,pageSize:100,beginTime:new Date(t.startDate).getTime(),endTime:new Date(t.startDate).getTime(),pertain:1,salesmanIdCode:e?e.id:""};o.default.visitingRecord(i).then((function(e){if(e.meta.success){if(!e.data||e.data&&0===e.data.list.length)return t.myPoint||t.getLocation(),t.location=t.myPoint?t.myPoint:{latitude:39.909187,longitude:116.397451},t.markers=[],t.polyline=[],t.polyline=[{points:[],color:"#f0b31f",width:10,dottedLine:!0,arrowLine:!0,borderColor:"#ffb822",borderWidth:2}],t.$forceUpdate(),void t.setWebviewData();var i=e.data.list;t.markers=[];for(var a=[],n=0;n<i.length;n++){var o=i[n],d=o.startCoordinate.split(","),l=d;null!=l&&l.length>0&&(t.markers.push({id:o.id,latitude:l[1],longitude:l[0],title:n+1+". "+o.customerName,zIndex:"1",iconPath:"/static/img/RedLevel.png",rotate:0,width:20,height:20,anchor:{x:.5,y:1},callout:{content:n+1+". "+o.customerName,color:"#00BFFF",fontSize:10,borderRadius:4,borderWidth:1,borderColor:"#333300",bgColor:"#CCFF99",padding:"5",display:"ALWAYS"}}),a.push({latitude:l[1],longitude:l[0]}))}t.location={latitude:a[0].latitude,longitude:a[0].longitude},t.polyline=[{points:a,color:"#f0b31f",width:10,dottedLine:!0,arrowLine:!0,borderColor:"#ffb822",borderWidth:2}],t.setWebviewData(t.markers)}else uni.showToast({icon:"none",title:e.meta.message,duration:2e3})}))},searchData:function(e){var t=this;setTimeout((function(){for(var i=0;i<t.allEmployeesInfoList.length;i++){var a=t.allEmployeesInfoList[i];if(a.id===e.id){t.OnScrollViewItem(i);break}}}),500)},setState:function(){this.maskShow=!this.maskShow},toInfo:function(e){var t=e.detail.markerId;t?uni.navigateTo({url:"/pages/index/visitRecord/visitDetails/visitDetails?id="+t}):uni.showToast({icon:"none",title:"当前数据异常",duration:2e3})}})};t.default=r}).call(this,i("ba7c")["default"])},"37b9":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwBAMAAAClLOS0AAAAJ1BMVEX///8zMzP6+vpwcHCSkpJ9fX2IiIhISEjY2Njt7e2/v787OztbW1vTET4fAAAAk0lEQVQ4y82TuQ2EQBAEVwgkDq/FY584FwciIATIAEIgCgwCwMEhBEK4zEigy98xt1Wz8/SEEHsUCwh3BcCj0b0nh7yQP/KpdgI2NRY4JVvth4BLmizwV22BDoCkV/11wk8abKZZpQUyAlYAUgJQwFT8OZbLDeJIcIihpbHjoni1aAa2DxqOLRrI1HgGfDh8avHEC/ZBGXwrpcb3AAAAAElFTkSuQmCC"},"4a34":function(e,t,i){var a=i("c86c");t=a(!1),t.push([e.i,".content[data-v-f7a62980]{flex:1;display:flex}.head[data-v-f7a62980]{position:fixed;display:flex;padding:0;flex-direction:row;justify-content:space-between;background-color:#f1f1f1}.header-left[data-v-f7a62980]{display:flex;flex-direction:row;align-items:center}.header-middle[data-v-f7a62980]{display:flex;flex-direction:row;justify-content:center}.header-middle-picker-value[data-v-f7a62980]{display:flex;flex-direction:row;align-items:center;justify-content:center;text-align:center}.header-middle-picker-left[data-v-f7a62980]{-webkit-transform:rotate(180deg);transform:rotate(180deg)}.header-right[data-v-f7a62980]{display:flex;flex-direction:row;justify-content:flex-end}.header-right-box[data-v-f7a62980]{display:flex;flex-direction:column;justify-content:center;align-items:center}.header-right-text[data-v-f7a62980]{\n  /* color: #fff; */}.scroll-view[data-v-f7a62980]{position:fixed;display:flex;flex-direction:row;justify-content:center;align-items:center;height:%?130?%;z-index:999}.scroll-view-box[data-v-f7a62980]{\n  /* flex: 1; */display:flex;flex-direction:row;height:%?130?%}.scroll-view-item[data-v-f7a62980]{display:inline-flex;flex-direction:row;align-items:center;height:%?120?%;margin-top:2px;text-align:center;font-size:%?36?%;border-radius:%?6?%;background-color:#fdfffe;background-image:linear-gradient(90deg,#fff,#fff)}.scroll-view-item-active[data-v-f7a62980]{background-image:linear-gradient(90deg,#29a3fb,#37cdef)}.scroll-view-item-left[data-v-f7a62980]{display:flex;flex-direction:row;justify-content:center;width:%?76?%}.scroll-view-item-left-image[data-v-f7a62980]{width:%?58?%;height:%?58?%;border-radius:50%}.scroll-view-item-right[data-v-f7a62980]{flex:1;display:flex;flex-direction:column;padding-top:%?10?%;padding-bottom:%?10?%}.scroll-view-item-right-box[data-v-f7a62980]{display:flex;align-items:flex-start;justify-content:center;flex-direction:column;height:%?100?%\n  /* text-align: left; */}[data-v-f7a62980] .uni-scroll-view-content{width:-webkit-max-content;width:max-content}.scroll-view-item-right-row[data-v-f7a62980]{flex:1;display:flex;align-items:center;justify-content:center;flex-direction:row}.scroll-view-item-right-row1[data-v-f7a62980]{align-items:flex-end}.scroll-view-item-right-column1[data-v-f7a62980]{display:flex;flex-direction:row;margin-right:%?10?%}.scroll-view-item-right-column2[data-v-f7a62980]{display:flex;flex-direction:row}.scroll-view-item-right-row-f1[data-v-f7a62980]{margin-right:%?10?%;margin-bottom:%?6?%;font-size:%?30?%;line-height:%?30?%}.scroll-view-item-right-row-f2[data-v-f7a62980]{margin-bottom:%?6?%;font-size:%?22?%;line-height:%?22?%;color:#484848}.scroll-view-item-right-row-f3[data-v-f7a62980]{font-size:%?20?%;line-height:%?20?%;color:#484848}.scroll-view-item-right-row-f4[data-v-f7a62980]{font-size:%?20?%;line-height:%?20?%;color:#33cbf4}.scroll-view-item-right-row-f0[data-v-f7a62980]{color:#fff}.map[data-v-f7a62980]{width:%?750?%;height:250px;background-color:#f0f0f0}.bottom-button[data-v-f7a62980]{display:flex;flex-direction:row;justify-content:center;position:fixed;bottom:%?42?%;height:%?74?%;z-index:999}.bottom-button-box[data-v-f7a62980]{display:flex;flex-direction:row;justify-content:space-between;height:%?74?%}.bottom-button-box-item[data-v-f7a62980]{display:flex;flex-direction:row;align-items:center;justify-content:center;width:%?74?%;height:%?74?%;margin:0;padding:0;border-radius:50%}.ranking[data-v-f7a62980]{background-color:#fff}.play[data-v-f7a62980]{background-color:#26a4f9}.bottom-button-box-item-image[data-v-f7a62980]{width:%?74?%;height:%?74?%;margin:0;border-radius:50%}.bottom-button-box-item-image-ranking[data-v-f7a62980]{width:%?44?%;height:%?44?%;border-radius:0;margin-left:%?6?%;margin-top:%?4?%}.mask[data-v-f7a62980]{position:fixed;top:0;left:0;z-index:999}.mask-bottom[data-v-f7a62980]{position:absolute;background-color:#000;opacity:.5}.mask-box-top[data-v-f7a62980]{flex:1}.mask-box-center[data-v-f7a62980]{display:flex;flex-direction:row;align-items:center;justify-content:center}.mask-box-center-left[data-v-f7a62980]{position:relative;background-color:#fff;z-index:9999}.mask-box-center-right[data-v-f7a62980]{flex:1}.mask-box-center-left-item[data-v-f7a62980]{flex:1;display:flex;flex-direction:row;align-items:center}",""]),e.exports=t},"509c":function(e,t,i){var a=i("c86c");t=a(!1),t.push([e.i,".head[data-v-f7a62980]{position:absolute;width:100%;z-index:1111;top:%?60?%;background-color:#fff}.head .header-left[data-v-f7a62980], .head .header-middle[data-v-f7a62980], .head .header-right[data-v-f7a62980], .head .header-right-box[data-v-f7a62980]{height:%?60?%}.head .header-middle-picker[data-v-f7a62980],\n.head .header-middle-picker-value[data-v-f7a62980]{height:%?60?%}.scroll-view[data-v-f7a62980]{top:%?130?%;width:100%;overflow:auto;z-index:333}",""]),e.exports=t},5750:function(e,t,i){var a=i("4a34");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var n=i("967d").default;n("364d5677",a,!0,{sourceMap:!1,shadowMode:!1})},"749e":function(e,t,i){"use strict";i.r(t);var a=i("0aa2"),n=i.n(a);for(var o in a)["default"].indexOf(o)<0&&function(e){i.d(t,e,(function(){return a[e]}))}(o);t["default"]=n.a},"7fe9":function(e,t,i){"use strict";var a=i("d4d7"),n={allEmployeesInfo:function(e){return(0,a.get)("api/basicData/allEmployeesInfo",e,1)},visitingRecord:function(e){return(0,a.get)("fx/fxVisitMain/visitingRecord",e,3)},customerPagenew:function(e){return(0,a.get)("api/basicData/customer/pagenew",e,1)},visitingNumber:function(e){return(0,a.get)("fx/fxVisitMain/visitingNumber",e,3)}};e.exports=n},8539:function(e,t,i){"use strict";i.d(t,"b",(function(){return a})),i.d(t,"c",(function(){return n})),i.d(t,"a",(function(){}));var a=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-uni-view",{staticClass:"content"},[a("v-uni-view",{staticClass:"head",style:{width:e.windowWidth+"px"}},[a("v-uni-view",{staticClass:"header-left",style:{width:e.headerLeftWidth+"px"}},[a("v-uni-image",{staticClass:"header-left-image",style:{width:e.headerLeftImageWidth+"px",height:e.headerLeftImageWidth+"px"},attrs:{src:i("37b9"),mode:""},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.goBack.apply(void 0,arguments)}}})],1),a("v-uni-view",{staticClass:"header-middle",style:{width:e.headerMiddleWidth+"px"}},[a("v-uni-picker",{staticClass:"header-middle-picker",style:{width:e.headerMiddleWidth+"px"},attrs:{mode:"date",value:e.startDate},on:{change:function(t){arguments[0]=t=e.$handleEvent(t),e.bindDateChange.apply(void 0,arguments)}}},[a("v-uni-view",{staticClass:"header-middle-picker-value",style:{width:e.headerMiddleWidth+"px",height:"60rpx"}},[a("v-uni-image",{staticClass:"header-middle-picker-left",style:{width:e.headerMiddlePickerLeftWidth+"px",height:e.headerMiddlePickerLeftWidth+"px"},attrs:{src:"/static/sjx.png"}}),a("v-uni-text",{style:{marginLeft:e.headerMiddlePickerText+"px",marginRight:e.headerMiddlePickerText+"px",fontSize:e.headerMiddlePickerText+"px",lineHeight:e.headerHeight+"px"}},[e._v(e._s(e.startDate))]),a("v-uni-image",{staticClass:"header-middle-picker-right",style:{width:e.headerMiddlePickerLeftWidth+"px",height:e.headerMiddlePickerLeftWidth+"px"},attrs:{src:"/static/sjx.png"}})],1)],1)],1),a("v-uni-view",{staticClass:"header-right",style:{width:e.headerRightWidth+"px",height:"60rpx"}},[a("v-uni-view",{staticClass:"header-right-box",style:{width:e.headerHeight+10+"px",paddingRight:"10px"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.toSalesman.apply(void 0,arguments)}}},[a("v-uni-image",{staticClass:"header-right-image",style:{width:e.headerRightImageWidth+"px",height:e.headerRightImageWidth+"px"},attrs:{src:"/static/img/comIcon/khzl.png"}}),a("v-uni-text",{staticClass:"header-right-text",style:{fontSize:e.headerRightfontSize+"px",lineHeight:e.headerMiddlePickerText+"px"}},[e._v("员工列表")])],1)],1)],1),a("v-uni-view",{staticClass:"scroll-view"},[a("v-uni-scroll-view",{staticClass:"scroll-view-box",style:{width:e.windowWidth-15+"px"},attrs:{"scroll-x":"true","scroll-left":e.scrollLeft}},e._l(e.allEmployeesInfoList,(function(t,i){return a("v-uni-view",{key:i,class:["scroll-view-item",e.scrollViewItemIndex===i?"scroll-view-item-active":""],style:{marginLeft:"4px",marginRight:"4px"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.OnScrollViewItem(i)}}},[a("v-uni-view",{staticClass:"scroll-view-item-left"},[a("v-uni-image",{staticClass:"scroll-view-item-left-image",attrs:{mode:"widthFix",src:"/static/img/comIcon/khzl.png"}})],1),a("v-uni-view",{staticClass:"scroll-view-item-right"},[a("v-uni-view",{staticClass:"scroll-view-item-right-box"},[a("v-uni-view",{staticClass:"scroll-view-item-right-row scroll-view-item-right-row1"},[a("v-uni-text",{class:["scroll-view-item-right-row-f1",e.scrollViewItemIndex===i?"scroll-view-item-right-row-f0":""]},[e._v(e._s(t.name))]),a("v-uni-text",{class:["scroll-view-item-right-row-f2",e.scrollViewItemIndex===i?"scroll-view-item-right-row-f0":""]},[e._v("业务员")])],1),a("v-uni-view",{staticClass:"scroll-view-item-right-row"},[a("v-uni-text",{class:["scroll-view-item-right-row-f3",e.scrollViewItemIndex===i?"scroll-view-item-right-row-f0":""]},[e._v("拜访数："+e._s(t.number))])],1)],1)],1)],1)})),1)],1),e.positionUrl?a("v-uni-web-view",{attrs:{src:e.positionUrl},on:{message:function(t){arguments[0]=t=e.$handleEvent(t),e.handleMapMessage.apply(void 0,arguments)}}}):e._e(),e._e(),e.maskShow?a("v-uni-view",{staticClass:"mask",style:{width:e.windowWidth+"px",height:e.windowHeight+"px"}},[a("v-uni-view",{staticClass:"mask-bottom",style:{width:e.windowWidth+"px",height:e.windowHeight+"px"}}),a("v-uni-view",{staticClass:"mask-box-top",style:{width:e.windowWidth+"px"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.setState.apply(void 0,arguments)}}}),a("v-uni-view",{staticClass:"mask-box-center",style:{width:e.windowWidth+"px",height:"135px"}},[a("v-uni-view",{staticClass:"mask-box-center-left",style:{width:"184px",height:"135px",borderRadius:"5px",marginLeft:"7.5px"}},[a("v-uni-view",{staticClass:"mask-box-center-left-item"},[a("v-uni-image",{staticClass:"mask-box-center-left-item-image",style:{width:"44px",height:"20px",paddingLeft:"12px",paddingRight:"12px"},attrs:{src:"/static/img/comIcon/khzl.png"}}),a("v-uni-text",{staticClass:"mask-box-center-left-item-text",style:{fontSize:"15px",lineHeight:"20px"}},[e._v("掉线")])],1),a("v-uni-view",{staticClass:"mask-box-center-left-item"},[a("v-uni-image",{staticClass:"mask-box-center-left-item-image",style:{width:"44px",height:"20px",paddingLeft:"12px",paddingRight:"12px"},attrs:{src:"/static/img/comIcon/khzl.png"}}),a("v-uni-text",{staticClass:"mask-box-center-left-item-text",style:{fontSize:"15px",lineHeight:"20px"}},[e._v("签到异常")])],1),a("v-uni-view",{staticClass:"mask-box-center-left-item"},[a("v-uni-image",{staticClass:"mask-box-center-left-item-image",style:{width:"44px",height:"20px",paddingLeft:"12px",paddingRight:"12px"},attrs:{src:"/static/img/comIcon/khzl.png"}}),a("v-uni-text",{staticClass:"mask-box-center-left-item-text",style:{fontSize:"15px",lineHeight:"20px"}},[e._v("近期未拜访")])],1),a("v-uni-view",{staticClass:"mask-box-center-left-item"},[a("v-uni-image",{staticClass:"mask-box-center-left-item-image",style:{width:"44px",height:"20px",paddingLeft:"12px",paddingRight:"12px"},attrs:{src:"/static/img/comIcon/khzl.png"}}),a("v-uni-text",{staticClass:"mask-box-center-left-item-text",style:{fontSize:"15px",lineHeight:"20px"}},[e._v("今日已拜访")])],1)],1),a("v-uni-view",{staticClass:"mask-box-center-right",style:{height:"135px"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.setState.apply(void 0,arguments)}}})],1),a("v-uni-view",{staticClass:"mask-box-bottom",style:{height:"21px"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.setState.apply(void 0,arguments)}}})],1):e._e()],1)},n=[]},"96b4":function(e,t,i){"use strict";var a=i("5750"),n=i.n(a);n.a},"9ac3":function(e,t,i){var a=i("509c");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var n=i("967d").default;n("79b3c5b8",a,!0,{sourceMap:!1,shadowMode:!1})},c714:function(e,t,i){"use strict";i.r(t);var a=i("8539"),n=i("749e");for(var o in n)["default"].indexOf(o)<0&&function(e){i.d(t,e,(function(){return n[e]}))}(o);i("96b4"),i("caed");var d=i("828b"),l=Object(d["a"])(n["default"],a["b"],a["c"],!1,null,"f7a62980",null,!1,a["a"],void 0);t["default"]=l.exports},caed:function(e,t,i){"use strict";var a=i("9ac3"),n=i.n(a);n.a}}]);