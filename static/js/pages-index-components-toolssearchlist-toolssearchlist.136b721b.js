(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-index-components-toolssearchlist-toolssearchlist"],{"1ef4":function(e,t,a){"use strict";a.r(t);var s=a("7419"),i=a("6664");for(var n in i)["default"].indexOf(n)<0&&function(e){a.d(t,e,(function(){return i[e]}))}(n);a("5e49");var r=a("828b"),l=Object(r["a"])(i["default"],s["b"],s["c"],!1,null,"48e874ca",null,!1,s["a"],void 0);t["default"]=l.exports},"360a":function(e,t,a){"use strict";a("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s={debounce:function(){var e;return function(t){var a=arguments,s=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300;e&&clearTimeout(e),e=setTimeout((function(){t.apply(s,a)}),i)}},throttle:function(){var e=!0;return function(t){var a=arguments,s=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300;e&&(e=!1,setTimeout((function(){t.apply(s,a),e=!0}),i))}}};t.default=s},"498a":function(e,t,a){var s=a("8ad3");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var i=a("967d").default;i("f9b1923e",s,!0,{sourceMap:!1,shadowMode:!1})},"4dd6":function(e,t,a){"use strict";(function(e){a("6a54");var s=a("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("c223");var i=s(a("9b1b")),n=a("8f59"),r=s(a("360a")),l={computed:(0,i.default)({},(0,n.mapState)(["params"])),data:function(){return{customerList:[],pageNum:1,hasNextPage:!1,inputValue:"",btnhidden:!1,checklist:{},returnArr:[],listdata:[],showMsg:"",tipsTitle:"",apiurl:"",interType:0,eventChannel:null,debounce:null}},components:{},watch:{inputValue:function(){var e=this;this.debounce((function(){e.customerList=[],e.pageNum=1,e.getListdata()}),3e3)}},created:function(){var e=this.getOpenerEventChannel();this.eventChannel=e,this.debounce=r.default.debounce()},methods:{initData:function(){"customer"==this.params.searchtype?(this.tipsTitle="请输入客户名称/拼音/手机号",this.apiurl="api/basicData/customer/select/page",this.showMsg="只能选择一个客户",this.interType=1):"goodstype"==this.params.searchtype?(this.tipsTitle="请输入商品类型",this.apiurl="api/basicData/1/all/listByKhType2",this.showMsg="只能一种商品类型",this.interType=1):"storehouse"==this.params.searchtype?(this.tipsTitle="请输入仓库名称",this.apiurl="api/basicData/organization/page",this.showMsg="只能选择一个仓库",this.interType=1):"employees"==this.params.searchtype?(this.tipsTitle="请输入业务员",this.apiurl="org/sysEmployee/page/",this.showMsg="只能选择一个员工",this.interType=4):"supplier"==this.params.searchtype?(this.tipsTitle="请输入供应商",this.apiurl="api/basicData/supplier/page/",this.showMsg="只能选择一个供应商",this.interType=1):"brand"==this.params.searchtype?(this.tipsTitle="品牌",this.apiurl="api/basedata/dictionnary/page",this.showMsg="只能选择一个品牌",this.interType=1):"organizationInfo"==this.params.searchtype?(this.tipsTitle="请选择仓库",this.apiurl="api/basicData/organizationInfo",this.showMsg="只能选择一个仓库",this.interType=1):"containerCp"==this.params.searchtype?(this.tipsTitle="请选择商品",this.apiurl="api/basicData/containerCp/page",this.showMsg="只能选择一个商品",this.interType=1):"region"==this.params.searchtype?(this.tipsTitle="请选择区域",this.apiurl="api/basedata/dictionnary/list",this.showMsg="只能选择一个区域",this.interType=1):"customersite"==this.params.searchtype&&(this.tipsTitle="请选择工地",this.apiurl="gds/customerSite/page",this.showMsg="只能选择一个工地",this.interType=9)},goBack:function(){uni.navigateBack({delta:1})},getValue:function(e){this.customerList=[],this.pageNum=1,this.inputValue=e.detail.value,this.getListdata()},getListdata:function(){var t,a=this,s=this;t="employees"==this.params.searchtype||"brand"==this.params.searchtype||"customersite"==this.params.searchtype?{pageNum:this.pageNum,pageSize:10,keyword:this.inputValue,orderBy:"a.name"}:{pageNum:this.pageNum,pageSize:10,keyWord:this.inputValue,orderBy:"a.name",isApp:1},"supplier"==this.params.searchtype&&(t.name=this.inputValue,t.keyword=""),"brand"==this.params.searchtype&&(t.name=this.inputValue,t.keyword="",t["status"]=1,t["dictionaryTypeId"]=3),"organizationInfo"==this.params.searchtype&&(delete t.pageNum,delete t.pageSize,delete t.keyWord,delete t.orderBy,t.keyword=this.inputValue,this.isPage=!1),"containerCp"==this.params.searchtype&&(t.allocation=0,t.keyWord=t.keyWord,this.isChecked&&(t.allocation=2),delete t.keyword,delete t.orderBy),"region"==this.params.searchtype&&(t.dictionaryTypeId=10,delete t.pageNum,delete t.pageSize,delete t.keyWord,delete t.orderBy,t.keyword=this.inputValue,this.isPage=!1),"customersite"==this.params.searchtype&&(t.customerId=this.params.customerId,t.state=1),uni.showLoading({title:"加载中",mask:!0}),this.get(s.apiurl,t,s.interType).then((function(i){if(uni.hideLoading(),i.meta.success){var n=[];if(n="organizationInfo"==a.params.searchtype||"region"==a.params.searchtype?i.data:i.data.list,n.length>0){s.hasNextPage=i.data.hasNextPage;for(var r=0;r<n.length;r++)n[r].mobilePhone||(n[r].mobilePhone="暂无电话");1==s.pageNum?s.listdata=n:s.listdata=s.listdata.concat(n),e.log(s.listdata)}else s.listdata=[]}"employees"==a.params.searchtype||"brand"==a.params.searchtype?t.keyword?s.inputValue=t.keyword:s.inputValue="":t.keyWord?s.inputValue=t.keyWord:s.inputValue=""}))},checkChange:function(e,t){this.listdata[t];var a=getCurrentPages(),s=a[a.length-2];s.$vm[this.params.filed]=[this.listdata[t]],s.$vm["selectType"]=this.params.filed,uni.navigateBack({delta:1}),this.eventChannel.emit("customerSelect",[this.listdata[t]])},confirmbtn:function(){if(!this.params.limit&&this.returnArr.length>1)uni.showToast({icon:"none",title:this.showMsg,duration:2e3});else{e.log(this.returnArr);var t=getCurrentPages(),a=t[t.length-2];a.$vm["selectType"]=this.params.filed,a.$vm[this.params.filed]=this.returnArr,uni.navigateBack({delta:1})}}},onLoad:function(){this.initData(),this.getListdata()},onReachBottom:function(){this.hasNextPage?(e.log("11111"),uni.showLoading({title:"玩命加载中...",mask:!0}),this.pageNum++,this.getListdata(),e.log(this.pageNum+"----------"),uni.hideLoading()):uni.showToast({title:"暂无更多数据",duration:2e3,icon:"loading",mask:!0})}};t.default=l}).call(this,a("ba7c")["default"])},"5e49":function(e,t,a){"use strict";var s=a("498a"),i=a.n(s);i.a},6664:function(e,t,a){"use strict";a.r(t);var s=a("4dd6"),i=a.n(s);for(var n in s)["default"].indexOf(n)<0&&function(e){a.d(t,e,(function(){return s[e]}))}(n);t["default"]=i.a},7419:function(e,t,a){"use strict";a.d(t,"b",(function(){return s})),a.d(t,"c",(function(){return i})),a.d(t,"a",(function(){}));var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-uni-view",{staticClass:"contain"},[a("v-uni-view",{staticClass:"com-input"},[a("v-uni-image",{staticClass:"com-icon",attrs:{src:"/static/img/index/search.png"}}),a("v-uni-input",{attrs:{placeholder:e.tipsTitle},on:{confirm:function(t){arguments[0]=t=e.$handleEvent(t),e.getValue.apply(void 0,arguments)}},model:{value:e.inputValue,callback:function(t){e.inputValue=t},expression:"inputValue"}})],1),e.listdata.length?a("v-uni-view",{staticClass:"sel_customerList"},e._l(e.listdata,(function(t,s){return a("v-uni-view",{key:s},[a("v-uni-view",{staticClass:"selbox",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.checkChange(t,s)}}},["customer"==e.params.searchtype?a("v-uni-view",{staticClass:"sel_customerDetail"},[a("v-uni-view",{staticClass:"sel_customerName"},[e._v(e._s(t.name))]),""!=t.mobilePhone?a("v-uni-view",{staticClass:"sel_customerTel"},[a("v-uni-view",{staticClass:"telsty"},[e._v("电话："+e._s(t.mobilePhone))]),a("v-uni-view",{staticClass:"telsty"},[e._v(e._s(t.telephone))])],1):a("v-uni-view",{staticClass:"sel_customerTel"})],1):e._e(),"storehouse"==e.params.searchtype?a("v-uni-view",{staticClass:"sel_customerDetail"},[a("v-uni-view",{staticClass:"sel_customerName"},[e._v(e._s(t.name))]),a("v-uni-view",{staticClass:"sel_customerTel"},[a("v-uni-view",{staticClass:"telsty"},[e._v("所属机构："+e._s(t.orgName))])],1)],1):e._e(),"employees"==e.params.searchtype?a("v-uni-view",{staticClass:"sel_customerDetail"},[a("v-uni-view",{staticClass:"sel_customerName"},[e._v(e._s(t.name))]),a("v-uni-view",{staticClass:"sel_customerTel"},[a("v-uni-view",{staticClass:"telsty"},[e._v("编号："+e._s(t.code))])],1)],1):e._e(),"goodstype"==e.params.searchtype?a("v-uni-view",{staticClass:"sel_customerDetail"},[a("v-uni-view",{staticClass:"sel_customerName"},[e._v(e._s(t.name))]),a("v-uni-view",{staticClass:"sel_customerTel"},[a("v-uni-view",{staticClass:"telsty"},[e._v("编号："+e._s(t.code))])],1)],1):e._e(),"supplier"==e.params.searchtype?a("v-uni-view",{staticClass:"sel_customerDetail"},[a("v-uni-view",{staticClass:"sel_customerName"},[e._v(e._s(t.name))]),a("v-uni-view",{staticClass:"sel_customerTel"},[a("v-uni-view",{staticClass:"telsty"},[e._v("编号："+e._s(t.code))])],1)],1):e._e(),"brand"==e.params.searchtype?a("v-uni-view",{staticClass:"sel_customerDetail"},[a("v-uni-view",{staticClass:"sel_customerName"},[e._v(e._s(t.name))]),a("v-uni-view",{staticClass:"sel_customerTel"},[a("v-uni-view",{staticClass:"telsty"},[e._v("编号："+e._s(t.code))])],1)],1):e._e(),"organizationInfo"==e.params.searchtype?a("v-uni-view",{staticClass:"sel_customerDetail"},[a("v-uni-view",{staticClass:"sel_customerName"},[e._v(e._s(t.name))]),a("v-uni-view",{staticClass:"sel_customerTel"},[a("v-uni-view",{staticClass:"telsty"},[e._v("编号："+e._s(t.code))])],1)],1):e._e(),"containerCp"==e.params.searchtype?a("v-uni-view",{staticClass:"sel_customerDetail"},[a("v-uni-view",{staticClass:"sel_customerName"},[e._v(e._s(t.name))]),a("v-uni-view",{staticClass:"sel_customerTel"},[a("v-uni-view",{staticClass:"telsty"},[e._v("编号："+e._s(t.code))])],1)],1):e._e(),"region"==e.params.searchtype?a("v-uni-view",{staticClass:"sel_customerDetail"},[a("v-uni-text",{staticClass:"sel_customerName"},[e._v(e._s(t.name))])],1):e._e(),"customersite"==e.params.searchtype?a("v-uni-view",{staticClass:"sel_customerDetail"},[a("v-uni-text",{staticClass:"sel_customerName"},[e._v(e._s(t.name))])],1):e._e()],1)],1)})),1):a("v-uni-view",[a("v-uni-image",{staticClass:"nodata",attrs:{src:"/static/img/nodata.png",mode:""}}),a("v-uni-view",{staticClass:"nodata-des"},[e._v("暂无数据")])],1),a("v-uni-view",{staticClass:"blank"})],1)},i=[]},"8ad3":function(e,t,a){var s=a("c86c");t=s(!1),t.push([e.i,".head[data-v-48e874ca]{display:flex;justify-content:space-between}.head uni-image[data-v-48e874ca]{width:%?48?%;height:%?48?%}.head-left[data-v-48e874ca]{margin-left:%?20?%;padding-right:%?35?%}.header-right[data-v-48e874ca]{width:20%}.search-input[data-v-48e874ca]{width:%?679?%;margin:%?10?% auto}.sel_customerList[data-v-48e874ca]{margin-top:%?20?%;padding:0 %?30?%;background:#fff;box-sizing:border-box}.selbox[data-v-48e874ca]{display:flex;justify-content:flex-start;align-items:center;padding:%?35?% 0 %?25?% 0;height:%?120?%;border-bottom:1px solid #f0f0f0}.check[data-v-48e874ca]{width:%?44?%;height:%?44?%;margin-top:%?-80?%}.sel_customerTel[data-v-48e874ca]{display:flex;color:#333;justify-content:flex-start;flex-wrap:wrap;margin-top:%?10?%}.sel_customerDetail[data-v-48e874ca]{margin-left:%?20?%}.sel_customerName[data-v-48e874ca]{color:#333;font-size:%?32?%}.telsty[data-v-48e874ca]{margin-top:%?24?%;color:#666\r\n\t/* font-size: 28upx; */}.sel_customerTel uni-image[data-v-48e874ca]{width:%?45?%;height:%?45?%;vertical-align:middle}.sel_customerTel uni-view[data-v-48e874ca]{margin-right:%?30?%;font-size:%?28?%}",""]),e.exports=t}}]);