(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-index-visitorRecord-businessProcessing-informationAcquisition-index"],{"0483":function(t,e,i){"use strict";(function(t){i("6a54"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("64aa");var n={name:"UniList","mp-weixin":{options:{multipleSlots:!1}},data:function(){return{}},props:{enableBackToTop:{type:[Boolean,String],default:!1},scrollY:{type:[Boolean,String],default:!0},isAndroid:{type:Boolean,default:function(){return!0}},scrollTop:{type:Number,default:function(){return 0}},scrollIntoView:{type:String,default:function(){return""}}},created:function(){this.pullDown={threshold:95,maxHeight:200,callRefresh:"onrefresh",callPullingDown:"onpullingdown",refreshSelector:".uni-refresh"},this.height=0,this.canPullDown=!1,this.refreshInstance={}},methods:{scroll:function(t){var e;e=this.isAndroid?-t.contentOffset.y:t.detail.scrollTop,this.$emit("scroll",e)},loadMore:function(t){this.$emit("scrolltolower")},ontouchstart:function(e){this.canPullDown?(this.height=0,this.touchStartY=e.touches[0].pageY||e.changedTouches[0].pageY,this._updateRefresh(0),this.refreshInstance.callMethod("onchange",!0)):t.log("canPullDown",this.canPullDown)},ontouchmove:function(t){if(this.canPullDown){this.height;var e=t.touches[0].pageY||t.changedTouches[0].pageY,i=e-this.touchStartY;i>this.pullDown.maxHeight||(this._updateRefresh(i),i=i<this.pullDown.maxHeight?i:this.pullDown.maxHeight,this.height=i,this.refreshInstance.callMethod(this.pullDown.callPullingDown,{height:i}))}},ontouchend:function(t){this.canPullDown&&(this.refreshInstance.callMethod("onchange",!1),this.height>this.pullDown.threshold?refreshInstance.callMethod(this.pullDown.callRefresh):this._updateRefresh(0))},_updateRefresh:function(t){this.refreshInstance.setStyle({height:t})}}};e.default=n}).call(this,i("ba7c")["default"])},"0825":function(t,e,i){"use strict";i.r(e);var n=i("0483"),a=i.n(n);for(var o in n)["default"].indexOf(o)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(o);e["default"]=a.a},"0a06":function(t,e,i){"use strict";var n=i("d4d7"),a={fxVisitCustomerPage:function(t){return(0,n.get)("fx/fxVisitCustomer/page",t,3)},fxVisitMainSave:function(t){return(0,n.post)("fx/fxVisitMain/save",t,3)},fxVisitCustomerCollectCoordinate:function(t){return(0,n.post)("fx/fxVisitCustomer/collectCoordinate",t,3)},fxVisitFilesImgCollection:function(t){return(0,n.post)("fx/fxVisitFiles/imgCollection",t,3)},fxVisitFilesExceptionReport:function(t){return(0,n.post)("fx/fxVisitFiles/exceptionReport",t,3)},getFxVisitMain:function(t,e){return(0,n.get)("fx/fxVisitMain/"+t,e,3)},fxVisitMainVisitingRecord:function(t){return(0,n.get)("fx/fxVisitMain/visitingRecord",t,3)},fxVisitMainVisitingDetails:function(t){return(0,n.get)("fx/fxVisitMain/visitingDetails",t,3)},fxVisitCustomerCustomerList:function(t){return(0,n.get)("fx/fxVisitCustomer/customerList",t,3)},fxVisitFilesDelete:function(t){return(0,n.post)("fx/fxVisitFiles/delete?ids="+t,null,3)},fxVisitCustomerImport:function(){return(0,n.post)("fx/fxVisitCustomer/customerImport",null,3)},fxVisitCustomerTargetDeleteSaveOrUpdate:function(t){return(0,n.post)("fx/fxVisitCustomerTarget/saveOrUpdate",t,3)},fxVisitCustomerTargetDelete:function(t){return(0,n.post)("fx/fxVisitCustomerTarget/delete?id="+t.id,null,3)},findOrderTargetByDate:function(t){return(0,n.get)("fx/fxVisitCustomerTarget/findOrderTargetByDate",t,3)},fxVisitCustomerTargetList:function(t){return(0,n.get)("fx/fxVisitCustomerTarget/list",t,3)},fxVisitCustomerTargetBatchAddTarget:function(t){return(0,n.post)("fx/fxVisitCustomerTarget/batchAddTarget",t,3)},findOrderTargetByDifDate:function(t){return(0,n.get)("fx/fxVisitCustomerTarget/findOrderTargetByDifDate",t,3)},updateSort:function(t){return(0,n.get)("fx/fxVisitCustomerTarget/updateSort",t,3)},dictionnary:function(t){return(0,n.get)("api/basedata/dictionnary/page",t,1)},category:function(t){return(0,n.get)("fx/fxVisitMain/category",t,3)},fxVisitOption:function(t){return(0,n.post)("fx/fxVisitOption",t,3)},checkCustomer:function(t){return(0,n.get)("dat/datCustomer/checkCustomer",t,9)},collectMainPage:function(t){return(0,n.get)("collect/collectMain/page",t,9)},collectMainSave:function(t){return(0,n.post)("collect/collectMain/save",t,9)},collectMainDelete:function(t){return(0,n.get)("collect/collectMain/delete",t,9)},getCollectMainById:function(t){return(0,n.get)("collect/collectMain/findInfo",t,9)},collectDetailDelete:function(t){return(0,n.get)("collect/collectDetail/delete",t,9)},fxVisitCustomerDelete:function(t){return(0,n.get)("fx/fxVisitCustomer/delete",t,3)},customerNameUnite:function(t){return(0,n.get)("fx/fxVisitMain/customerNameUnite",t,3)}};t.exports=a},"1b5b":function(t,e,i){var n=i("c86c");e=n(!1),e.push([t.i,".inside-right[data-v-2b0b78f6]{flex:2}.middle-select-mask[data-v-2b0b78f6]{position:absolute;top:0;bottom:0;left:0;right:0}.order-item-bottom[data-v-2b0b78f6]{border-top-width:1px;border-top-style:solid;border-top-color:#eee}.bottom-fir[data-v-2b0b78f6]{position:relative;border-top-width:0}.bottom-icon[data-v-2b0b78f6]{position:absolute;top:%?20?%;right:%?-8?%;width:%?40?%;height:%?40?%}.bottom-row[data-v-2b0b78f6]{display:flex;align-items:center;justify-content:center}.bottom-add[data-v-2b0b78f6]{width:%?194?%;height:%?64?%;margin-top:%?50?%;border-radius:%?30?%;text-align:center;line-height:%?64?%;font-size:%?26?%;color:#fff;background-color:#ffb822}.bottom-input-value[data-v-2b0b78f6]{padding-right:%?10?%;padding-left:%?10?%;width:%?146?%}.order-item[data-v-2b0b78f6]{padding-bottom:%?20?%;padding-left:%?20?%;padding-right:%?20?%}.middle-item[data-v-2b0b78f6]{position:relative}.middle-select-picker2[data-v-2b0b78f6]{flex:1;height:40px;padding-left:0}",""]),t.exports=e},2705:function(t,e,i){"use strict";i.r(e);var n=i("cbe8"),a=i("ba29");for(var o in a)["default"].indexOf(o)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(o);var s=i("828b"),l=Object(s["a"])(a["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],void 0);e["default"]=l.exports},3372:function(t,e,i){var n=i("d755");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var a=i("967d").default;a("3822b5ba",n,!0,{sourceMap:!1,shadowMode:!1})},"3a01":function(t,e,i){var n=i("f269");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var a=i("967d").default;a("abb37eb8",n,!0,{sourceMap:!1,shadowMode:!1})},"4bf6":function(t,e,i){"use strict";i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return a})),i.d(e,"a",(function(){}));var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-scroll-view",{staticClass:"uni-list",attrs:{enableBackToTop:t.enableBackToTop,"scroll-y":t.scrollY,"scroll-top":t.scrollTop,"scroll-into-view":t.scrollIntoView},on:{scroll:function(e){arguments[0]=e=t.$handleEvent(e),t.scroll.apply(void 0,arguments)},scrolltolower:function(e){arguments[0]=e=t.$handleEvent(e),t.loadMore.apply(void 0,arguments)}}},[t._t("default")],2)},a=[]},"55dd":function(t,e,i){"use strict";var n=i("d484"),a=i.n(n);a.a},6860:function(t,e,i){"use strict";i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return a})),i.d(e,"a",(function(){}));var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"contain"},[i("uni-list",{staticClass:"rollingArea",attrs:{enableBackToTop:!0,"scroll-y":!0,isAndroid:t.isAndroid},on:{scrolltolower:function(e){arguments[0]=e=t.$handleEvent(e),t.loadMore()}}},[i("uni-cell",{staticClass:"middle-item",attrs:{isAndroid:t.isAndroid}},[i("v-uni-text",{staticClass:"middle-des"},[t._v("单据日期：")]),i("v-uni-view",{staticClass:"middle-select"},[i("v-uni-picker",{staticClass:"middle-select-picker",attrs:{mode:"date",value:t.billDate,disabled:t.isComplete},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.dateChange.apply(void 0,arguments)}}},[i("v-uni-text",{staticClass:"middle-select-text"},[t._v(t._s(t.billDate))])],1),i("v-uni-image",{staticClass:"middle-select-image",attrs:{src:"/static/img/outNote/data.png",mode:""}})],1),i("v-uni-view",{staticClass:"middle-line"})],1),i("uni-cell",{staticClass:"middle-item",attrs:{isAndroid:t.isAndroid}},[i("v-uni-text",{staticClass:"middle-des"},[t._v("客户：")]),i("v-uni-view",{staticClass:"middle-select"},[i("v-uni-input",{staticClass:"middle-select-input",attrs:{type:"text",placeholder:"点击选择客户",disabled:!0},model:{value:t.customerName,callback:function(e){t.customerName=e},expression:"customerName"}}),i("v-uni-image",{staticClass:"middle-select-image",attrs:{src:"/static/img/outNote/right.png"}}),i("div",{staticClass:"middle-select-mask",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.selectCustomer.apply(void 0,arguments)}}})],1),i("v-uni-view",{staticClass:"middle-line"})],1),i("uni-cell",{staticClass:"middle-item",attrs:{isAndroid:t.isAndroid}},[i("v-uni-text",{staticClass:"middle-des"},[t._v("备注：")]),i("v-uni-view",{staticClass:"middle-select"},[i("v-uni-input",{staticClass:"middle-select-input",attrs:{type:"text",placeholder:"输入备注",disabled:t.isComplete},model:{value:t.remarks,callback:function(e){t.remarks=e},expression:"remarks"}})],1),i("v-uni-view",{staticClass:"middle-line"})],1),i("uni-cell",{staticClass:"middle-item",attrs:{isAndroid:t.isAndroid}},[i("v-uni-text",{staticClass:"middle-des"},[t._v("商品选择：")]),i("v-uni-view",{staticClass:"middle-select"},[i("v-uni-input",{staticClass:"middle-select-input",attrs:{"confirm-type":"search",placeholder:"商品名称/货号/条码",disabled:t.isComplete,focus:t.searchFocus},on:{confirm:function(e){arguments[0]=e=t.$handleEvent(e),t.closeKeyboard.apply(void 0,arguments)},blur:function(e){arguments[0]=e=t.$handleEvent(e),t.getValue.apply(void 0,arguments)},focus:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.closeDialogMask.apply(void 0,arguments)}},model:{value:t.searchValue,callback:function(e){t.searchValue=e},expression:"searchValue"}}),i("v-uni-text",{staticClass:"middle-select-add",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.selectCommodityList.apply(void 0,arguments)}}},[t._v("添加商品")])],1),i("v-uni-view",{staticClass:"middle-line"})],1),i("uni-cell",{staticClass:"sweepCode",attrs:{isAndroid:t.isAndroid}},[i("v-uni-view",{staticClass:"sweepCode-box",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.selectCommodityList.apply(void 0,arguments)}}},[i("v-uni-image",{staticClass:"sweepCode-image",attrs:{src:"/static/img/outNote/add.png",mode:""}})],1),i("v-uni-view",{staticClass:"sweepCode-box",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.scanning.apply(void 0,arguments)}}},[i("v-uni-image",{staticClass:"sweepCode-image",attrs:{src:"/static/img/outNote/cann.png",mode:""}})],1)],1),t._l(t.shopList,(function(e,n){return i("uni-cell",{key:e.id+"_"+n,staticClass:"order-item",attrs:{isAndroid:t.isAndroid}},[i("v-uni-view",{staticClass:"order-item-top"},[i("v-uni-image",{staticClass:"order-item-left",attrs:{src:e.picture,mode:""},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.previewPhoto(n)}}}),i("v-uni-view",{staticClass:"order-item-right"},[i("v-uni-view",{staticClass:"order-inside inside-left",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.closeOpen(e,n)}}},[i("v-uni-text",{staticClass:"order-fir-left fir-left-name"},[t._v(t._s(t.formatText(e.goodsName)))]),i("v-uni-text",{staticClass:"order-sec-left"},[t._v("库存："+t._s(e.quantity?e.quantity:0)+t._s(e.smallUnit))]),i("v-uni-text",{staticClass:"order-sec-left"},[t._v("条码："+t._s(e.barCode)+" ")])],1),i("v-uni-view",{staticClass:"order-inside inside-right"},[i("v-uni-text",{staticClass:"order-sec-right",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.deleteItem(n)}}},[t._v("删除")])],1)],1)],1),e.child.length?i("v-uni-view",{staticClass:"order-item-bottom"},t._l(e.child,(function(e,a){return i("v-uni-view",{key:a,staticClass:"bottom-fir"},[i("v-uni-view",{staticClass:"bottom-input"},[i("v-uni-text",{staticClass:"bottom-des"},[t._v("件数")]),i("v-uni-input",{staticClass:"bottom-input-value",attrs:{type:"number",disabled:t.isComplete},on:{blur:function(e){arguments[0]=e=t.$handleEvent(e),t.setQuantity(e,n,a,"itemQuantity")},confirm:function(e){arguments[0]=e=t.$handleEvent(e),t.setQuantity(e,n,a,"itemQuantity")}},model:{value:e.itemQuantity,callback:function(i){t.$set(e,"itemQuantity",i)},expression:"item2.itemQuantity"}})],1),i("v-uni-view",{staticClass:"bottom-input"},[i("v-uni-text",{staticClass:"bottom-des"},[t._v("散数")]),i("v-uni-input",{staticClass:"bottom-input-value",attrs:{type:"number",disabled:t.isComplete},on:{blur:function(e){arguments[0]=e=t.$handleEvent(e),t.setQuantity(e,n,a,"scatteredQuantity")},confirm:function(e){arguments[0]=e=t.$handleEvent(e),t.setQuantity(e,n,a,"scatteredQuantity")}},model:{value:e.scatteredQuantity,callback:function(i){t.$set(e,"scatteredQuantity",i)},expression:"item2.scatteredQuantity"}})],1),i("v-uni-view",{staticClass:"bottom-input"},[i("v-uni-text",{staticClass:"bottom-des"},[t._v("批次")]),i("v-uni-input",{staticClass:"bottom-input-value",attrs:{type:"text",placeholder:"请输入",disabled:t.isComplete},model:{value:e.batchNo,callback:function(i){t.$set(e,"batchNo",i)},expression:"item2.batchNo"}})],1),i("v-uni-view",{staticClass:"bottom-input"},[i("v-uni-text",{staticClass:"bottom-des"},[t._v("生产日期")]),i("v-uni-picker",{staticClass:"middle-select-picker2",attrs:{mode:"date",value:e.productionDate,disabled:t.isComplete},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.dateChange(e,n,a)}}},[i("v-uni-input",{staticClass:"bottom-input-value",attrs:{type:"text",placeholder:"请输入",disabled:!0,value:t.formatDate(e.productionDate)}})],1)],1),i("v-uni-image",{staticClass:"bottom-icon",attrs:{src:"/static/img/customerfiles/del.png"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.deleteItem(n,a)}}})],1)})),1):t._e(),i("v-uni-view",{staticClass:"bottom-row"},[i("v-uni-text",{staticClass:"bottom-add",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.addTo(n)}}},[t._v("添加")])],1)],1)}))],2),i("v-uni-view",{staticClass:"foot"},[i("v-uni-text",{staticClass:"foot-right",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.creatNewDocm.apply(void 0,arguments)}}},[t._v("保存")])],1)],1)},a=[]},8824:function(t,e,i){"use strict";i("6a54"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("fd3c"),i("c223"),i("aa9c"),i("5ef2"),i("20f3");var n={previewPhoto:function(t,e){var i=e.map((function(t,e){return t.picture}));uni.previewImage({current:i[t],urls:i})},unique:function(t,e){for(var i=t.concat(e),n={},a=[],o=0;o<i.length;o++)n["s_"+i[o].id]=i[o];for(var s in n)a.push(n[s]);return a},IsPicture:function(t){if(t&&t.indexOf(".")>-1){var e=t.lastIndexOf("."),i=t.substring(e,t.length)+"|";if(i=i.toLowerCase(),".jpeg|.gif|.jpg|.png|.bmp|.pic|.svg|".indexOf(i)>-1)return!0}return!1}};e.default=n},"8a71":function(t,e,i){"use strict";i.r(e);var n=i("6860"),a=i("a0a9");for(var o in a)["default"].indexOf(o)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(o);i("ee3b"),i("55dd");var s=i("828b"),l=Object(s["a"])(a["default"],n["b"],n["c"],!1,null,"2b0b78f6",null,!1,n["a"],void 0);e["default"]=l.exports},"8b10":function(t,e,i){"use strict";var n=i("3a01"),a=i.n(n);a.a},"8bb6":function(t,e,i){"use strict";i("6a54"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("64aa");var n={name:"UniCell",props:{cellItem:{type:Object,default:function(){return{}}},cellIndex:{type:Number,default:function(){return 0}},isAndroid:{type:Boolean,default:function(){return!0}}},methods:{myclick:function(t){this.$emit("cellTap",{e:t,item:this.cellItem,index:this.cellIndex})}}};e.default=n},"906f":function(t,e,i){"use strict";i.r(e);var n=i("4bf6"),a=i("0825");for(var o in a)["default"].indexOf(o)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(o);i("8b10");var s=i("828b"),l=i("dadf"),d=Object(s["a"])(a["default"],n["b"],n["c"],!1,null,"f68df4d2",null,!1,n["a"],void 0);"function"===typeof l["a"]&&Object(l["a"])(d),e["default"]=d.exports},a0a9:function(t,e,i){"use strict";i.r(e);var n=i("ad2a"),a=i.n(n);for(var o in n)["default"].indexOf(o)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(o);e["default"]=a.a},ad2a:function(t,e,i){"use strict";i("6a54");var n=i("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("bf0f"),i("2797"),i("aa9c"),i("c223"),i("c9b5"),i("ab80"),i("fd3c"),i("dd2b");var a=n(i("b7c7")),o=n(i("9b1b")),s=n(i("8824")),l=i("8f59"),d=n(i("63d3")),r=i("d4d7"),c=n(i("906f")),u=n(i("2705")),f=(n(i("fa47")),n(i("0a06"))),h={components:{uniList:c.default,uniCell:u.default},data:function(){return{isAndroid:!1,searchFocus:!1,editDateState:!1,isComplete:!1,billId:0,billDate:"",customer:{},customerId:"",customerName:"",remarks:"",total:0,searchValue:"",hasNextPage:!1,pageNum:1,shopList:[],shopMap:{},visitSignIn:null}},created:function(){var t=this;this.visitSignIn=uni.getStorageSync("visitSignIn"),this.loadData(),uni.getSystemInfo({success:function(e){"android"===e.platform&&(t.isAndroid=!0)}}),this.$scope.$getAppWebview().setStyle({softinputNavBar:"block"})},onReady:function(){},updated:function(){},onLoad:function(t){this.customerId=t.khId,this.customerName=t.customerName},onShow:function(){},watch:{customer:function(t,e){t.length?(this.customerId=t[0].id,this.customerName=t[0].name):(this.customerId="",this.customerName="")}},computed:{formatText:function(){return function(t){return t&&t.length?t.length>16?t.substring(0,16)+"...":t:""}},formatDate:function(){return function(t){return t?d.default.formatDate(t):""}}},methods:(0,o.default)((0,o.default)({},(0,l.mapMutations)(["setparams"])),{},{goBack:function(){uni.navigateBack({delta:1})},loadData:function(){var t=this,e={fxId:t.visitSignIn.signInId,pageNum:t.pageNum,pageSize:10};f.default.getCollectMainById(e).then((function(e){if(e.meta.success){var i;t.billDate=d.default.formatDate(e.data.createDate),t.billId=e.data.id,t.remarks=e.data.remark,t.hasNextPage=e.data.pageInfo.hasNextPage;var n={};e.data.pageInfo.list.forEach((function(t){n[""+t.goodsId]=!0,t.child=t.list,delete t.list})),t.shopMap=n,1===t.pageNum?t.shopList=e.data.pageInfo.list:(i=t.shopList).push.apply(i,(0,a.default)(e.data.pageInfo.list))}else uni.showToast({title:e.meta.message,icon:"none",duration:1e3})}))},loadMore:function(){this.hasNextPage&&(this.pageNum++,this.loadData())},dateChange:function(t,e,i){if(void 0===e)this.billDate=t.detail.value;else{var n=this.shopList[e];n.child[i].productionDate=t.detail.value,this.$set(this.shopList,e,n)}},selectCustomer:function(){},getValue:function(t){uni.hideKeyboard(),this.focusTwo=!1,this.getCommodity(t.detail.value).then((function(){})).then((function(){uni.hideKeyboard()}))},closeKeyboard:function(t){uni.hideKeyboard()},closeDialogMask:function(t){this.searchValue=""},selectCommodityList:function(){var t=this;if(uni.hideKeyboard(),this.customerId){var e=this;this.setparams({khId:this.customerId,type:1,billtype:"salesPutUp",interface:function(t){return(0,r.get)("api/basicData/goods/page",t,1)},convert:function(t){return(0,o.default)((0,o.default)({},t),{},{goodsName:t.name})},fieldConfig:{quantity:0,availableQuantity:0},inputValue:"",inputList:function(){var e=[];return t.shopList.forEach((function(t){e.push((0,o.default)((0,o.default)({},t),{},{id:t.goodsId,scatteredQuantity:1}))})),e}(),useVuex:!0,showOther:!1,isBuy:!1,quantityControl:!1,outputCallBack:function(t){if(t.length){var i=[];t.forEach((function(t){e.shopMap[""+t.goodsId]||(t.goodsId||(t.goodsId=t.id),t.child||(t.child=[]),0===t.child.length&&(t.child=[{hwCode:"",goodsId:t.id,itemQuantity:0,scatteredQuantity:0,produceDate:"",batchNo:"",remark:""}]),e.shopMap[""+t.goodsId]=!0,i.push((0,o.default)({},t)))})),e.shopList=[].concat((0,a.default)(e.shopList),i)}}}),uni.navigateTo({url:"../../../commodityList/commodityList?ouotNoteExclusive=1&isBuy=1&billTypeCode=202&documentType=202&fillDate="+new Date(this.billDate).getTime()})}else uni.showToast({icon:"none",title:"请选择客户",duration:2e3})},scanning:function(){var t=this;this.customerId?uni.scanCode({success:function(e){t.getCommodity(e.result.toString())}}):uni.showToast({icon:"none",title:"请选择客户",duration:2e3})},getCommodity:function(t){var e=this,i=this;return(0,r.get)("api/basicData/goods/page",{pageNum:1,pageSize:10,keyword:t},1).then((function(t){var n=t.data&&t.data.list||[];if(t.meta.success&&n.length>0){var o=[];n.map((function(t,e){i.shopMap[""+t.id]||(t.picture&&s.default.IsPicture(t.picture)||(t.picture="../../../static/img/outNote/photo.png"),o.push(Object.assign({},t,{goodsName:t.name,goodsId:t.id,child:[{goodsId:t.id,itemQuantity:0,scatteredQuantity:0,batchNo:"",productionDate:"",remark:""}]})))})),e.shopList=[].concat(o,(0,a.default)(e.shopList))}else uni.showToast({title:"暂无该商品",icon:"none"})}))},previewPhoto:function(t){s.default.previewPhoto(t,this.shopList)},deleteItem:function(t,e){var i=this,n={},a=this.shopList[t];if(void 0!==e){if(n.ids=a.child[e].id,!n.ids)return 0===a.child.length&&0===e?a.child.splice(e,1,{itemQuantity:0,scatteredQuantity:0,batchNo:"",productionDate:"",remark:""}):a.child.splice(e,1),void this.$set(this.shopList,t,a)}else if(n.cid=a.cid,n.goodsId=a.goodsId,!n.cid)return this.shopList.splice(t,1),void delete this.shopMap[a.goodsId];f.default.collectDetailDelete(n).then((function(n){n.meta.success?(uni.showToast({title:"删除成功",icon:"none",duration:1e3}),void 0!==e?(0===a.child.length&&0===e?a.child.splice(e,1,{itemQuantity:0,scatteredQuantity:0,batchNo:"",productionDate:"",remark:""}):a.child.splice(e,1),i.$set(i.shopList,e,a)):(i.shopList.splice(t,1),delete i.shopMap[a.goodsId])):uni.showToast({title:n.meta.message,icon:"none",duration:1e3})}))},setQuantity:function(t,e,i,n){var a=this.shopList[e];a.child[i][n]=+t.detail.value,this.$set(this.shopList,e,a)},addTo:function(t){var e=this.shopList[t];e.child||(e.child=[]),e.child.push({itemQuantity:0,scatteredQuantity:0,batchNo:"",productionDate:"",remark:""}),this.$set(this.shopList,t,e)},creatNewDocm:function(){var t=[];this.shopList.forEach((function(e){e.child.forEach((function(i){var n={id:i.id,goodsId:e.goodsId,itemQuantity:i.itemQuantity,scatteredQuantity:i.scatteredQuantity,batchNo:i.batchNo,productionDate:i.productionDate,remark:i.remark};t.push(n)}))}));var e={fxId:this.visitSignIn.signInId,id:this.billId,fillDate:this.billDate,customerId:this.customerId,remark:this.remarks,list:t};f.default.collectMainSave(e).then((function(t){t.meta.success?uni.showToast({title:"保存成功",icon:"none",duration:1e3}):uni.showToast({title:t.meta.message,icon:"none",duration:1e3})}))}})};e.default=h},ba29:function(t,e,i){"use strict";i.r(e);var n=i("8bb6"),a=i.n(n);for(var o in n)["default"].indexOf(o)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(o);e["default"]=a.a},cbe8:function(t,e,i){"use strict";i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return a})),i.d(e,"a",(function(){}));var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.myclick.apply(void 0,arguments)}}},[t._t("default")],2)},a=[]},d484:function(t,e,i){var n=i("1b5b");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var a=i("967d").default;a("51bec67c",n,!0,{sourceMap:!1,shadowMode:!1})},d755:function(t,e,i){var n=i("c86c");e=n(!1),e.push([t.i,"uni-page-body[data-v-2b0b78f6]{background-color:#f6f6f6}body.?%PAGE?%[data-v-2b0b78f6]{background-color:#f6f6f6}.head[data-v-2b0b78f6]{display:flex;justify-content:space-between;font-weight:590}.header-left[data-v-2b0b78f6]{width:20%}.header-middle[data-v-2b0b78f6]{width:25%}.head uni-image[data-v-2b0b78f6]{width:%?48?%;height:%?48?%;margin:%?7?% %?15?%;display:block}.header-right[data-v-2b0b78f6]{display:flex;\r\n\t/* width: 28%; */width:31%}.middle[data-v-2b0b78f6]{padding:%?40?%;margin-top:%?40?%}.item[data-v-2b0b78f6]{display:flex;height:%?80?%;line-height:%?80?%;padding-bottom:%?20?%}.item[data-v-2b0b78f6]:last-child{padding-bottom:0}.middle-des[data-v-2b0b78f6]{font-size:%?32?%;width:%?160?%;text-align:right}.middle-select[data-v-2b0b78f6]{display:flex;justify-content:space-between;background:#f7f6fb;width:%?496?%;font-size:%?30?%;border-radius:5px}uni-picker[data-v-2b0b78f6]{padding-left:%?20?%;width:%?496?%}.middle-select uni-input[data-v-2b0b78f6]{height:%?80?%;line-height:%?80?%;font-size:%?30?%;padding-left:%?20?%}.middle-select uni-text[data-v-2b0b78f6]{color:#ffb822;font-size:%?26?%;width:%?200?%}.middle-select uni-image[data-v-2b0b78f6]{width:%?40?%;height:%?40?%;padding-right:%?20?%;padding-top:%?20?%}.sweepCode[data-v-2b0b78f6]{border-bottom:%?2?% #eee solid;display:flex;justify-content:space-between}.sweepCode uni-image[data-v-2b0b78f6]{width:%?48?%;height:%?48?%;padding:%?26?% %?100?%}.order-item[data-v-2b0b78f6]{padding:%?40?% %?40?% 0 %?40?%}.order-item-top[data-v-2b0b78f6]{\r\n\t/* display: flex; */display:-webkit-box}.order-item-left[data-v-2b0b78f6]{width:%?160?%;height:%?160?%}.order-item-right[data-v-2b0b78f6]{\r\n\t/* flex: 1; */margin-left:%?20?%;display:flex}.order-inside[data-v-2b0b78f6]{display:flex;box-sizing:border-box;flex-direction:column;justify-content:space-between}.inside-left[data-v-2b0b78f6]{width:70%}.inside-right[data-v-2b0b78f6]{width:30%;align-items:flex-end}\r\n\r\n/* .order-fir {\r\n\tdisplay: flex;\r\n\tjustify-content: space-between;\r\n} */.order-fir-left[data-v-2b0b78f6]{font-size:%?32?%;font-weight:500;width:%?350?%}.order-fir-right[data-v-2b0b78f6]{font-size:%?32?%;font-weight:500;display:flex;justify-content:space-between}\r\n\r\n/* \r\n.order-sec {\r\n\tmargin-top: 20upx;\r\n\tdisplay: flex;\r\n\tjustify-content: space-between;\r\n} */.order-sec-left[data-v-2b0b78f6]{font-size:%?28?%;color:grey}.order-sec-right[data-v-2b0b78f6]{font-size:%?28?%;color:#3378ff}.order-item-bottom[data-v-2b0b78f6]{margin-top:%?20?%}.bottom-fir[data-v-2b0b78f6]{padding:%?20?% 0;display:flex;justify-content:space-between;border-bottom:%?1?% solid #eee;border-top:%?1?% solid #eee}.bottom-des[data-v-2b0b78f6]{font-size:%?28?%;color:grey}.bottom-input[data-v-2b0b78f6]{display:flex;align-items:center;flex-direction:column;justify-content:space-between;flex:1}.bottom-input uni-input[data-v-2b0b78f6]{margin-top:%?20?%;font-size:%?32?%;color:#333;text-align:center}.bottom-sec[data-v-2b0b78f6]{height:%?70?%;line-height:%?70?%;display:flex;font-size:%?28?%}.bottom-sec-des[data-v-2b0b78f6]{color:grey}.bottom-sec-input[data-v-2b0b78f6]{height:%?40?%;line-height:%?40?%;margin-top:%?10?%;color:grey;font-size:%?28?%}.bottom-sec-num[data-v-2b0b78f6]{flex:1;text-overflow:ellipsis;word-break:break-all;overflow:hidden}.bottom-sec-switch[data-v-2b0b78f6]{margin-left:%?20?%;display:flex;font-size:%?28?%;line-height:%?40?%;align-items:center}.bottom-sec-switch .switch[data-v-2b0b78f6]{-webkit-transform:scale(.6);transform:scale(.6)}.order-item-foot[data-v-2b0b78f6]{margin-top:%?40?%;border-bottom:%?1?% solid #eee}.foot-des[data-v-2b0b78f6]{margin:0 auto;display:flex;font-size:%?24?%;color:grey;width:20%;justify-content:space-between;padding:%?15?% 0;margin-bottom:%?20?%}.foot-des uni-image[data-v-2b0b78f6]{width:%?17?%;height:%?10?%;margin-top:%?10?%}.footfixed[data-v-2b0b78f6]{display:block;position:fixed;bottom:%?0?%!important;\r\nbottom:%?100?%;\r\nwidth:100%;height:%?100?%;background:#fff;z-index:10}.foot-bg[data-v-2b0b78f6]{display:flex;padding-left:%?40?%;align-items:center}.foot-bg-left[data-v-2b0b78f6]{display:flex;flex:1;font-size:%?32?%;font-weight:500;text-align:left;line-height:%?45?%;flex-direction:column}.foot-bg-left uni-image[data-v-2b0b78f6]{width:%?48?%;height:%?48?%;margin:%?25?% %?20?% 0 %?90?%}.foot-bg-left-text[data-v-2b0b78f6]{font-size:%?24?%;font-weight:400;color:grey;line-height:%?33?%}.foot-bg-right[data-v-2b0b78f6]{width:30%;height:%?100?%;line-height:%?100?%;text-align:center;background:#ffb822;font-size:%?32?%;color:#fff}.foot-bg-left uni-text[data-v-2b0b78f6]{color:red}\r\n\r\n/* 历史售价 */.modal-box[data-v-2b0b78f6]{width:100%;height:100%;position:fixed;background:rgba(51,51,51,.6);top:0;left:0;z-index:999}.modal-body[data-v-2b0b78f6]{width:%?670?%;height:%?970?%;background:#fff;margin:%?200?% auto 0 auto;border-radius:%?10?%}.modal-title[data-v-2b0b78f6]{display:block;width:100%;height:%?120?%;line-height:%?120?%;text-align:center;font-size:%?32?%;font-weight:500;color:#333}.modal-item[data-v-2b0b78f6]{display:flex;font-size:%?28?%;font-weight:400;color:#666;height:%?60?%;line-height:%?60?%;justify-content:space-between;padding:0 %?30?%;height:%?740?%}.modal-item-lef uni-text[data-v-2b0b78f6]:last-child{margin-left:%?30?%}.modal-foot[data-v-2b0b78f6]{height:%?100?%;line-height:%?100?%;text-align:center;border-top:%?1?% solid #eee;font-size:%?28?%;font-weight:400}.popup_overlay[data-v-2b0b78f6]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#000;z-index:1001;-moz-opacity:.8;opacity:.8;filter:alpha(opacity=88)}.popup_content[data-v-2b0b78f6]{position:fixed;top:50%;left:50%;width:%?520?%;height:%?550?%;margin-left:%?-270?%;margin-top:%?-270?%;border:10px solid #fff;background-color:#fff;z-index:1002;overflow:auto;border-radius:%?20?%}.popup_title[data-v-2b0b78f6]{padding-top:%?20?%;width:%?440?%;text-align:center;font-size:%?32?%}.popup_textarea_item[data-v-2b0b78f6]{padding-top:%?5?%;height:%?120?%;width:%?440?%;background-color:#f1f1f1;margin-top:%?30?%;margin-left:%?20?%}.popup_textarea[data-v-2b0b78f6]{width:%?410?%;font-size:%?26?%;margin-left:%?20?%}.popup_button[data-v-2b0b78f6]{color:#fff;background-color:#ffb822;border-radius:%?20?%}.alldiscount[data-v-2b0b78f6]{font-size:%?28?%;font-family:PingFangSC-Regular,PingFang SC;line-height:%?40?%;padding:%?40?%;background-color:#fff;display:flex;align-items:center}.alldiscount uni-input[data-v-2b0b78f6]{font-size:%?28?%;flex:1;text-align:right;margin-left:%?10?%}.gift[data-v-2b0b78f6]{font-size:%?24?%;font-weight:400;color:#ef2f46;line-height:%?33?%;margin-right:%?10?%;padding:%?8?% %?10?%;background:#fef5f4;border-radius:%?2?%}",""]),t.exports=e},dadf:function(t,e,i){"use strict";var n=i("f1bf");e["a"]=n["a"]},ee3b:function(t,e,i){"use strict";var n=i("3372"),a=i.n(n);a.a},f1bf:function(t,e,i){"use strict";(function(t){e["a"]=function(t){(t.options.wxs||(t.options.wxs={}))["refresh"]=function(t){var e={threshold:95,maxHeight:200,callRefresh:"onrefresh",callPullingDown:"onpullingdown",refreshSelector:".uni-refresh"};return t.exports={touchmove:function(t,i){var n=t.instance,a=n.getState();if(a.canPullDown){a.height;var o=t.touches[0].pageY||t.changedTouches[0].pageY,s=o-a.touchStartY;if(!(s>e.maxHeight)){var l=a.refreshInstance;l.setStyle({height:s+"px"}),s=s<e.maxHeight?s:e.maxHeight,a.height=s,l.callMethod(e.callPullingDown,{height:s})}}},touchstart:function(t,i){var n=i.getState();n.refreshInstance=i.selectComponent(e.refreshSelector),n.canPullDown=null!=n.refreshInstance&&void 0!=n.refreshInstance,n.canPullDown&&(n.height=0,n.touchStartY=t.touches[0].pageY||t.changedTouches[0].pageY,n.refreshInstance.setStyle({height:0}),n.refreshInstance.callMethod("onchange",!0))},touchend:function(t,i){var n=t.instance.getState();if(n.canPullDown){n.refreshInstance.callMethod("onchange",!1);var a=n.refreshInstance;n.height>e.threshold?a.callMethod(e.callRefresh):a.setStyle({height:0})}},propObserver:function(t,i,n){e=t}},t.exports}({exports:{}})}}).call(this,i("ba7c")["default"])},f269:function(t,e,i){var n=i("c86c");e=n(!1),e.push([t.i,".uni-list[data-v-f68df4d2]{flex:1;\ndisplay:flex;\nposition:relative;flex-direction:column}",""]),t.exports=e}}]);