(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-memberManagement-editMember"],{1226:function(t,e,a){"use strict";var i=a("91cfe"),n=a.n(i);n.a},"31b6":function(t,e,a){"use strict";a.r(e);var i=a("70b7"),n=a.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(s);e["default"]=n.a},"70b7":function(t,a,i){"use strict";i("6a54");var n=i("f5bd").default;Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,i("c223");var s=n(i("2634")),o=n(i("2fdc")),r=n(i("5de6")),c=n(i("9b1b")),u=n(i("7d4e")),l=i("8f59"),d=i("f55d"),f={data:function(){return{form:{companyName:"",job:"",id:"",khid:"",summary:"",storeId:"",province:"",city:"",county:""},khName:"",storeName:"",address:"",storehouse:[],customer:[],eventChannel:null,isSummitNow:!1}},components:{pickerAdress:u.default},methods:(0,c.default)((0,c.default)({},(0,l.mapMutations)(["setparams"])),{},{customerList:function(){this.setparams({searchtype:"customer",filed:"customer"}),uni.navigateTo({url:"../index/components/toolssearchlist/toolssearchlist"})},warehouseList:function(){this.setparams({searchtype:"storehouse",filed:"storehouse"}),uni.navigateTo({url:"../index/components/toolssearchlist/toolssearchlist"})},changeAddress:function(t){var e=t.data;this.address=Array.prototype.join.call(e||[],"");var a=(0,r.default)(e,3),i=a[0],n=a[1],s=a[2];Object.assign(this.form,{province:i,city:n,county:s})},goback:function(){uni.navigateBack()},getMemberInfo:function(){var t=this;return(0,o.default)((0,s.default)().mark((function e(){var a,i,n,o,r,c,u,l,d,f;return(0,s.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.get("api/member/info/".concat(t.form.id),{},5);case 2:a=e.sent,a.meta.success&&(i=a.data.obj,n=i.companyName,o=i.job,r=i.khid,c=i.summary,u=i.storeId,l=i.province,d=i.city,f=i.county,Object.assign(t.form,{companyName:n,job:o,khid:r,summary:c,storeId:u,province:l,city:d,county:f}),t.address="".concat(l||"").concat(d||"").concat(f||""));case 4:case"end":return e.stop()}}),e)})))()},summit:function(){var t=this;return(0,o.default)((0,s.default)().mark((function a(){var i;return(0,s.default)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!t.isSummitNow){a.next=2;break}return a.abrupt("return");case 2:if(t.form.khid){a.next=5;break}return uni.showToast({title:"请选择客户",icon:"none",duration:2e3}),a.abrupt("return");case 5:if(t.form.storeId){a.next=8;break}return uni.showToast({title:"请选择仓库",icon:"none",duration:2e3}),a.abrupt("return");case 8:return t.isSummitNow=!0,uni.showLoading({title:"修改中"}),a.next=12,t.post("api/member/info/update",t.form,5);case 12:return i=a.sent,a.next=15,(0,d.wait)(300);case 15:if(t.isSummitNow=!1,uni.hideLoading(),!i.meta.success){a.next=27;break}return uni.showToast({title:"修改成功",duration:2e3}),a.next=21,(0,d.wait)(500);case 21:return t.eventChannel.emit("refreshList"),a.next=24,(0,d.wait)(300);case 24:uni.navigateBack(),a.next=28;break;case 27:uni.showToast({title:e.meta.message,icon:"none",duration:2e3});case 28:case"end":return a.stop()}}),a)})))()}}),watch:{customer:function(t){null!=t&&t.length>0&&(this.form.khid=t[0].id,this.khName=t[0].name)},storehouse:function(t){null!=t&&t.length>0&&(this.storeName=t[0].name,this.form.storeId=t[0].id)}},onLoad:function(t){var e=t.id,a=t.khName,i=t.storeName;this.form.id=e,this.khName=a,this.storeName=i;var n=this.getOpenerEventChannel();this.eventChannel=n,this.getMemberInfo()}};a.default=f},"91cfe":function(t,e,a){var i=a("e576");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("967d").default;n("145fb04c",i,!0,{sourceMap:!1,shadowMode:!1})},c5a1:function(t,e,a){"use strict";a.d(e,"b",(function(){return i})),a.d(e,"c",(function(){return n})),a.d(e,"a",(function(){}));var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"page"},[i("v-uni-view",{staticStyle:{flex:"1",overflow:"auto"}},[i("v-uni-view",{staticClass:"conctrlitem",on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.customerList.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"title"},[t._v("客户")]),i("v-uni-view",{staticClass:"type"},[t._v(t._s(t.khName||"请选择"))]),i("v-uni-view",{staticClass:"arrow"},[i("v-uni-image",{attrs:{src:a("cde5")}})],1)],1),i("v-uni-view",{staticClass:"conctrlitem"},[i("v-uni-view",{staticClass:"title"},[t._v("公司名称")]),i("v-uni-input",{staticClass:"type",attrs:{placeholder:"请输入","placeholder-style":"color: #333333;"},model:{value:t.form.companyName,callback:function(e){t.$set(t.form,"companyName",e)},expression:"form.companyName"}})],1),i("v-uni-view",{staticClass:"conctrlitem"},[i("v-uni-view",{staticClass:"title"},[t._v("职称")]),i("v-uni-input",{staticClass:"type",attrs:{placeholder:"请输入","placeholder-style":"color: #333333;"},model:{value:t.form.job,callback:function(e){t.$set(t.form,"job",e)},expression:"form.job"}})],1),i("v-uni-view",{staticClass:"conctrlitem",on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.warehouseList.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"title"},[t._v("仓库")]),i("v-uni-view",{staticClass:"type"},[t._v(t._s(t.storeName||"请选择"))]),i("v-uni-view",{staticClass:"arrow"},[i("v-uni-image",{attrs:{src:a("cde5")}})],1)],1),i("v-uni-view",{staticClass:"conctrlitem"},[i("v-uni-view",{staticClass:"title"},[t._v("客户区域")]),i("pickerAdress",{on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.changeAddress.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"type"},[t._v(" "+t._s(t.address||"请选择")+" ")])],1),i("v-uni-view",{staticClass:"arrow"},[i("v-uni-image",{attrs:{src:a("cde5")}})],1)],1),i("v-uni-view",{staticClass:"conctrlitem"},[i("v-uni-view",{staticClass:"title"},[t._v("备注")]),i("v-uni-input",{staticClass:"type",attrs:{placeholder:"请输入","placeholder-style":"color: #333333;"},model:{value:t.form.summary,callback:function(e){t.$set(t.form,"summary",e)},expression:"form.summary"}})],1)],1),i("v-uni-view",{staticClass:"fotter"},[i("v-uni-view",{staticClass:"btn",on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.goback.apply(void 0,arguments)}}},[t._v("取消")]),i("v-uni-view",{staticClass:"btn sure",on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.summit.apply(void 0,arguments)}}},[t._v("确认保存")])],1)],1)},n=[]},e576:function(t,e,a){var i=a("c86c");e=i(!1),e.push([t.i,".page[data-v-647a41d2]{font-size:%?28?%;font-family:PingFangSC-Regular,PingFang SC;font-weight:400;color:#333;line-height:%?40?%;height:100%;overflow:hidden;background:#f6f6f6;display:flex;flex-direction:column}.page .conctrlitem[data-v-647a41d2]{display:flex;align-items:center;padding:%?28?% %?30?%;background:#fff}.page .conctrlitem .title[data-v-647a41d2]{margin-right:%?10?%}.page .conctrlitem .type[data-v-647a41d2]{flex:1;word-break:break-all;color:#333;text-align:right;font-size:%?28?%;line-height:%?40?%}.page .conctrlitem .arrow[data-v-647a41d2]{margin-left:%?10?%}.page .conctrlitem .arrow uni-image[data-v-647a41d2]{width:%?12?%;height:%?21?%}.page .conctrlitem uni-picker[data-v-647a41d2]{flex:1}.page .fotter[data-v-647a41d2]{font-size:%?30?%;color:#333;line-height:%?42?%;background:#fff;box-shadow:%?0?% %?2?% %?12?% %?0?% rgba(220,217,207,.5);text-align:center;display:flex}.page .fotter .btn[data-v-647a41d2]{text-align:center;padding:%?30?% 0;flex:1}.page .fotter .btn.sure[data-v-647a41d2]{background:#ffb822;color:#fff}",""]),t.exports=e},f259f:function(t,e,a){"use strict";a.r(e);var i=a("c5a1"),n=a("31b6");for(var s in n)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(s);a("1226");var o=a("828b"),r=Object(o["a"])(n["default"],i["b"],i["c"],!1,null,"647a41d2",null,!1,i["a"],void 0);e["default"]=r.exports}}]);