(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-customReport-index"],{"122f":function(e,t,a){"use strict";var n=a("e130"),i=a.n(n);i.a},1851:function(e,t,a){"use strict";var n=a("8bdb"),i=a("84d6"),r=a("1cb5");n({target:"Array",proto:!0},{fill:i}),r("fill")},"50ae":function(e,t,a){"use strict";a.r(t);var n=a("e183"),i=a.n(n);for(var r in n)["default"].indexOf(r)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(r);t["default"]=i.a},5564:function(e,t,a){var n=a("c86c");t=n(!1),t.push([e.i,'.page[data-v-2e82e6a6]{font-size:%?28?%;font-family:PingFangSC-Regular,PingFang SC;font-weight:400;color:#666;line-height:%?40?%;display:flex;flex-direction:column;height:100%;overflow:hidden}.page .pageheader[data-v-2e82e6a6]{display:flex}.page .pageheader .tabBox[data-v-2e82e6a6]{flex:1;display:flex;padding:%?30?% %?10?% %?18?% %?60?%;justify-content:space-between;overflow-x:auto}.page .pageheader .tabBox[data-v-2e82e6a6]::-webkit-scrollbar{display:none}.page .pageheader .tabBox .tabitem[data-v-2e82e6a6]{flex-shrink:0;flex-basis:%?160?%;position:relative;transition:all .3s;height:%?40?%}.page .pageheader .tabBox .tabitem + .tabitem[data-v-2e82e6a6]{margin-left:%?90?%}.page .pageheader .tabBox .tabitem[data-v-2e82e6a6]::before{content:"";bottom:%?-18?%;left:%?28?%;width:%?0?%;height:%?4?%;position:absolute;background:#ffc300;transition:all .3s}.page .pageheader .tabBox .tabitem.active[data-v-2e82e6a6]{font-weight:600;color:#333;font-size:%?30?%;line-height:%?42?%}.page .pageheader .tabBox .tabitem.active[data-v-2e82e6a6]::before{width:%?64?%}.page .pageheader .zw[data-v-2e82e6a6]{width:%?25?%;box-shadow:%?-1?% %?0?% %?8?% %?0?% #666;background:#fff}.page .content[data-v-2e82e6a6]{flex:1;overflow-y:auto;padding:0 %?30?%;color:#333}.page .content .dataBox .item[data-v-2e82e6a6]{padding:%?30?% 0;font-weight:400}.page .content .dataBox .item.level[data-v-2e82e6a6]{font-weight:800}.page .content .dataBox .item.secondlevel[data-v-2e82e6a6]{display:flex;align-items:center;position:relative}.page .content .dataBox .item.secondlevel .img[data-v-2e82e6a6]{width:%?18?%;height:%?28?%;margin-left:auto}.page .content .dataBox .item.secondlevel .img uni-image[data-v-2e82e6a6]{width:100%;height:100%}.page .content .dataBox .item.secondlevel .overClick[data-v-2e82e6a6]{position:absolute;left:0;top:0;width:100%;height:100%;background:transparent;z-index:1}.page .content .nodata[data-v-2e82e6a6]{text-align:center}.page .content .nodata uni-image[data-v-2e82e6a6]{width:100%;height:100%}',""]),e.exports=t},a478:function(e,t,a){e.exports=a.p+"static/img/nodata.png"},cde5:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAjCAYAAACU9ioYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAHRSURBVEhLrdZJUsJAFMbxkI6hWLkDzkAxncDZhWfRtRPI4DwsPZCzB4ANhwB0ozII+l7XV10ESCdt/C+ovE7lVwlhiMU5jrNTLBb7ruuW5UKEBGHbhULh1rZtJ5VKrXU6ne/RaPSE/caJfD7/zBhmKyoqut1ujJBVzLIoqKCDHungHx90aIoKfqGDHuhgRlbkKqJ53RSVIKdD2+32YDweP2NJmwI5Rvk9TSaTf0Y9IEfovQbtB6EzIKdBN4LQuSAH1CZ0GUsyoD1CX7DkyRfkdCjdwB7tn0G1IAdUhD3TQJAj9E6Dfk2ioUAOqEPoEpZkhG5OoqFBLgD9JPTVCOSALvihMczGZTKZ90QisYhRNhgMPmxsGxWPx0+nMa7VatWNQcJOstlsCaOq0WjsDofDGyMQ2Mz/DmF7jPF2aJCwYw12jdEKdVOAHWFUTWNc4BlqsP1pjNOChNU12BVGT74gsApGFWEHfhg3FySsNg9rNpuMXWKc28xXD1gVo4rO7DAI4zxnSM82VQ12gVGbAhnL5XI1jCq6zFJYjJOfQ8IqhNXlykSM0Rf+HGOobA1WNsW4GD8XCiFczDJgZxiNEvSj+JZOp7doW15+FEz1f0+wlvULMhlodUdy9wcAAAAASUVORK5CYII="},d4ac:function(e,t,a){"use strict";a.r(t);var n=a("f408"),i=a("50ae");for(var r in i)["default"].indexOf(r)<0&&function(e){a.d(t,e,(function(){return i[e]}))}(r);a("122f");var o=a("828b"),d=Object(o["a"])(i["default"],n["b"],n["c"],!1,null,"2e82e6a6",null,!1,n["a"],void 0);t["default"]=d.exports},e130:function(e,t,a){var n=a("5564");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var i=a("967d").default;i("6a2fd808",n,!0,{sourceMap:!1,shadowMode:!1})},e183:function(e,t,a){"use strict";a("6a54");var n=a("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("473f"),a("bf0f"),a("aa77"),a("c223"),a("dd2b");var i=n(a("b7c7")),r=n(a("2634")),o=n(a("2fdc")),d=n(a("9b1b")),c=a("f55d"),s=a("8f59"),u={data:function(){return{tabActiveId:-1,tabData:[],reportList:[],loading:!0}},computed:(0,d.default)({isShowNoData:function(){return this.reportList.length<=0}},(0,s.mapState)({rolelist:function(e){return e.custom.customRoleList}})),methods:{getCusmReportList:function(){var e=this;return(0,o.default)((0,r.default)().mark((function t(){var a;return(0,r.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.get("pub/pubReportType/listHome",{},4);case 2:if(a=t.sent,!a.meta.success){t.next=5;break}return t.abrupt("return",a.data||null);case 5:case"end":return t.stop()}}),t)})))()},setTabList:function(){var e=this;return(0,o.default)((0,r.default)().mark((function t(){var a;return(0,r.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getCusmReportList();case 2:if(a=t.sent,a&&!(e.rolelist.length<=0)){t.next=5;break}return t.abrupt("return");case 5:e.tabData=Array.prototype.reduce.call(e.rolelist||[],(function(e,t){var n=t.name,r=t.fnHandler,o=Array.prototype.find.call(a,(function(e){var t=e.typeName;return t==n}));if(o){var d=o.id;return[].concat((0,i.default)(e),[{id:d,name:n,fnHandler:r}])}return e}),[]),e.autoSelectTabActiveId();case 7:case"end":return t.stop()}}),t)})))()},clickTab:function(e){var t=e.target.dataset.id;t&&this.tabActiveId!=t&&(this.tabActiveId=t)},getReportList:function(){var e=this;return(0,o.default)((0,r.default)().mark((function t(){var a;return(0,r.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.reportList.splice(0,e.reportList.length),uni.showLoading({title:"加载中"}),e.loading=!0,t.next=5,e.get("pub/pubCustomType/typeList",{mainId:e.tabActiveId},4);case 5:return a=t.sent,t.next=8,(0,c.wait)(300);case 8:e.loading=!1,uni.hideLoading(),a.meta.success?e.reportList=[].concat(a.data||[]):uni.showToast({title:a.meta.message,icon:"none",duration:2e3});case 11:case"end":return t.stop()}}),t)})))()},autoSelectTabActiveId:function(){var e=this,t=this.tabData.find((function(t){var a=t.id;return a==e.tabActiveId}));if(t)this.tabActiveId=t.id;else{var a=this.tabData[0].id;this.tabActiveId=a}},clickItem:function(e){var t=e.target.dataset,a=t.id,n=t.name,i=t.mainid;a&&uni.navigateTo({url:"./reportDetail?id=".concat(a,"&name=").concat(n,"&mainid=").concat(i)})}},watch:{tabActiveId:function(e){e&&this.getReportList()}},onLoad:function(){this.setTabList()}};t.default=u},f408:function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"c",(function(){return i})),a.d(t,"a",(function(){}));var n=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-uni-view",{staticClass:"page"},[n("v-uni-view",{staticClass:"pageheader"},[n("v-uni-view",{staticClass:"tabBox",on:{click:function(t){t.stopPropagation(),arguments[0]=t=e.$handleEvent(t),e.clickTab.apply(void 0,arguments)}}},[e._l(e.tabData,(function(t){var a=t.id,i=t.name;return[n("v-uni-view",{key:a+"_0",staticClass:"tabitem",class:{active:e.tabActiveId==a},attrs:{"data-id":a}},[e._v(e._s(i))])]}))],2),n("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:e.tabData.length>3,expression:"tabData.length > 3"}],staticClass:"zw"})],1),n("v-uni-view",{staticClass:"content",on:{click:function(t){t.stopPropagation(),arguments[0]=t=e.$handleEvent(t),e.clickItem.apply(void 0,arguments)}}},[e._l(e.reportList,(function(t){var i=t.id,r=t.typeName,o=t.childs;return[n("v-uni-view",{key:i+"_0",staticClass:"dataBox"},[n("v-uni-view",{staticClass:"item level"},[e._v(e._s(r))]),e._l(o,(function(t,i){return[n("v-uni-view",{key:i+"_0",staticClass:"item secondlevel"},[n("v-uni-view",[e._v(e._s(t.typeName))]),n("v-uni-view",{staticClass:"img"},[n("v-uni-image",{attrs:{src:a("cde5"),mode:"widthFix"}})],1),n("v-uni-view",{staticClass:"overClick",attrs:{"data-id":t.id,"data-name":t.typeName,"data-mainid":t.reportMainId}})],1)]}))],2)]})),e.isShowNoData&&!e.loading?[n("v-uni-view",{staticClass:"nodata"},[n("v-uni-image",{attrs:{src:a("a478")}}),n("v-uni-view",[e._v("暂无数据")])],1)]:e._e()],2)],1)},i=[]},f55d:function(e,t,a){"use strict";(function(e){a("6a54");var n=a("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.yearTranforDate=t.weeks=t.weekTranforDate=t.wait=t.txMapMarkerUrlByList=t.txMapMarkerUrl=t.showModal=t.seasons=t.seasonTranforDate=t.monthTranforDate=t.getSystemYears=t.getDateRangeFordiffDays=t.getCurrentWeekForYear=t.getCurrentSeason=t.default=void 0,a("bf0f"),a("fd3c"),a("1851"),a("e966"),a("c223"),a("d4b5");var i=n(a("63d3")),r=function(e){return new Promise((function(t){setTimeout(t,e)}))};t.wait=r;t.showModal=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.title,a=void 0===t?"提示":t,n=e.content,i=void 0===n?"":n;return new Promise((function(e,t){uni.showModal({title:a,content:i,success:function(t){t.confirm?e(!0):t.cancel&&e(!1)},fail:t})}))};t.getSystemYears=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.startYear,a=void 0===t?1876:t,n=e.timeRang,i=void 0===n?300:n;return Array(i).fill(a).map((function(e,t){return e+t}))};var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.month,a=void 0===t?1:t;return~~(parseInt(a)/4)};t.getCurrentSeason=o;var d=["第一季度","第二季度","第三季度","第四季度"];t.seasons=d;var c=function(){return Array(52).fill(1).map((function(e,t){return"".concat(e+t,"周")}))}();t.weeks=c;t.getCurrentWeekForYear=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=e?new Date(e):new Date,a=e?new Date(e):new Date;a.setMonth(0),a.setDate(1);var n=Math.ceil((t-a)/864e5);return Math.ceil(n/7)+1};var s=function(e,t){var a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(e&&t){var n=864e5,i=new Date(e,0,1),r=new Date(i.getTime()+7*t*n),o=new Date(weekEndDate.getTime()-6*n);return a?{dateStart:r.getTime(),dateEnd:o.getTime()}:{dateStart:r,dateEnd:o}}};t.weekTranforDate=s;var u=function(e,t){var a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(e&&t){var n=[0,3,6,9],i=[31,30,30,31],r=new Date(e,n[t-1],1),o=new Date(e,n[t-1]+2,i[t-1]);return a?{dateStart:r.getTime(),dateEnd:o.getTime()}:{dateStart:r,dateEnd:o}}};t.seasonTranforDate=u;var l=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(e){var a=new Date(e,0,1),n=new Date(e,11,31);return t?{dateStart:a.getTime(),dateEnd:n.getTime()}:{dateStart:a,dateEnd:n}}};t.yearTranforDate=l;t.monthTranforDate=function(e,t){var a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(e&&t){var n=864e5,i=new Date(e,t-1,1),r=new Date(e,t,1),o=new Date(r.getTime()-n);return a?{dateStart:i.getTime(),dateEnd:o.getTime()}:{dateStart:i,dateEnd:o}}};var f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.date,a=void 0===t?"":t,n=e.diffDays,r=void 0===n?0:n,o=e.isBefore,d=void 0===o||o,c=e.isFormatDate,s=void 0===c||c,u=a?new Date(a):new Date,l=864e5,f=r*l,v=new Date(d?u.getTime()-f:u.getTime()+f),g=d?v:u,p=d?u:v;return s?[i.default.formatDate(g),i.default.formatDate(p)]:[g,p]};t.getDateRangeFordiffDays=f;var v=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=(e.key,e.latitude),n=e.longitude,i=e.title,r="baidumap://map/marker?location=".concat(a,",").concat(n,"&title=").concat(encodeURIComponent(i||"位置"),"&content=").concat(encodeURIComponent(i||""),"&src=").concat(encodeURIComponent("悦商云APP"));if(!t)return r;uni.navigateTo({url:"/pages/navigator/navigator?params="+JSON.stringify({marker:e})})};t.txMapMarkerUrl=v;var g=function(t,a){t.key;var n=t.referer;if(!a||0===a.length)return"";var i=a[0],r=i.latitude,o=i.longitude,d=i.title,c="baidumap://map/marker?location=".concat(r,",").concat(o,"&title=").concat(encodeURIComponent(d||"位置"),"&content=").concat(encodeURIComponent("共".concat(a.length,"个位置")),"&src=").concat(encodeURIComponent(n||"悦商云APP"));return e.log("百度地图标记:",c),c};t.txMapMarkerUrlByList=g;var p={wait:r,getCurrentSeason:o,seasons:d,weekTranforDate:s,seasonTranforDate:u,yearTranforDate:l,getDateRangeFordiffDays:f,txMapMarkerUrl:v,txMapMarkerUrlByList:g};t.default=p}).call(this,a("ba7c")["default"])}}]);