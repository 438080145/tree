(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-index-transferNote-transferNote"],{2722:function(t,e,i){"use strict";i.d(e,"b",(function(){return a})),i.d(e,"c",(function(){return s})),i.d(e,"a",(function(){}));var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{staticClass:"contain"},[a("v-uni-view",{staticClass:"head"},[a("v-uni-view",{staticClass:"header-left"},[a("v-uni-image",{attrs:{src:i("37b9"),mode:""},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.goBack.apply(void 0,arguments)}}})],1),a("v-uni-view",{staticClass:"header-middle"},[a("v-uni-text",[t._v("转仓单")])],1),a("v-uni-view",{staticClass:"header-right"},[a("v-uni-image",{attrs:{src:i("5bc3")},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.clearAllDate.apply(void 0,arguments)}}}),a("v-uni-image",{attrs:{src:"/static/img/history.png"},on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.toHistory.apply(void 0,arguments)}}})],1)],1),a("v-uni-view",{staticClass:"pubBlank"}),a("v-uni-view",{staticClass:"middle"},[a("v-uni-view",{staticClass:"item"},[a("v-uni-view",{staticClass:"middle-des"},[t._v(" 单据日期： ")]),a("v-uni-view",{staticClass:"middle-select"},[a("v-uni-picker",{attrs:{mode:"date",value:t.date,start:t.startDate,end:t.endDate},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.bindDateChange.apply(void 0,arguments)}}},[a("v-uni-view",{staticClass:"uni-input"},[t._v(t._s(t.date))])],1),a("v-uni-image",{attrs:{src:i("846e"),mode:""}})],1)],1),a("v-uni-view",{staticClass:"item"},[a("v-uni-view",{staticClass:"middle-des"},[t._v(" 出货仓库： ")]),a("v-uni-view",{staticClass:"middle-select",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.warehouseList(0)}}},[a("v-uni-input",{attrs:{type:"text",placeholder:"点击选择出货仓库"},model:{value:t.warehouseName,callback:function(e){t.warehouseName=e},expression:"warehouseName"}}),a("v-uni-image",{attrs:{src:i("59b8"),mode:""}})],1)],1),a("v-uni-view",{staticClass:"item"},[a("v-uni-view",{staticClass:"middle-des"},[t._v(" 入库仓库： ")]),a("v-uni-view",{staticClass:"middle-select",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.warehouseList(1)}}},[a("v-uni-input",{attrs:{type:"text",placeholder:"点击选择入库仓库"},model:{value:t.intoWarehouseName,callback:function(e){t.intoWarehouseName=e},expression:"intoWarehouseName"}}),a("v-uni-image",{attrs:{src:i("59b8"),mode:""}})],1)],1),a("v-uni-view",{staticClass:"item"},[a("v-uni-view",{staticClass:"middle-des"},[t._v(" 经手人： ")]),a("v-uni-view",{staticClass:"middle-select",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.handlersList(0)}}},[a("v-uni-input",{attrs:{type:"text",placeholder:"点击选择经手人"},model:{value:t.handleName,callback:function(e){t.handleName=e},expression:"handleName"}}),a("v-uni-image",{attrs:{src:i("59b8")}})],1)],1),a("v-uni-view",{staticClass:"item"},[a("v-uni-view",{staticClass:"middle-des"},[t._v(" 业务员： ")]),a("v-uni-view",{staticClass:"middle-select",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.handlersList(1)}}},[a("v-uni-input",{attrs:{type:"text",placeholder:"点击选择业务员"},model:{value:t.businessName,callback:function(e){t.businessName=e},expression:"businessName"}}),a("v-uni-image",{attrs:{src:i("59b8")}})],1)],1),a("v-uni-view",{staticClass:"item"},[a("v-uni-view",{staticClass:"middle-des"},[t._v(" 备注： ")]),a("v-uni-view",{staticClass:"middle-select"},[a("v-uni-input",{attrs:{type:"text",placeholder:"输入备注"},on:{confirm:function(e){arguments[0]=e=t.$handleEvent(e),t.remarks.apply(void 0,arguments)}},model:{value:t.remarksVal,callback:function(e){t.remarksVal=e},expression:"remarksVal"}})],1)],1),a("v-uni-view",{staticClass:"item"},[a("v-uni-view",{staticClass:"middle-des"},[t._v(" 商品选择： ")]),a("v-uni-view",{staticClass:"middle-select"},[a("v-uni-input",{attrs:{type:"text",placeholder:"商品名称/货号/条码",focus:t.focus},on:{confirm:function(e){arguments[0]=e=t.$handleEvent(e),t.search(e)}},model:{value:t.inputValue,callback:function(e){t.inputValue=e},expression:"inputValue"}}),a("v-uni-text",{on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.commodityList.apply(void 0,arguments)}}},[t._v("添加商品")])],1)],1)],1),a("v-uni-view",{staticClass:"sweepCode"},[a("v-uni-image",{attrs:{src:i("9ec0"),mode:""},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.commodityList.apply(void 0,arguments)}}}),a("v-uni-image",{attrs:{src:i("9796"),mode:""},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.scanning.apply(void 0,arguments)}}})],1),t._l(t.shopList,(function(e,s){return a("v-uni-view",{key:s,staticClass:"order-item",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.saleDetaEvent(e,s)}}},[a("v-uni-view",{staticClass:"order-item-top"},[a("v-uni-image",{staticClass:"order-item-left",attrs:{src:e.picture,mode:""},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.previewPhoto(s)}}}),a("v-uni-view",{staticClass:"order-item-right"},[a("v-uni-view",{staticClass:"order-inside inside-left",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.closeOpen(e,s)}}},[a("v-uni-view",{staticClass:"order-fir-left"},[t._v(t._s(e.goodsName))]),a("v-uni-view",{staticClass:"order-sec-left"},[t._v("库存："+t._s(e.quantity?e.quantity:0))]),a("v-uni-view",{staticClass:"order-sec-left"},[t._v("规格：1*"+t._s(e.packingSpecification))])],1),a("v-uni-view",{staticClass:"order-inside inside-right"},[a("v-uni-view",{staticClass:"order-fir-right"},[t._v("￥"+t._s(e.amount?e.amount:0))]),a("v-uni-view",{staticClass:"order-sec-right",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.delectItem(e,s)}}},[t._v("删除")])],1)],1)],1),e.checked?a("v-uni-view",{staticClass:"order-item-bottom"},[a("v-uni-view",{staticClass:"bottom-fir"},[a("v-uni-view",{staticClass:"bottom-input"},[a("v-uni-view",{staticClass:"bottom-des"},[t._v("件价")]),a("v-uni-input",{attrs:{type:"digit",disabled:t.noPriceChangeAllowed,value:e.saleIP?e.saleIP:0},on:{blur:function(e){arguments[0]=e=t.$handleEvent(e),t.priceIP(e,s)},confirm:function(e){arguments[0]=e=t.$handleEvent(e),t.priceIP(e,s)}}})],1),a("v-uni-view",{staticClass:"bottom-input"},[a("v-uni-view",{staticClass:"bottom-des"},[t._v("件数")]),a("v-uni-input",{attrs:{type:"number",value:e.itemQuantity},on:{blur:function(e){arguments[0]=e=t.$handleEvent(e),t.numberIP(e,s)},confirm:function(e){arguments[0]=e=t.$handleEvent(e),t.numberIP(e,s)}}})],1),a("v-uni-view",{staticClass:"bottom-input"},[a("v-uni-view",{staticClass:"bottom-des"},[t._v("散价")]),a("v-uni-input",{attrs:{type:"digit",disabled:t.noPriceChangeAllowed,value:e.saleSP?e.saleSP:0},on:{blur:function(e){arguments[0]=e=t.$handleEvent(e),t.priceSP(e,s)},confirm:function(e){arguments[0]=e=t.$handleEvent(e),t.priceSP(e,s)}}})],1),a("v-uni-view",{staticClass:"bottom-input"},[a("v-uni-view",{staticClass:"bottom-des"},[t._v("散数")]),a("v-uni-input",{attrs:{type:"number",value:e.scatteredQuantity},on:{blur:function(e){arguments[0]=e=t.$handleEvent(e),t.numberSP(e,s)},confirm:function(e){arguments[0]=e=t.$handleEvent(e),t.numberSP(e,s)}}})],1)],1),a("v-uni-view",{staticClass:"bottom-sec"},[a("v-uni-view",{staticClass:"bottom-sec-des"},[t._v("品牌：")]),a("v-uni-view",{staticClass:"bottom-sec-num"},[t._v(t._s(e.brandName?e.brandName:""))])],1),a("v-uni-view",{staticClass:"bottom-sec"},[a("v-uni-view",{staticClass:"bottom-sec-des"},[t._v("条码：")]),a("v-uni-view",{staticClass:"bottom-sec-num"},[t._v(t._s(e.barCode?e.barCode:"无"))])],1),a("v-uni-view",{staticClass:"bottom-sec"},[a("v-uni-view",{staticClass:"bottom-sec-des"},[t._v("型号：")]),a("v-uni-view",{staticClass:"bottom-sec-num"},[t._v(t._s(e.typeSpecification))])],1),a("v-uni-view",{staticClass:"bottom-sec"},[a("v-uni-view",{staticClass:"bottom-sec-des"},[t._v("备注：")]),a("v-uni-input",{staticClass:"bottom-sec-input",attrs:{type:"text",value:e.remark,placeholder:"点击输入备注"},on:{blur:function(e){arguments[0]=e=t.$handleEvent(e),t.goodsremarks(e,s)},confirm:function(e){arguments[0]=e=t.$handleEvent(e),t.goodsremarks(e,s)}}})],1)],1):t._e(),a("v-uni-view",{staticClass:"order-item-foot",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.closeOpen(e,s)}}},[e.checked?a("v-uni-view",{staticClass:"foot-des"},[a("v-uni-view",[t._v("点击收起")]),a("v-uni-image",{staticStyle:{transform:"rotate(180deg)"},attrs:{src:i("4fe6"),mode:""}})],1):a("v-uni-view",{staticClass:"foot-des"},[a("v-uni-view",[t._v("展开更多")]),a("v-uni-image",{attrs:{src:i("4fe6"),mode:""}})],1)],1)],1)})),a("v-uni-view",{staticClass:"blank",staticStyle:{background:"#F6F6F6"}}),a("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:t.orderStat,expression:"orderStat"}],staticClass:"footfixed"},[a("v-uni-view",{staticClass:"foot-bg"},[a("v-uni-view",{staticClass:"foot-bg-left"},[a("v-uni-view",[t._v("金额："),a("v-uni-text",[t._v(t._s(t.total))])],1),a("v-uni-view",{staticClass:"subTitle"},[t._v("数量："+t._s(t.totalCount))])],1),a("v-uni-view",{staticClass:"foot-bg-right",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.creatNewDocm.apply(void 0,arguments)}}},[t._v("开单")])],1)],1)],2)},s=[]},"37b9":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwBAMAAAClLOS0AAAAJ1BMVEX///8zMzP6+vpwcHCSkpJ9fX2IiIhISEjY2Njt7e2/v787OztbW1vTET4fAAAAk0lEQVQ4y82TuQ2EQBAEVwgkDq/FY584FwciIATIAEIgCgwCwMEhBEK4zEigy98xt1Wz8/SEEHsUCwh3BcCj0b0nh7yQP/KpdgI2NRY4JVvth4BLmizwV22BDoCkV/11wk8abKZZpQUyAlYAUgJQwFT8OZbLDeJIcIihpbHjoni1aAa2DxqOLRrI1HgGfDh8avHEC/ZBGXwrpcb3AAAAAElFTkSuQmCC"},"4b32":function(t,e,i){"use strict";i.r(e);var a=i("2722"),s=i("d729");for(var n in s)["default"].indexOf(n)<0&&function(t){i.d(e,t,(function(){return s[t]}))}(n);i("7611");var o=i("828b"),r=Object(o["a"])(s["default"],a["b"],a["c"],!1,null,"032363fc",null,!1,a["a"],void 0);e["default"]=r.exports},"4fe6":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAKBAMAAACgUqiRAAAAGFBMVEWEhISAgIBHcEyAgIB6enqAgICCgoKAgIAUaalZAAAAB3RSTlMT0gDXGbcqhO85WQAAAEpJREFUCNdjSGVSAgHXBIZwARBDxTyAgbEQJOhcyMCgIC4AEhJQYFACCToXMgFZQEGgkBKQBRRMBgqDWAri5UClIBZYJYSlEAAiAOZMDmcJUYE4AAAAAElFTkSuQmCC"},"59b8":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqBAMAAAA37dRoAAAAFVBMVEVHcEyXl5ebm5uXl5eXl5eYmJiXl5dhgIfDAAAABnRSTlMAugiMpToMNkwxAAAAU0lEQVQoz2NgGOwgUAGLIGuaEBZRxrRELIqZxLApZlJMS2HAqtiBQsUMOBUbYFWcTLxiRlIUYxXFah0T5UpTiA0d0pQqEBmb2GMeeyrBnqIGIQAA2U8VBfend9IAAAAASUVORK5CYII="},"5bc3":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAABN0lEQVRoge2YMQ6DMAxFOQhzD/BtxUOvwLV6HNaOHKkSbJ3oEqSoSmjSBhKKn+SFKMiPuPSLplH+EAAdEQ1ENNkaAHSl+4qCmW9ENPuKmW+l+1vFPnlv80tVfRJ2bJanfReRVkRaZr47EkPpPoPYeZ+JaBaRdrkuIq0jMJXscRV3VFLWqkEFSqMCpVGB0qhADt6S5Gqu2bHiEu1akqylgok2JknWUt6TIE+SzDKTGYhKtBRIkrXwMdH+g8CxR+jwP+KmOfhr9O0khpJNBirt04y7OXpTZn7qQQUyoAIq8CObCNj/isn3Ps69tokAET3t9adnT9a1rQSCN829pgIqoAInFxiXzcx83VuAma/O9TFZAEDv3rhkAeiTBYwxFwCPCpp/GGMuyQKORO+O0441Aui/bl5RTsILecwmw0E3NbEAAAAASUVORK5CYII="},7611:function(t,e,i){"use strict";var a=i("e3e7"),s=i.n(a);s.a},"846e":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoAQMAAAC2MCouAAAABlBMVEVHcEyXl5c3HTAeAAAAAXRSTlMAQObYZgAAADNJREFUCNdjYCAG8DAYwEjm////H4CRQBE4CVQAJ5HVIIsjk/w2H+AkbjUIEpcaJLuIAABy9Sm5sM//IAAAAABJRU5ErkJggg=="},8824:function(t,e,i){"use strict";i("6a54"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("fd3c"),i("c223"),i("aa9c"),i("5ef2"),i("20f3");var a={previewPhoto:function(t,e){var i=e.map((function(t,e){return t.picture}));uni.previewImage({current:i[t],urls:i})},unique:function(t,e){for(var i=t.concat(e),a={},s=[],n=0;n<i.length;n++)a["s_"+i[n].id]=i[n];for(var o in a)s.push(a[o]);return s},IsPicture:function(t){if(t&&t.indexOf(".")>-1){var e=t.lastIndexOf("."),i=t.substring(e,t.length)+"|";if(i=i.toLowerCase(),".jpeg|.gif|.jpg|.png|.bmp|.pic|.svg|".indexOf(i)>-1)return!0}return!1}};e.default=a},9796:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwBAMAAAClLOS0AAAAElBMVEVHcEz/uCL/uSP/uCL/vCL/uCJcCjI6AAAABXRSTlMA50mtJj8sjiYAAABlSURBVDjLY2AgHbAYhmIAYQeghGMoFiAClDDFJhEMlBDFJhEIlAgNxbQXLDbEJEQDMSXAYopCmBLYxAYHUAzFCoSwRyAoCnFK4DRqsHodV0ThjNphk3ZxZU6c2RlnAYCzyCAVAACHaG1xFoswbQAAAABJRU5ErkJggg=="},"9ec0":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwAgMAAAAqbBEUAAAADFBMVEVHcEz/uCL/uSP/uCITuKUYAAAAA3RSTlMA4kmZPqyEAAAALklEQVQoz2NgAAHOBAYEYL+AxOH/MKI58//DwTeGegTnLyoHRdlouGFLSNAkBgCQylhTmhAbcAAAAABJRU5ErkJggg=="},bd0d:function(t,e,i){"use strict";(function(t){i("6a54");var a=i("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("c9b5"),i("bf0f"),i("ab80"),i("fd3c"),i("aa9c"),i("5c47"),i("a1c1"),i("d4b5"),i("e838"),i("dd2b"),i("473f");var s=a(i("5de6")),n=a(i("9b1b")),o=a(i("8824")),r=i("8f59"),l={data:function(){return{date:this.timeShift.getDate({format:!0}),noPriceChangeAllowed:!1,startDate:this.timeShift.getDate("start"),endDate:this.timeShift.getDate("end"),customerName:"",customerId:"",warehouseName:"",warehouseId:"",shopList:[],orderStat:!1,total:0,employeeId:"",employeeName:"",footFlag:!1,historyprice:"",remarksVal:"",goodsRemark:"",saleBillId:"",saleNo:"",intoWarehouseName:"",intoWarehouseId:0,handleName:"",handleNameId:0,businessName:"",businessNameId:0,orgName:"",organizationId:0,transferNo:"",pageNum:1,hasNextPage:!1,inputValue:"",typeId:"",scanningPage:!1,warehouseNum:0,handleNum:0,storehouse:{},strogeobj:{},employees:{},focus:!1,totalCount:0}},methods:(0,n.default)((0,n.default)({},(0,r.mapMutations)(["setparams"])),{},{enquiryDocuments:function(){var t=this;uni.showLoading({title:"加载中",mask:!0}),this.get("/transfer/getAllData",{id:this.saleBillId},2).then((function(e){if(uni.hideLoading(),e.meta.success){var i=e.data.detailList;t.shopList=i;for(var a=0;a<i.length;a++)i[a].picture||(i[a].picture="../../../static/img/outNote/photo.png"),i[a].orderQuantity||(i[a].orderQuantity=0),i[a].saleIP=i[a].getIP,i[a].saleSP=i[a].getSP;t.orderStat=!0,t.date=t.timeShift.timeTransfer(e.data.main.createTime),t.warehouseId=e.data.main.outStorehouseId,t.warehouseName=e.data.main.outStorehouseName,t.intoWarehouseId=e.data.main.inStorehouseId,t.intoWarehouseName=e.data.main.inStorehouseName,t.handleNameId=e.data.main.operatorId,t.handleName=e.data.main.operatorName,t.businessName=e.data.main.salesmanName,t.businessNameId=e.data.main.salesmanId,t.remarksVal=e.data.main.remark,t.organizationId=e.data.main.organizationId,t.transferNo=e.data.main.transferNo,uni.setStorageSync("transShopList",t.shopList)}}))},bindDateChange:function(t){this.date=t.target.value},handlersList:function(t){this.handleNum=t,this.setparams({searchtype:"employees",filed:"employees"}),uni.navigateTo({url:"../components/toolssearchlist/toolssearchlist"})},warehouseList:function(t){this.warehouseNum=t,this.setparams({searchtype:"storehouse",filed:"storehouse"}),uni.navigateTo({url:"../components/toolssearchlist/toolssearchlist"})},search:function(t){var e=this;this.warehouseName?this.intoWarehouseName?(this.inputValue=t.detail.value,this.getCommodity().then((function(){e.focus&&(e.focus=!1),setTimeout((function(){e.focus=!0}),0)}))):uni.showToast({icon:"none",title:"请选择入库仓库",duration:2e3}):uni.showToast({icon:"none",title:"请选择出货仓库",duration:2e3})},commodityList:function(){this.warehouseName?this.intoWarehouseName?this.warehouseName!=this.intoWarehouseName?(this.setparams({warehouse:this.warehouseName,storehouseId:this.warehouseId,type:1,inputValue:this.inputValue,billtype:"transferNote",isNeedJudgeInventory:!0,isNeedJudgeQuantity:!0,isShowAvailableStock:!0}),uni.navigateTo({url:"../commodityList/commodityList?type=1"})):uni.showToast({icon:"none",title:"转入仓和转出仓不能为同一个",duration:2e3}):uni.showToast({icon:"none",title:"请选择入库仓库",duration:2e3}):uni.showToast({icon:"none",title:"请选择出货仓库",duration:2e3})},remarks:function(t){this.remarksVal=t.detail.value},scanning:function(){var t=this;this.warehouseName?this.intoWarehouseName?uni.scanCode({success:function(e){t.inputValue=e.result.toString(),t.getCommodity()}}):uni.showToast({icon:"none",title:"请选择入库仓库",duration:2e3}):uni.showToast({icon:"none",title:"请选择出货仓库",duration:2e3})},getCommodity:function(){var t=this,e=this;return this.get("api/basicData/goods/bill/list",{barCode:this.RegExp.Num13(e.inputValue)?e.inputValue:"",code:this.RegExp.Num13(e.inputValue)?"":e.inputValue,pageNum:this.pageNum,storehouseId:e.warehouseId},1).then((function(i){if(i.meta.success){e.scanningPage=i.data.hasNextPage;var a=i.data.list;if(a.length>0){var s=[];a.map((function(t,e){s.push(Object.assign({},t,{itemQuantity:0},{scatteredQuantity:0},{amount:0},{remark:""}))}));for(var n=0;n<a.length;n++)s[n].picture||(s[n].picture="../../../static/img/outNote/photo.png"),s[n].barCode||(s[n].barCode=""),s[n].brandName||(s[n].brandName="");var r=JSON.parse(JSON.stringify(s).replace(/name/g,"goodsName").replace(/newestIP/g,"saleIP").replace(/newestSP/g,"saleSP"));s=r,t.shopList=o.default.unique(t.shopList,s),t.orderStat=!0}else uni.showToast({title:"暂无该商品",icon:"none"});e.inputValue=""}}))},closeOpen:function(t,e){this.shopList[e].checked=!this.shopList[e].checked,this.$forceUpdate()},saleDetaEvent:function(t,e){},priceIP:function(t,e){var i=this.shopList[e];i.saleIP=this.RegExp.floatRound4(t.detail.value),i.saleSP=this.RegExp.floatRound4(i.saleIP/parseFloat(i.packingSpecification));var a=parseFloat(i.itemQuantity)*parseFloat(i.saleIP),s=parseFloat(i.scatteredQuantity)*parseFloat(i.saleSP);i.amount=parseFloat(a+s).toFixed(4)},numberIP:function(e,i){var a=this.shopList[i];a.itemQuantity=this.RegExp.floatRound4(e.detail.value),t.log("item.itemQuantity：：",a.itemQuantity);var s=parseFloat(a.itemQuantity)*parseFloat(a.saleIP),n=parseFloat(a.scatteredQuantity)*parseFloat(a.saleSP);a.amount=parseFloat(s+n).toFixed(4)},priceSP:function(e,i){t.log("priceSP:",e.detail.value);var a=this.shopList[i];a.saleSP=this.RegExp.floatRound4(e.detail.value),a.saleIP=this.RegExp.floatRound4(parseFloat(a.saleSP)*parseFloat(a.packingSpecification));var s=parseFloat(a.itemQuantity)*parseFloat(a.saleIP),n=parseFloat(a.scatteredQuantity)*parseFloat(a.saleSP);a.amount=parseFloat(s+n).toFixed(4)},numberSP:function(e,i){t.log("numberSP:",e.detail.value);var a=this.shopList[i];a.scatteredQuantity=this.RegExp.floatRound4(e.detail.value);var s=parseFloat(a.itemQuantity)*parseFloat(a.saleIP),n=parseFloat(a.scatteredQuantity)*parseFloat(a.saleSP);a.amount=parseFloat(s+n).toFixed(4)},goodsremarks:function(e,i){t.log("event.detail.value：：",e.detail.value),this.shopList[i].remark=e.detail.value},delectItem:function(t,e){this.shopList.splice(e,1),this.shopList.length>0&&uni.setStorageSync("transShopList",this.shopList),0==this.shopList.length&&(this.orderStat=!1,uni.removeStorageSync("transShopList"))},closeHistoryPrice:function(){this.footFlag=!1},creatNewDocm:function(){var e=this;t.log("开单数量",this.shopList);for(var i=[],a=[],s=this,n=0;n<this.shopList.length;n++){var o={goodsId:0,getIP:0,getSP:0,itemQuantity:0,scatteredQuantity:0};this.saleBillId?o.goodsId=this.shopList[n].goodsId?this.shopList[n].goodsId:this.shopList[n].id:o.goodsId=this.shopList[n].id,o.barCode=this.shopList[n].barCode,this.shopList[n].getIP||0==this.shopList[n].getIP?o.getIP=this.shopList[n].getIP:o.getIP=this.shopList[n].saleIP,this.shopList[n].getSP||0==this.shopList[n].getSP?o.getSP=this.shopList[n].getSP:o.getSP=this.shopList[n].saleSP,o.itemQuantity=this.shopList[n].itemQuantity,o.scatteredQuantity=this.shopList[n].scatteredQuantity,o.packingSpecification=this.shopList[n].packingSpecification,o.smallUnit=this.shopList[n].smallUnit,o.goodsName=this.shopList[n].goodsName,o.brandName=this.shopList[n].brandName,o.quantity=this.shopList[n].quantity,o.remark=this.shopList[n].remark,o.brandName=this.shopList[n].brandName,i.push(o)}for(var r=0,l=i;r<l.length;r++){var d=l[r];0==d.itemQuantity&&0==d.scatteredQuantity||a.push(d)}uni.showLoading({title:"开单中",mask:!0}),this.post("/transfer/main",{outStorehouseId:this.warehouseId,outStorehouseName:this.warehouseName,inStorehouseId:this.intoWarehouseId,inStorehouseName:this.intoWarehouseName,operatorId:this.handleNameId,salesmanId:this.businessNameId,salesmanName:this.businessName,remark:this.remarksVal,organizationId:this.organizationId,organizationName:this.orgName,operatorName:this.handleName,trDetList:a,id:this.saleBillId?this.saleBillId:-1},2).then((function(t){if(uni.hideLoading(),t.meta.success){var i=t.data.transferNo?t.data.transferNo:s.transferNo;uni.navigateTo({url:"../../publicPage/billSuccess/billSuccess?sourceType=302&saleNo="+i+"&id="+t.data.id}),e.doRefresh()}else"inventory_transfer_outstorehouse_not_have_enough_goods"==t.meta.message?uni.showToast({title:"商品库存不足,不能开单",icon:"none",duration:1e3}):uni.showToast({title:t.meta.message,icon:"none",duration:1e3})}))},previewPhoto:function(t){o.default.previewPhoto(t,this.shopList)},clearAllDate:function(){var t=this;uni.showModal({title:"温馨提示",content:"是否清空当前页面数据",success:function(e){e.confirm?(t.doRefresh(!0),t.$forceUpdate(),t.orderStat=!1):e.cancel}})},doRefresh:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.warehouseId="",this.warehouseName="",this.intoWarehouseId="",this.intoWarehouseName="",this.handleNameId="",this.handleName="",this.businessName="",this.businessNameId="",this.remarksVal="",this.shopList=[],this.$data.warehouseName="",this.saleBillId="",this.inputValue="",this.saleNo="",this.employeeId="",this.employeeName="",uni.removeStorageSync("transShopList"),t&&uni.removeStorageSync("transNoteTemp")},goBack:function(){uni.navigateBack({delta:1})},initData:function(){this.employeeId=uni.getStorageSync("id"),this.employeeName=uni.getStorageSync("name");var e=uni.getStorageSync("transNoteTemp");t.log("tempData~~~|",e),null!=e&&""!=e&&(this.strogeobj=e,this.intoWarehouseName=e.inEntrepotName,this.intoWarehouseId=e.inEntrepotNameId,this.warehouseName=e.OutEntrepotName,this.warehouseId=e.OutEntrepotNameId,this.businessName=e.businessName,this.businessNameId=e.businessNameId,this.handleName=e.handleName,this.handleNameId=e.handleNameId)},toHistory:function(){uni.setStorageSync("Type",302),uni.switchTab({url:"/pages/documentHistorys/index"})}}),watch:{shopList:{handler:function(t,e){var i=Array.prototype.reduce.call(t||[],(function(t,e){var i=e.amount,a=e.itemQuantity,s=e.scatteredQuantity,n=e.packingSpecification,o=parseFloat(a||0)*parseFloat(n||0)+parseFloat(s||0),r=parseFloat(i||0);return[t[0]+r,t[1]+o]}),[0,0]),a=(0,s.default)(i,2),n=a[0],o=a[1];this.total=n.toFixed(4),this.totalCount=o},deep:!0},storehouse:function(t){null!=t&&t.length>0&&(this.warehouseNum?(this.intoWarehouseName=t[0].name,this.intoWarehouseId=t[0].id,this.strogeobj.inEntrepotName=this.intoWarehouseName,this.strogeobj.inEntrepotNameId=this.intoWarehouseId):(this.warehouseName=t[0].name,this.warehouseId=t[0].id,this.strogeobj.OutEntrepotName=this.warehouseName,this.strogeobj.OutEntrepotNameId=this.warehouseId),uni.setStorageSync("transNoteTemp",this.strogeobj))},employees:function(e){t.log("this.handleNum",this.handleNum),null!=e&&e.length>0&&(this.handleNum?(this.businessName=e[0].name,this.businessNameId=e[0].id,this.strogeobj.businessName=this.businessName,this.strogeobj.businessNameId=this.businessNameId):(this.handleName=e[0].name,this.handleNameId=e[0].id,this.strogeobj.handleName=this.handleName,this.strogeobj.handleNameId=this.handleNameId),uni.setStorageSync("transNoteTemp",this.strogeobj))}},onLoad:function(e){var i=uni.getStorageSync("privilegeMap");1==i.priceAuth&&(this.noPriceChangeAllowed=!0),t.log("options：：",e),302==e.billType&&e.billid?(this.saleBillId=e.billid,this.type=e.billType,this.enquiryDocuments(),uni.setStorageSync("Type",this.type)):this.initData()},onShow:function(){var t=uni.getStorageSync("transShopList");if(0!=t.length){var e=uni.getStorageSync("transShopList");this.shopList=e,this.orderStat=!0}else this.orderStat=!1},onReachBottom:function(){this.scanningPage?(uni.showLoading({title:"玩命加载中...",mask:!0}),this.pageNum++,t.log(this.pageNum),this.getCommodity(),setTimeout((function(){uni.hideLoading()}),1e3)):uni.showToast({title:"暂无更多数据",duration:1e3,icon:"loading",mask:!0})}};e.default=l}).call(this,i("ba7c")["default"])},d270:function(t,e,i){var a=i("c86c");e=a(!1),e.push([t.i,"uni-page-body[data-v-032363fc]{background-color:#f6f6f6}body.?%PAGE?%[data-v-032363fc]{background-color:#f6f6f6}.head[data-v-032363fc]{display:flex;justify-content:space-between;font-weight:590}.header-left[data-v-032363fc]{width:20%}.header-middle[data-v-032363fc]{width:25%}.head uni-image[data-v-032363fc]{width:%?48?%;height:%?48?%;margin:%?7?% %?15?%;display:block}.header-right[data-v-032363fc]{display:flex;width:20%}.middle[data-v-032363fc]{padding:%?40?%}.pubBlank[data-v-032363fc]{height:%?120?%}.item[data-v-032363fc]{display:flex;height:%?80?%;line-height:%?80?%;padding-bottom:%?20?%}.item[data-v-032363fc]:last-child{padding-bottom:0}.middle-des[data-v-032363fc]{font-size:%?32?%;width:%?160?%;text-align:right}.middle-select[data-v-032363fc]{display:flex;justify-content:space-between;background:#f7f6fb;width:%?496?%;font-size:%?30?%;border-radius:5px}uni-picker[data-v-032363fc]{padding-left:%?20?%;width:%?496?%}.middle-select uni-input[data-v-032363fc]{height:%?80?%;line-height:%?80?%;font-size:%?30?%;padding-left:%?20?%}.middle-select uni-text[data-v-032363fc]{color:#ffb822;font-size:%?26?%;width:%?200?%}.middle-select uni-image[data-v-032363fc]{width:%?40?%;height:%?40?%;padding-right:%?20?%;padding-top:%?20?%}.sweepCode[data-v-032363fc]{border-bottom:%?2?% #eee solid;display:flex;justify-content:space-between}.sweepCode uni-image[data-v-032363fc]{width:%?48?%;height:%?48?%;padding:%?26?% %?100?%}.order-item[data-v-032363fc]{padding:%?40?% %?40?% 0 %?40?%}.order-item-top[data-v-032363fc]{\r\n\t/* display: flex; */display:-webkit-box}.order-inside[data-v-032363fc]{display:flex;box-sizing:border-box;\r\n\t/* flex-direction: column; */justify-content:space-between}.order-item-left[data-v-032363fc]{width:%?160?%;height:%?160?%}.order-item-right[data-v-032363fc]{\r\n/* \tflex: 1; */margin-left:%?20?%;display:flex}.order-fir-left[data-v-032363fc]{font-size:%?32?%;font-weight:500;width:%?350?%}.order-fir-right[data-v-032363fc]{font-size:%?32?%;font-weight:500;display:flex;justify-content:space-between}.order-sec-left[data-v-032363fc]{font-size:%?28?%;color:grey}.order-sec-right[data-v-032363fc]{font-size:%?28?%;color:#3378ff}.order-item-bottom[data-v-032363fc]{margin-top:%?20?%}.bottom-fir[data-v-032363fc]{padding:%?20?%;display:flex;justify-content:space-between;border-bottom:%?1?% solid #eee;border-top:%?1?% solid #eee}.bottom-des[data-v-032363fc]{font-size:%?28?%;color:grey}.bottom-input[data-v-032363fc]{display:flex;align-items:center;flex-direction:column}.bottom-input uni-input[data-v-032363fc]{margin-top:%?20?%;font-size:%?32?%;color:#333;text-align:center}.bottom-sec[data-v-032363fc]{height:%?70?%;line-height:%?70?%;display:flex;font-size:%?28?%}.bottom-sec-des[data-v-032363fc]{color:grey}.bottom-sec-input[data-v-032363fc]{height:%?40?%;line-height:%?40?%;margin-top:%?10?%;color:grey;font-size:%?28?%}.order-item-foot[data-v-032363fc]{margin-top:%?40?%;border-bottom:%?1?% solid #eee}.order-inside[data-v-032363fc]{display:flex;box-sizing:border-box;flex-direction:column;justify-content:space-between}.inside-left[data-v-032363fc]{width:70%}.inside-right[data-v-032363fc]{width:30%;align-items:flex-end}.foot-des[data-v-032363fc]{margin:0 auto;display:flex;font-size:%?24?%;color:grey;width:20%;justify-content:space-between;padding:%?15?% 0;margin-bottom:%?20?%}.foot-des uni-image[data-v-032363fc]{width:%?17?%;height:%?10?%;margin-top:%?10?%}.footfixed[data-v-032363fc]{display:block;position:fixed;bottom:%?0?%;\r\n\r\n\t\t/* bottom:100upx;\r\n */\r\nwidth:100%;height:%?100?%;background:#fff;z-index:10}.foot-bg[data-v-032363fc]{display:flex}.foot-bg-left[data-v-032363fc]{display:flex;width:70%;font-size:%?28?%;font-weight:500;text-align:left;line-height:%?40?%;flex-direction:column;justify-content:center;padding-left:%?40?%}.foot-bg-left .subTitle[data-v-032363fc]{font-size:%?24?%;font-weight:400;color:grey;line-height:%?33?%}.foot-bg-left uni-image[data-v-032363fc]{width:%?48?%;height:%?48?%;margin:%?25?% %?20?% 0 %?90?%}.foot-bg-right[data-v-032363fc]{width:30%;height:%?100?%;line-height:%?100?%;text-align:center;background:#ffb822;font-size:%?32?%;color:#fff}.foot-bg-left uni-text[data-v-032363fc]{color:red}\r\n\r\n/* 历史售价 */.modal-box[data-v-032363fc]{width:100%;height:100%;position:fixed;background:rgba(51,51,51,.6);top:0;left:0;z-index:999}.modal-body[data-v-032363fc]{width:%?670?%;height:%?970?%;background:#fff;margin:%?200?% auto 0 auto;border-radius:%?10?%}.modal-title[data-v-032363fc]{display:block;width:100%;height:%?120?%;line-height:%?120?%;text-align:center;font-size:%?32?%;font-weight:500;color:#333}.modal-item[data-v-032363fc]{display:flex;font-size:%?28?%;font-weight:400;color:#666;height:%?60?%;line-height:%?60?%;justify-content:space-between;padding:0 %?30?%;height:%?740?%}.modal-item-lef uni-text[data-v-032363fc]:last-child{margin-left:%?30?%}.modal-foot[data-v-032363fc]{height:%?100?%;line-height:%?100?%;text-align:center;border-top:%?1?% solid #eee;font-size:%?28?%;font-weight:400}",""]),t.exports=e},d729:function(t,e,i){"use strict";i.r(e);var a=i("bd0d"),s=i.n(a);for(var n in a)["default"].indexOf(n)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(n);e["default"]=s.a},e3e7:function(t,e,i){var a=i("d270");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var s=i("967d").default;s("31062430",a,!0,{sourceMap:!1,shadowMode:!1})}}]);