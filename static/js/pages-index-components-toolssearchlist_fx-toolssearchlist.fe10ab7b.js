(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-index-components-toolssearchlist_fx-toolssearchlist"],{"67b6":function(t,s,e){var a=e("b25b");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var i=e("967d").default;i("32d68275",a,!0,{sourceMap:!1,shadowMode:!1})},8056:function(t,s,e){"use strict";e.r(s);var a=e("874e"),i=e.n(a);for(var l in a)["default"].indexOf(l)<0&&function(t){e.d(s,t,(function(){return a[t]}))}(l);s["default"]=i.a},"874e":function(t,s,e){"use strict";(function(t){e("6a54");var a=e("f5bd").default;Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0,e("c223"),e("8f71"),e("bf0f"),e("2797"),e("5ef2"),e("20f3");var i=a(e("9b1b")),l=e("8f59"),n={computed:(0,i.default)({},(0,l.mapState)(["params"])),data:function(){return{customerList:[],pageNum:1,hasNextPage:!1,inputValue:"",btnhidden:!1,checklist:{},returnArr:[],listdata:[],showMsg:"",tipsTitle:"",apiurl:"",interType:0,eventChannel:null}},components:{},created:function(){var t=this.getOpenerEventChannel();this.eventChannel=t},methods:{initData:function(){"customer"==this.params.searchtype?(this.tipsTitle="请输入客户名称/拼音/手机号",this.apiurl="api/basicData/customer/select/page",this.showMsg="只能选择一个客户",this.interType=1):"goodstype"==this.params.searchtype?(this.tipsTitle="请输入商品类型",this.apiurl="api/basicData/1/all/listByKhType2",this.showMsg="只能一种商品类型",this.interType=1):"storehouse"==this.params.searchtype?(this.tipsTitle="请输入仓库名称",this.apiurl="api/basicData/organization/page",this.showMsg="只能选择一个仓库",this.interType=1):"employees"==this.params.searchtype?(this.tipsTitle="请输入业务员",this.apiurl="org/sysEmployee/page/",this.showMsg="只能选择一个员工",this.interType=4):"supplier"==this.params.searchtype?(this.tipsTitle="请输入供应商",this.apiurl="api/basicData/supplier/page/",this.showMsg="只能选择一个供应商",this.interType=1):"brand"==this.params.searchtype?(this.tipsTitle="品牌",this.apiurl="api/basedata/dictionnary/page",this.showMsg="只能选择一个品牌",this.interType=1):"fxVisitCustomerCustomerList"==this.params.searchtype&&(this.tipsTitle="请选择拜访客户",this.apiurl="fx/fxVisitCustomer/customerList",this.interType=3)},goBack:function(){uni.navigateBack({delta:1})},getValue:function(t){this.customerList=[],this.pageNum=1,this.inputValue=t.detail.value,this.getListdata()},getListdata:function(){var s=this;t.log("获取客户列表",this.apiurl,this.params);var e,a=this;e="employees"==this.params.searchtype||"brand"==this.params.searchtype?{pageNum:this.pageNum,pageSize:10,keyWord:this.inputValue,orderBy:"a.name"}:{pageNum:this.pageNum,pageSize:10,keyWord:this.inputValue,orderBy:"a.name",isApp:1},"supplier"==this.params.searchtype&&(e.name=this.inputValue,e.keyWord=""),"brand"==this.params.searchtype&&(e.name=this.inputValue,e.keyWord="",e["status"]=1,e["dictionaryTypeId"]=3),uni.showLoading({title:"加载中",mask:!0}),t.log("获取客户列表2",a.apiurl,e,a.interType),this.get(a.apiurl,e,a.interType).then((function(i){if(uni.hideLoading(),i.meta.success){var l=[];if(l=i.data.list,l.length>0){a.hasNextPage=i.data.hasNextPage;for(var n=0;n<l.length;n++)l[n].mobilePhone||(l[n].mobilePhone="暂无电话");1==a.pageNum?a.listdata=l:a.listdata=a.listdata.concat(l),t.log(a.listdata)}else a.listdata=[]}"employees"==s.params.searchtype||"brand"==s.params.searchtype?e.keyword?a.inputValue=e.keyword:a.inputValue="":e.keyWord?a.inputValue=e.keyWord:a.inputValue=""}))},checkChange:function(t,s){this.listdata[s];var e=getCurrentPages(),a=e[e.length-2];a.$vm[this.params.filed]=[this.listdata[s]],uni.navigateBack({delta:1}),this.eventChannel.emit("customerSelect",[this.listdata[s]])},checkChange2:function(t,s){var e=this;this.listdata[s].checked=!this.listdata[s].checked,this.returnArr=this.listdata.filter((function(t){return t.checked})),this.returnArr.length>0?this.btnhidden=!0:this.btnhidden=!1;var a=this;this.listdata[s].checked&&this.params.checkChange&&this.params.checkChange({data:t,success:function(){},fail:function(){a.listdata[s].checked=!1,e.$forceUpdate()}}),this.$forceUpdate()},confirmbtn:function(){if(!this.params.limit&&this.returnArr.length>1)uni.showToast({icon:"none",title:this.showMsg,duration:2e3});else{t.log(this.returnArr);var s=getCurrentPages(),e=s[s.length-2];e.$vm[this.params.filed]=this.returnArr,uni.navigateBack({delta:1})}}},onLoad:function(){this.initData(),this.getListdata()},onReachBottom:function(){this.hasNextPage?(t.log("11111"),uni.showLoading({title:"玩命加载中...",mask:!0}),this.pageNum++,this.getListdata(),t.log(this.pageNum+"----------"),uni.hideLoading()):uni.showToast({title:"暂无更多数据",duration:2e3,icon:"loading",mask:!0})},confirmbtn:function(){var s=this;if(!this.params.limit&&this.returnArr.length>1)uni.showToast({icon:"none",title:this.showMsg,duration:2e3});else{var e=getCurrentPages(),a=e[e.length-2];if("custom"==this.params.restype){if(null!=this.returnArr&&this.returnArr.length>0){var i="",l="";this.returnArr.forEach((function(t){i=s.params.searchtype.indexOf("Label")>-1?i+t.labelName+",":i+t.name+",",l="goodsType"==s.params.searchtype?l+t.code+",":l+t.id+","})),i=i.substring(0,i.lastIndexOf(",")),l=l.substring(0,l.lastIndexOf(",")),t.log("displayName:",i,l),this.params.resultModel[this.params.filed]=i,this.params.searchModel[this.params.filed]=l,this.params.searchModel[this.params.filed+"_primary"]=this.returnArr.concat()}}else a.$vm[this.params.filed]=this.returnArr;uni.navigateBack({delta:1})}}};s.default=n}).call(this,e("ba7c")["default"])},"8ca8":function(t,s,e){"use strict";e.r(s);var a=e("f33c"),i=e("8056");for(var l in i)["default"].indexOf(l)<0&&function(t){e.d(s,t,(function(){return i[t]}))}(l);e("8ccf");var n=e("828b"),c=Object(n["a"])(i["default"],a["b"],a["c"],!1,null,"46a0889c",null,!1,a["a"],void 0);s["default"]=c.exports},"8ccf":function(t,s,e){"use strict";var a=e("67b6"),i=e.n(a);i.a},b25b:function(t,s,e){var a=e("c86c");s=a(!1),s.push([t.i,".head[data-v-46a0889c]{display:flex;justify-content:space-between}.head uni-image[data-v-46a0889c]{width:%?48?%;height:%?48?%}.head-left[data-v-46a0889c]{margin-left:%?20?%;padding-right:%?35?%}.header-right[data-v-46a0889c]{width:20%}.search-input[data-v-46a0889c]{width:%?679?%;margin:%?10?% auto}.sel_customerList[data-v-46a0889c]{margin-top:%?20?%;padding:0 %?30?%;background:#fff;box-sizing:border-box}.selbox[data-v-46a0889c]{display:flex;justify-content:flex-start;align-items:center;padding:%?35?% 0 %?25?% 0;height:%?120?%;border-bottom:1px solid #f0f0f0}.check[data-v-46a0889c]{width:%?44?%;height:%?44?%;margin-top:%?-80?%}.sel_customerTel[data-v-46a0889c]{display:flex;color:#333;justify-content:flex-start;flex-wrap:wrap;margin-top:%?10?%}.sel_customerDetail[data-v-46a0889c]{margin-left:%?20?%}.sel_customerName[data-v-46a0889c]{color:#333;font-size:%?32?%}.telsty[data-v-46a0889c]{margin-top:%?24?%;color:#666\r\n\t/* font-size: 28upx; */}.sel_customerTel uni-image[data-v-46a0889c]{width:%?45?%;height:%?45?%;vertical-align:middle}.sel_customerTel uni-view[data-v-46a0889c]{margin-right:%?30?%;font-size:%?28?%}.sel_customerList2[data-v-46a0889c]{align-items:center;background-color:#fff;\r\n\t/* box-sizing: border-box; */overflow:hidden}.sel_customerDetail2[data-v-46a0889c]{flex:1;\r\ndisplay:flex;\r\nflex-direction:column;margin-left:%?20?%}.selbox2[data-v-46a0889c]{\r\ndisplay:flex;\r\nflex-direction:column;padding-right:%?30?%;padding-left:%?30?%}.selbox-box2[data-v-46a0889c]{\r\ndisplay:flex;\r\nflex-direction:row;justify-content:space-between;align-items:center;margin-top:%?35?%;margin-bottom:12px}.selbox-line2[data-v-46a0889c]{height:1px;background-color:#f0f0f0}.sel_customerName2[data-v-46a0889c]{color:#333;font-size:%?32?%}.telsty2[data-v-46a0889c]{margin-top:%?12?%;color:#666;font-size:%?24?%}.check2[data-v-46a0889c]{width:%?44?%;height:%?44?%}.submit-button[data-v-46a0889c]{\r\ndisplay:flex;\r\nflex-direction:row;align-items:center;justify-content:center;height:%?80?%;background-color:#ffc235;border-radius:0}.submit-button-hidden[data-v-46a0889c]{opacity:.5}",""]),t.exports=s},f33c:function(t,s,e){"use strict";e.d(s,"b",(function(){return a})),e.d(s,"c",(function(){return i})),e.d(s,"a",(function(){}));var a=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("v-uni-view",{staticClass:"contain",class:{prohibitSlide:t.showTree}},[e("v-uni-view",{staticClass:"search-kuan"},[t.clientSort?e("v-uni-text",{staticClass:"sort-btn",on:{click:function(s){arguments[0]=s=t.$handleEvent(s),t.getClassification.apply(void 0,arguments)}}},[t._v("筛选")]):t._e(),e("v-uni-view",{staticClass:"search-box"},[e("v-uni-input",{staticClass:"search-input",attrs:{"confirm-type":"search",placeholder:t.tipsTitle},on:{confirm:function(s){arguments[0]=s=t.$handleEvent(s),t.getValue.apply(void 0,arguments)},blur:function(s){arguments[0]=s=t.$handleEvent(s),t.hideKey.apply(void 0,arguments)}},model:{value:t.inputValue,callback:function(s){t.inputValue=s},expression:"inputValue"}}),e("v-uni-image",{staticClass:"search-icon",attrs:{src:"/static/img/index/search.png"}})],1)],1),e("v-uni-view",{staticClass:"list"},[t.listdata.length?[e("uni-list",{staticClass:"sel_customerList",attrs:{enableBackToTop:!0,"scroll-y":!0,"lower-threshold":"150"},on:{scrolltolower:function(s){arguments[0]=s=t.$handleEvent(s),t.loadMore()}}},t._l(t.listdata,(function(s,a){return e("uni-cell",{key:a,staticClass:"selbox",style:{width:t.windowWidth+"px"},attrs:{cellItem:s,cellIndex:a},on:{cellTap:function(s){arguments[0]=s=t.$handleEvent(s),t.checkChange(s,a)}}},[e("v-uni-view",{staticClass:"selbox-box"},[s.checked?e("v-uni-image",{staticClass:"check",attrs:{src:"/static/img/checked.png"}}):e("v-uni-image",{staticClass:"check",attrs:{src:"/static/img/check.png"}}),"customer"==t.params.searchtype?e("v-uni-view",{staticClass:"sel_customerDetail"},[e("v-uni-text",{staticClass:"sel_customerName"},[t._v(t._s(s.name))]),e("v-uni-view",{staticClass:"sel_customerTel"},[e("v-uni-text",{staticClass:"telsty sel_customerTel-text"},[t._v("电话："+t._s(s.mobilePhone))]),e("v-uni-text",{staticClass:"telsty sel_customerTel-text"},[t._v(t._s(s.telephone))])],1),"custom"!=t.params.restype?[e("v-uni-text",{staticClass:"telsty"},[t._v("信用额：￥"+t._s(s.creditAmount?s.creditAmount:0))]),e("v-uni-text",{staticClass:"telsty"},[t._v("应收金额：￥"+t._s(s.shouldCollect?s.shouldCollect:0))]),e("v-uni-text",{staticClass:"telsty"},[t._v("应付金额：￥"+t._s(s.shouldPay?s.shouldPay:0))])]:t._e()],2):"storehouse"==t.params.searchtype?e("v-uni-view",{staticClass:"sel_customerDetail"},[e("v-uni-text",{staticClass:"sel_customerName"},[t._v(t._s(s.name))]),e("v-uni-text",{staticClass:"telsty"},[t._v("所属机构："+t._s(s.orgName))])],1):"organization"==t.params.searchtype?e("v-uni-view",{staticClass:"sel_customerDetail"},[e("v-uni-text",{staticClass:"sel_customerName"},[t._v(t._s(s.name))]),e("v-uni-text",{staticClass:"telsty"},[t._v("拼音："+t._s(s.phoneticize))])],1):"employees"==t.params.searchtype||"supplier"==t.params.searchtype?e("v-uni-view",{staticClass:"sel_customerDetail"},[e("v-uni-text",{staticClass:"sel_customerName"},[t._v(t._s(s.name))]),e("v-uni-text",{staticClass:"telsty"},[t._v("编号："+t._s(s.code))])],1):"goodsType"==t.params.searchtype||"supplierType"==t.params.searchtype||"customerType"==t.params.searchtype?e("v-uni-view",{staticClass:"sel_customerDetail"},[e("v-uni-text",{staticClass:"sel_customerName"},[t._v(t._s(s.name))]),e("v-uni-text",{staticClass:"telsty"},[t._v("编号："+t._s(s.code))]),e("v-uni-text",{staticClass:"telsty"},[t._v("拼音："+t._s(s.phoneticize))])],1):"customerLabel"==t.params.searchtype||"goodsLabel"==t.params.searchtype||"supplierLabel"==t.params.searchtype||"employeesLabel"==t.params.searchtype?e("v-uni-view",{staticClass:"sel_customerDetail"},[e("v-uni-text",{staticClass:"sel_customerName"},[t._v(t._s(s.labelName))]),e("v-uni-text",{staticClass:"telsty"},[t._v("备注："+t._s(s.remark))])],1):"line"==t.params.searchtype?e("v-uni-view",{staticClass:"sel_customerDetail"},[e("v-uni-text",{staticClass:"sel_customerName"},[t._v(t._s(s.name))])],1):"customerProfile"==t.params.searchtype?e("v-uni-view",{staticClass:"sel_customerDetail"},[e("v-uni-text",{staticClass:"sel_customerName"},[t._v(t._s(s.name))]),e("v-uni-text",{staticClass:"telsty"},[t._v("编号："+t._s(s.code))])],1):"collectionAccount"==t.params.searchtype?e("v-uni-view",{staticClass:"sel_customerDetail"},[e("v-uni-text",{staticClass:"sel_customerName"},[t._v(t._s(s.name))]),e("v-uni-text",{staticClass:"telsty"},[t._v("期末余额：￥"+t._s(s.balance)+"元")])],1):"allEmployeesInfo"==t.params.searchtype?e("v-uni-view",{staticClass:"sel_customerDetail"},[e("v-uni-text",{staticClass:"sel_customerName"},[t._v(t._s(s.name))]),e("v-uni-text",{staticClass:"telsty"},[t._v("编号："+t._s(s.code))])],1):"paymentMethod"==t.params.searchtype?e("v-uni-view",{staticClass:"sel_customerDetail"},[e("v-uni-text",{staticClass:"sel_customerName"},[t._v(t._s(s.name))]),e("v-uni-text",{staticClass:"telsty"},[t._v("编号："+t._s(s.id))])],1):"getCustomerKMPage"==t.params.searchtype||"getSupplierKMPage"==t.params.searchtype?e("v-uni-view",{staticClass:"sel_customerDetail"},[e("v-uni-text",{staticClass:"sel_customerName"},[t._v(t._s(s.name))]),e("v-uni-text",{staticClass:"telsty"},[t._v("期末余额：￥"+t._s(s.balance)+"元")])],1):"employeeLabel"==t.params.searchtype?e("v-uni-view",{staticClass:"sel_customerDetail"},[e("v-uni-text",{staticClass:"sel_customerName"},[t._v(t._s(s.labelName))]),e("v-uni-text",{staticClass:"telsty"},[t._v("备注："+t._s(s.remark))])],1):"getKmByYBFYD"==t.params.searchtype?e("v-uni-view",{staticClass:"sel_customerDetail"},[e("v-uni-text",{staticClass:"sel_customerName"},[t._v(t._s(s.name))]),e("v-uni-text",{staticClass:"telsty"},[t._v("编号："+t._s(s.code))]),e("v-uni-text",{staticClass:"telsty"},[t._v("期末余额：￥"+t._s(s.balance)+"元")])],1):"newCustomer"==t.params.searchtype||"cashBank"==t.params.searchtype?e("v-uni-view",{staticClass:"sel_customerDetail"},[e("v-uni-text",{staticClass:"sel_customerName"},[t._v(t._s(s.name))]),e("v-uni-text",{staticClass:"telsty"},[t._v("编号："+t._s(s.code))])],1):"getKmByFYZCD"==t.params.searchtype?e("v-uni-view",{staticClass:"sel_customerDetail"},[e("v-uni-text",{staticClass:"sel_customerName"},[t._v(t._s(s.name))]),e("v-uni-text",{staticClass:"telsty"},[t._v("编号："+t._s(s.code))]),e("v-uni-text",{staticClass:"telsty"},[t._v("拼音："+t._s(s.pinyin))])],1):"commonPubTable"==t.params.searchtype?e("v-uni-view",{staticClass:"sel_customerDetail"},[e("v-uni-text",{staticClass:"sel_customerName"},[t._v(t._s(s.name))])],1):"brand"==t.params.searchtype?e("v-uni-view",{staticClass:"sel_customerDetail"},[e("v-uni-text",{staticClass:"sel_customerName"},[t._v(t._s(s.name))]),e("v-uni-text",{staticClass:"telsty"},[t._v("状态："+t._s(s.status?"启用":"停用"))])],1):"listOrganizationByorganizationId"==t.params.searchtype?e("v-uni-view",{staticClass:"sel_customerDetail"},[e("v-uni-text",{staticClass:"sel_customerName"},[t._v(t._s(s.name))]),e("v-uni-text",{staticClass:"telsty"},[t._v("编号："+t._s(s.code))])],1):"fxVisitCustomerCustomerList"==t.params.searchtype?e("v-uni-view",{staticClass:"sel_customerDetail"},[e("v-uni-text",{staticClass:"sel_customerName"},[t._v(t._s(s.customerName))]),e("v-uni-text",{staticClass:"telsty"},[t._v("电话："+t._s(s.phone))])],1):"organizationInfo"==t.params.searchtype||"containerCp"==t.params.searchtype?e("v-uni-view",{staticClass:"sel_customerDetail"},[e("v-uni-text",{staticClass:"sel_customerName"},[t._v(t._s(s.name))]),e("v-uni-text",{staticClass:"telsty"},[t._v("编号："+t._s(s.code))])],1):"region"==t.params.searchtype?e("v-uni-view",{staticClass:"sel_customerDetail"},[e("v-uni-text",{staticClass:"sel_customerName"},[t._v(t._s(s.name))])],1):"logisticsMode"==t.params.searchtype?e("v-uni-view",{staticClass:"sel_customerDetail"},[e("v-uni-text",{staticClass:"sel_customerName"},[t._v(t._s(s.name))]),e("v-uni-text",{staticClass:"telsty"},[t._v("状态："+t._s(s.status?"启用":"停用"))])],1):"goodsTypeNew"==t.params.searchtype?e("v-uni-view",{staticClass:"sel_customerDetail"},[e("v-uni-text",{staticClass:"sel_customerName"},[t._v(t._s(s.name))]),e("v-uni-text",{staticClass:"telsty"},[t._v("编号："+t._s(s.code))]),e("v-uni-text",{staticClass:"telsty"},[t._v("拼音："+t._s(s.phoneticize))])],1):"commodityLabel"==t.params.searchtype?e("v-uni-view",{staticClass:"sel_customerDetail"},[e("v-uni-text",{staticClass:"sel_customerName"},[t._v(t._s(s.labelName))]),e("v-uni-text",{staticClass:"telsty"},[t._v("备注："+t._s(s.remark))])],1):"pubDictionaryList"==t.params.searchtype?e("v-uni-view",{staticClass:"sel_customerDetail"},[e("v-uni-text",{staticClass:"sel_customerName"},[t._v(t._s(s.name))])],1):"financialList"==t.params.searchtype?e("v-uni-view",{staticClass:"sel_customerDetail"},[e("v-uni-text",{staticClass:"sel_customerName"},[t._v(t._s(s.name))]),e("v-uni-text",{staticClass:"telsty"},[t._v("拼音："+t._s(s.pinyin))])],1):"goodsBillList"==t.params.searchtype?e("v-uni-view",{staticClass:"sel_customerDetail"},[e("v-uni-text",{staticClass:"sel_customerName"},[t._v(t._s(s.name))]),e("v-uni-text",{staticClass:"telsty"},[t._v("编号："+t._s(s.code))]),e("v-uni-text",{staticClass:"telsty"},[t._v("规格："+t._s(s.packingSpecification))]),e("v-uni-text",{staticClass:"telsty"},[t._v("条码："+t._s(s.barCode))]),e("v-uni-text",{staticClass:"telsty"},[t._v("库存："+t._s(s.quantity))])],1):"goodsPage"==t.params.searchtype?e("v-uni-view",{staticClass:"sel_customerDetail"},[e("v-uni-text",{staticClass:"sel_customerName"},[t._v(t._s(s.name))]),e("v-uni-text",{staticClass:"telsty"},[t._v("编号："+t._s(s.code))])],1):"memberGroupList"==t.params.searchtype||"basicDictList"==t.params.searchtype||"priceMode"==t.params.searchtype?e("v-uni-view",{staticClass:"sel_customerDetail"},[e("v-uni-text",{staticClass:"sel_customerName"},[t._v(t._s(s.name))])],1):t._e()],1),e("v-uni-view",{staticClass:"selbox-line"})],1)})),1)]:e("v-uni-view",{staticClass:"nodata-box"},[e("v-uni-image",{staticClass:"nodata-image",attrs:{src:"/static/img/nodata.png",mode:""}}),e("v-uni-text",{staticClass:"nodata-text"},[t._v("暂无数据")])],1)],2),e("v-uni-view",{class:["submit-button",t.btnhidden?"":"submit-button-hidden"],on:{click:function(s){arguments[0]=s=t.$handleEvent(s),t.confirmbtn.apply(void 0,arguments)}}},[e("v-uni-text",{staticClass:"submit-button-text"},[t._v("确定")])],1),e("tools-screen",{attrs:{visible:t.showTree,data:t.typeList,maskTop:110,maskBottom:80,rangeKey:t.toolsscreenCode},on:{cancel:function(s){arguments[0]=s=t.$handleEvent(s),t.cancel.apply(void 0,arguments)},confirm:function(s){arguments[0]=s=t.$handleEvent(s),t.confirmTree.apply(void 0,arguments)}}})],1)},i=[]}}]);