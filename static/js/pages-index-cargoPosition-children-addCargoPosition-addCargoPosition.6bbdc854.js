(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-index-cargoPosition-children-addCargoPosition-addCargoPosition"],{"0157":function(t,i,e){"use strict";var a=e("d4d7"),o={containerPage:function(t){return(0,a.get)("api/basicData/container/page",t,1)},containerGoods:function(t){return(0,a.get)("api/basicData/containerGoods/page",t,1)},containerGoodsDelete:function(t){return(0,a.del)("api/basicData/containerGoodsAll/list?ids="+t.ids+"&depotPartition="+t.depotPartition,t,1)},containerGoodsAdd:function(t){return(0,a.post)("api/basicData/containerGoods",t,1)},checkContainerGoods:function(t){return(0,a.get)("api/basicData/checkContainerGoods",t,1)},searchGoods:function(t){return(0,a.get)("api/basicData/containerCp/page",t,1)},updateDeviceNo:function(t){return(0,a.post)("api/basicData/containerGoods/updateDeviceNo",t,1)},getLighting:function(t){return(0,a.get)("api/basedata/dictionnary?dictionaryTypeId=31&status=1",t,1)},getStorehouseArea:function(t){return(0,a.get)("api/basedata/dictionnary/list?dictionaryTypeId=10&status=1",t,1)},getStorehouseList:function(t){return(0,a.get)("api/basicData/organizationInfo",t,1)},getPositionCode:function(t){return(0,a.get)("api/basicData/container/code",t,1)},getPosition:function(t){return(0,a.get)("api/basicData/container/"+t,{},1)},savePosition:function(t){return(0,a.post)("api/basicData/container",t,1)},updatePosition:function(t){return(0,a.post)("api/basicData/container/"+t.id,t.data,1)},deletePosition:function(t){return(0,a.get)("/api/basicData/container/all",t,1)}};t.exports=o},"21e6":function(t,i,e){"use strict";e.d(i,"b",(function(){return a})),e.d(i,"c",(function(){return o})),e.d(i,"a",(function(){}));var a=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("v-uni-view",{staticClass:"contain"},[e("v-uni-view",{staticClass:"title"},[t._v(" 基本信息 ")]),e("v-uni-view",{staticClass:"item"},[e("v-uni-view",{staticClass:"item-lef"},[t._v("编号 "),e("v-uni-text",[t._v("*")])],1),e("v-uni-view",{staticClass:"item-rig"},[e("v-uni-input",{attrs:{type:"text",placeholder:"请输入编号"},model:{value:t.cargoPosition.code,callback:function(i){t.$set(t.cargoPosition,"code",i)},expression:"cargoPosition.code"}})],1)],1),e("v-uni-view",{staticClass:"item"},[e("v-uni-view",{staticClass:"item-lef"},[t._v("名称 "),e("v-uni-text",[t._v("*")])],1),e("v-uni-view",{staticClass:"item-rig"},[e("v-uni-input",{attrs:{type:"text",placeholder:"请输入货位名称"},model:{value:t.cargoPosition.name,callback:function(i){t.$set(t.cargoPosition,"name",i)},expression:"cargoPosition.name"}})],1)],1),e("v-uni-view",{staticClass:"item"},[e("v-uni-view",{staticClass:"item-lef"},[t._v("仓库： "),e("v-uni-text",[t._v("*")])],1),e("v-uni-view",{staticClass:"item-rig",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.warehouseList.apply(void 0,arguments)}}},[t._v(" "+t._s(t.cargoPosition.storehouseName)+" ")]),e("v-uni-image",{attrs:{src:"/static/img/outNote/right.png",mode:""}})],1),e("v-uni-view",{staticClass:"item"},[e("v-uni-view",{staticClass:"item-lef"},[t._v("仓库分区 "),e("v-uni-text",[t._v("*")])],1),e("v-uni-picker",{staticClass:"item-rig",attrs:{value:t.cargoPosition.selPartition,range:t.partitionData,"range-key":"name"},on:{change:function(i){arguments[0]=i=t.$handleEvent(i),t.bindPickerChange1.apply(void 0,arguments)}}},[e("v-uni-view",{staticStyle:{color:"#666666",height:"86upx"}},[t._v(t._s(t.cargoPosition.partition?t.cargoPosition.partition.name:""))])],1),e("v-uni-image",{attrs:{src:"/static/img/outNote/right.png",mode:""}})],1),e("v-uni-view",{staticClass:"foot",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.submit.apply(void 0,arguments)}}},[t._v("保存")])],1)},o=[]},4027:function(t,i,e){var a=e("c86c");i=a(!1),i.push([t.i,".contain[data-v-2bb7139a]{background-color:#f6f6f6}.title[data-v-2bb7139a]{height:%?88?%;line-height:%?88?%;color:#999;padding:0 %?40?%}.item[data-v-2bb7139a],\r\n.item-textarea[data-v-2bb7139a]{padding:0 %?40?%;font-size:%?32?%;background:#fff}.item[data-v-2bb7139a]{display:flex;height:%?88?%;line-height:%?88?%\r\n\t/* border: 1upx solid; */}.item uni-image[data-v-2bb7139a]{width:%?44?%;height:%?44?%;margin-top:%?20?%}.item-lef[data-v-2bb7139a]{width:25%\r\n\t/* border: 1upx solid red; */}.item-lef uni-text[data-v-2bb7139a]{color:red}.item-rig[data-v-2bb7139a]{width:60%;margin-left:%?50?%;color:#666}.item-rig-vie[data-v-2bb7139a]{color:#666;margin-top:%?2?%}.item-rig uni-picker[data-v-2bb7139a]{height:%?88?%;line-height:%?88?%}.item-rig uni-input[data-v-2bb7139a]{height:%?88?%;line-height:%?88?%;color:#666}.item-text[data-v-2bb7139a]{height:%?88?%;line-height:%?88?%}.item-textarea[data-v-2bb7139a]{height:%?295?%}.item-textarea uni-textarea[data-v-2bb7139a]{width:100%;padding:%?10?%;font-size:%?32?%;height:%?150?%!important}.foot[data-v-2bb7139a]{width:%?670?%;margin:0 auto;height:%?88?%;background:#ffb822;border-radius:%?8?%;border:1px solid #ffb823;text-align:center;line-height:%?88?%;font-size:%?32?%;color:#fff;margin-top:%?40?%;margin-bottom:%?40?%}.item-customerLabel[data-v-2bb7139a]{display:flex;align-items:center;flex-wrap:wrap;height:auto}.item-customerLabel-box[data-v-2bb7139a]{display:flex;align-items:center;flex-wrap:wrap;min-height:%?88?%}.item-customerLabel-box-item[data-v-2bb7139a]{padding:%?10?%;margin:%?4?%;font-size:%?24?%;line-height:1;border:1px solid #ddd}.head-content[data-v-2bb7139a]{position:fixed;display:flex;flex-direction:row;justify-content:space-between;width:100%;height:%?78?%;padding-top:%?80?%;border-bottom-width:1px;border-bottom-style:solid;border-bottom-color:#c7c7c7;background-color:#fff;z-index:9999}.head-content-box[data-v-2bb7139a]{height:%?160?%}.header-left[data-v-2bb7139a]{display:flex;flex-direction:row;align-items:center;width:30%;height:%?78?%}.header-middle[data-v-2bb7139a]{display:flex;flex-direction:row;align-items:center;justify-content:center;width:40%;height:%?78?%}.header-middle-text[data-v-2bb7139a]{line-height:%?78?%;color:#000;font-size:%?34?%;text-align:center;font-weight:700}.header-right[data-v-2bb7139a]{display:flex;flex-direction:row;align-items:center;justify-content:flex-end;width:30%;height:%?78?%}.header-right-text[data-v-2bb7139a]{margin-right:%?14?%;color:#b3b3b3;font-size:%?30?%}.header-image[data-v-2bb7139a]{width:%?48?%;height:%?48?%;margin-top:%?7?%;margin-right:%?15?%;margin-bottom:%?7?%;margin-left:%?15?%}",""]),t.exports=i},5225:function(t,i,e){"use strict";e.r(i);var a=e("21e6"),o=e("6919");for(var n in o)["default"].indexOf(n)<0&&function(t){e.d(i,t,(function(){return o[t]}))}(n);e("6a3c");var s=e("828b"),r=Object(s["a"])(o["default"],a["b"],a["c"],!1,null,"2bb7139a",null,!1,a["a"],void 0);i["default"]=r.exports},6671:function(t,i,e){var a=e("4027");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var o=e("967d").default;o("1751fc94",a,!0,{sourceMap:!1,shadowMode:!1})},6919:function(t,i,e){"use strict";e.r(i);var a=e("df20"),o=e.n(a);for(var n in a)["default"].indexOf(n)<0&&function(t){e.d(i,t,(function(){return a[t]}))}(n);i["default"]=o.a},"6a3c":function(t,i,e){"use strict";var a=e("6671"),o=e.n(a);o.a},df20:function(t,i,e){"use strict";(function(t){e("6a54");var a=e("f5bd").default;Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var o=a(e("9b1b")),n=a(e("0157")),s=e("8f59"),r={data:function(){return{cargoPosition:{name:"",code:"",containerType:0,selPartition:0,storeHouseName:"",storehouseId:-1,partition:{},partitionId:0,partitionName:""},containerIndex:0,storehouse:{},partitionData:[],containerTypeData:["拣货","备货","存储"],nameAndCodeSync:!1}},created:function(){},watch:{storehouse:function(i,e){i&&i[0]?(this.$set(this.cargoPosition,"storehouseId",i[0].id),this.$set(this.cargoPosition,"storehouseName",i[0].name),this.getPositionCode(i[0].id)):(this.$set(this.cargoPosition,"storehouseId",-1),this.$set(this.cargoPosition,"storehouseName","")),t.log("this.cargoPosition",this.cargoPosition,i)},"cargoPosition.code":function(t,i){!this.nameAndCodeSync||this.cargoPosition.id&&!i||(this.cargoPosition.name=t)}},computed:(0,o.default)({},(0,s.mapState)(["params"])),methods:(0,o.default)((0,o.default)({},(0,s.mapMutations)(["setparams"])),{},{validate:function(){if(!this.cargoPosition.code)return uni.showToast({title:"请输入货位编号",icon:"none",duration:1e3}),!1;if(!this.cargoPosition.name)return uni.showToast({title:"请输入货位名称",icon:"none",duration:1e3}),!1;if(!this.cargoPosition.partition||!this.cargoPosition.partition.id)return uni.showToast({title:"请选择仓库分区",icon:"none",duration:1e3}),!1;if(!this.cargoPosition.storehouseId)return uni.showToast({title:"请选择仓库",icon:"none",duration:1e3}),!1;var t=this.cargoPosition,i={code:t.code,name:t.name,storehouseId:t.storehouseId,storehouseName:t.storehouseName,partitionId:t.partition.id,partitionName:t.partition.name};return t.id&&(i={id:t.id,data:i}),i},submit:function(){var t=this.validate();if(t){var i=this,e="savePosition";t.id&&(e="updatePosition"),n.default[e](t).then((function(e){e.meta.success?(uni.showToast({title:"保存成功",icon:"none",duration:1e3}),setTimeout((function(){var a=getCurrentPages(),o=a[a.length-2];e.data._containerIndex=i.containerIndex,o.$vm.addPositionProduct(e.data,Boolean(t.id)),uni.navigateBack({delta:1})}),500)):uni.showToast({title:e.meta.message,icon:"none",duration:1e3})}))}},bindPickerChange:function(t){this.cargoPosition.containerType=t.target.value},bindPickerChange1:function(t){this.cargoPosition.selPartition=t.target.value,this.cargoPosition.partition=this.partitionData[t.target.value]},loadData:function(){var t=this;n.default.getStorehouseArea().then((function(i){i.meta.success?(t.partitionData=i.data,!t.cargoPosition.partitionId&&(t.cargoPosition.partition=i.data[0])):uni.showToast({title:i.meta.message,icon:"none",duration:1e3})}))},warehouseList:function(){this.setparams({searchtype:"organizationInfo",filed:"storehouse"}),uni.navigateTo({url:"/pages/index/components/toolssearchlist/toolssearchlist"})},getPositionCode:function(t){var i=this;n.default.getPositionCode({storehouseId:t}).then((function(t){t.meta.success&&i.$set(i.cargoPosition,"code",t.data)}))},getPosition:function(i){var e=this,a=this;n.default.getPosition(i).then((function(i){i.meta.success&&(i.data.partition={id:i.data.partitionId,name:i.data.partitionName},a.$set(a,"cargoPosition",i.data),t.log("this.cargoPosition",e.cargoPosition))}))}}),onLoad:function(i){t.log(i),this.nameAndCodeSync=uni.getStorageSync("cargoNameAndCodeSync");var e=JSON.parse(i.data);this.containerIndex=e.index||0,-1==i.id?(delete this.cargoPosition.id,e&&e.partitionId&&(this.cargoPosition.partition={id:e.partitionId,name:e.partitionName},this.cargoPosition.partitionId=e.partitionId,this.cargoPosition.partitionName=e.partitionName),e&&e.storehouseId?(this.cargoPosition.storehouseId=e.storehouseId,this.cargoPosition.storehouseName=e.storehouseName,this.getPositionCode(e.storehouseId)):this.warehouseList()):(this.getPosition(i.id),uni.setNavigationBarTitle({title:"编辑货位"})),this.loadData()}};i.default=r}).call(this,e("ba7c")["default"])}}]);