(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-shoppingMallAnalysis-index"],{"0b54":function(t,e,a){"use strict";a("6a54");var n=a("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=n(a("fcf3")),r={data:function(){return{chart:null,clickData:null,id:""}},created:function(){},mounted:function(){if("object"===(0,i.default)(window.echarts))this.init();else{var t=document.createElement("script");t.src="./static/echarts.min.js",t.onload=this.init,document.head.appendChild(t)}},methods:{init:function(){this.chart=echarts.init(document.getElementById("echartsId"))},update:function(t){this.chart.setOption(t,t.notMerge)}}};e.default=r},1851:function(t,e,a){"use strict";var n=a("8bdb"),i=a("84d6"),r=a("1cb5");n({target:"Array",proto:!0},{fill:i}),r("fill")},"3b08":function(t,e,a){"use strict";(function(t){a("6a54");var n=a("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("c223"),a("fd3c");var i=n(a("9b1b")),r=n(a("2634")),o=n(a("2fdc")),c=n(a("8ce5")),s=a("f55d"),u={visualMap:[{show:!1,type:"continuous",dimension:0,min:0,max:6,inRange:{color:["#52CCA3","#52CCA3","#52CCA3"]}}],grid:{left:"15%",top:"5%",bottom:"10%",right:"10%"},xAxis:{type:"category"},yAxis:{type:"value",axisLabel:{show:!0,formatter:function(t){var e=t+"";return e.length>4?e.substring(0,e.length-4)+"万":e}}},series:[{type:"line"}]},d=[["days","orderNum"],["days","orderMoney"],["days","activityNum"],["days","khNum"]],f={components:{myecharts:c.default},data:function(){return{activeDate:1,activeTab:0,list:[],option:{}}},created:function(){this.getList()},methods:{changeDate:function(t){this.activeDate!==t&&(this.activeDate=t,this.getList())},changeTab:function(t){this.activeTab!==t&&(this.activeTab=t,this.setOption())},getData:function(t){var e=this;return(0,o.default)((0,r.default)().mark((function a(){var n;return(0,r.default)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return uni.showLoading({title:"加载中"}),a.next=3,e.get("api/stat/statistical/mall",{dateType:t},5);case 3:return n=a.sent,a.next=6,(0,s.wait)(300);case 6:if(uni.hideLoading(),!n.meta.success){a.next=11;break}return a.abrupt("return",n.data||null);case 11:uni.showToast({title:n.meta.message,icon:"none",duration:2e3});case 12:case"end":return a.stop()}}),a)})))()},getList:function(){var t=this;return(0,o.default)((0,r.default)().mark((function e(){var a;return(0,r.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.getData(t.activeDate);case 2:a=e.sent,a&&(t.list=[].concat(a||[])),t.setOption();case 5:case"end":return e.stop()}}),e)})))()},setOption:function(){var e=this;return(0,o.default)((0,r.default)().mark((function a(){var n,o,c;return(0,r.default)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!(e.list.length<=0)){a.next=2;break}return a.abrupt("return");case 2:return uni.showLoading({title:"正在生成图表..."}),n=d[e.activeTab],o=Array.prototype.map.call(e.list,(function(t){return n.map((function(e){return t[e]||0}))})),c={source:[n].concat(o)},t.log(c),a.next=9,(0,s.wait)(300);case 9:uni.hideLoading(),e.option=(0,i.default)((0,i.default)({},u),{},{dataset:c});case 11:case"end":return a.stop()}}),a)})))()},drawEcharts:function(t){this.$refs.orderShop.update(t)}}};e.default=f}).call(this,a("ba7c")["default"])},4248:function(t,e,a){"use strict";a.d(e,"b",(function(){return n})),a.d(e,"c",(function(){return i})),a.d(e,"a",(function(){}));var n=function(){var t=this.$createElement,e=this._self._c||t;return e("v-uni-view",{wxsProps:{"change:prop":"option"},staticClass:"echarts",style:{height:this.height+"upx"},attrs:{id:"echartsId",prop:this.option,"change:prop":this.echarts.update}})},i=[]},"53da":function(t,e,a){"use strict";var n=a("6844"),i=a.n(n);i.a},6844:function(t,e,a){var n=a("898d");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var i=a("967d").default;i("52811a1f",n,!0,{sourceMap:!1,shadowMode:!1})},"898d":function(t,e,a){var n=a("c86c");e=n(!1),e.push([t.i,'.page[data-v-a0f41e86]{height:100%;background:#f6f6f6;font-size:%?32?%;font-family:PingFangSC-Medium,PingFang SC;font-weight:400;color:#333;line-height:%?45?%;display:flex;flex-direction:column}.page .box[data-v-a0f41e86]{background:#fff;height:%?800?%;box-sizing:border-box;padding:%?33?% 0;display:flex;flex-direction:column;overflow:hidden}.page .box + .box[data-v-a0f41e86]{margin-top:%?20?%}.page .box .header[data-v-a0f41e86]{font-weight:500;display:flex;justify-content:space-between;padding:0 %?40?%}.page .box .header .custom[data-v-a0f41e86]{font-size:%?24?%;line-height:%?33?%;font-weight:400;display:flex}.page .box .header .custom .btn[data-v-a0f41e86]{padding:%?10?% %?20?%;background:#f5f6fa;border-radius:%?32?%;opacity:1;transition:all .3s}.page .box .header .custom .btn + .btn[data-v-a0f41e86]{margin-left:%?13?%}.page .box .header .custom .btn.active[data-v-a0f41e86]{color:#ffb822;background:rgba(255,184,34,.2)}.page .box .tabBox[data-v-a0f41e86]{font-size:%?28?%;line-height:%?33?%;color:#666;display:flex;justify-content:space-between;margin:%?40?% 0;padding:0 %?40?%}.page .box .tabBox .tab[data-v-a0f41e86]{padding-bottom:%?22?%;transition:all .3s;position:relative}.page .box .tabBox .tab[data-v-a0f41e86]::before{content:"";position:absolute;bottom:0;left:0;height:%?4?%;width:%?0?%;-webkit-transform:translateX(0);transform:translateX(0);background:#ffc300;transition:all .3s;overflow:hidden}.page .box .tabBox .tab.active[data-v-a0f41e86]{color:#333}.page .box .tabBox .tab.active[data-v-a0f41e86]::before{left:50%;width:%?64?%;-webkit-transform:translateX(-50%);transform:translateX(-50%)}.page .box .echart[data-v-a0f41e86]{height:%?550?%;overflow-x:auto}',""]),t.exports=e},"8ce5":function(t,e,a){"use strict";a.r(e);var n=a("4248"),i=a("90a3");for(var r in i)["default"].indexOf(r)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(r);var o=a("a132");for(var r in o)["default"].indexOf(r)<0&&function(t){a.d(e,t,(function(){return o[t]}))}(r);a("cded");var c=a("828b");i["default"].__module="echarts";var s=Object(c["a"])(o["default"],n["b"],n["c"],!1,null,"659d78e0",null,!1,n["a"],i["default"]);e["default"]=s.exports},"90a3":function(t,e,a){"use strict";a.r(e);var n=a("0b54"),i=a.n(n);for(var r in n)["default"].indexOf(r)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(r);e["default"]=i.a},9493:function(t,e,a){"use strict";a.d(e,"b",(function(){return n})),a.d(e,"c",(function(){return i})),a.d(e,"a",(function(){}));var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{staticClass:"page"},[a("v-uni-view",{staticClass:"box"},[a("v-uni-view",{staticClass:"header"},[a("v-uni-view",[t._v("商城数据趋势图")]),a("v-uni-view",{staticClass:"custom"},[a("v-uni-view",{staticClass:"btn",class:{active:1==t.activeDate},on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.changeDate(1)}}},[t._v("近7天")]),a("v-uni-view",{staticClass:"btn",class:{active:2==t.activeDate},on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.changeDate(2)}}},[t._v("近30天")]),a("v-uni-view",{staticClass:"btn",class:{active:3==t.activeDate},on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.changeDate(3)}}},[t._v("本月")])],1)],1),a("v-uni-view",{staticClass:"tabBox"},[a("v-uni-view",{staticClass:"tab",class:{active:0==t.activeTab},on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.changeTab(0)}}},[t._v("下单笔数")]),a("v-uni-view",{staticClass:"tab",class:{active:1==t.activeTab},on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.changeTab(1)}}},[t._v("下单金额")]),a("v-uni-view",{staticClass:"tab",class:{active:2==t.activeTab},on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.changeTab(2)}}},[t._v("活跃用户")]),a("v-uni-view",{staticClass:"tab",class:{active:3==t.activeTab},on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.changeTab(3)}}},[t._v("下单客户数")])],1),a("v-uni-view",{staticClass:"echart"},[a("myecharts",{ref:"orderShop",attrs:{option:t.option}})],1)],1)],1)},i=[]},9806:function(t,e,a){"use strict";a.r(e);var n=a("3b08"),i=a.n(n);for(var r in n)["default"].indexOf(r)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(r);e["default"]=i.a},a132:function(t,e,a){"use strict";a.r(e);var n=a("d3ab"),i=a.n(n);for(var r in n)["default"].indexOf(r)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(r);e["default"]=i.a},cded:function(t,e,a){"use strict";var n=a("fa14"),i=a.n(n);i.a},d3ab:function(t,e,a){"use strict";a("6a54"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("64aa");var n={name:"Echarts",props:{option:{type:Object,required:!0},height:{type:Number,default:550}}};e.default=n},dbefe:function(t,e,a){var n=a("c86c");e=n(!1),e.push([t.i,".echarts[data-v-659d78e0]{width:100%;height:100%;overflow-x:auto}",""]),t.exports=e},f229:function(t,e,a){"use strict";a.r(e);var n=a("9493"),i=a("9806");for(var r in i)["default"].indexOf(r)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(r);a("53da");var o=a("828b"),c=Object(o["a"])(i["default"],n["b"],n["c"],!1,null,"a0f41e86",null,!1,n["a"],void 0);e["default"]=c.exports},f55d:function(t,e,a){"use strict";(function(t){a("6a54");var n=a("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.yearTranforDate=e.weeks=e.weekTranforDate=e.wait=e.txMapMarkerUrlByList=e.txMapMarkerUrl=e.showModal=e.seasons=e.seasonTranforDate=e.monthTranforDate=e.getSystemYears=e.getDateRangeFordiffDays=e.getCurrentWeekForYear=e.getCurrentSeason=e.default=void 0,a("bf0f"),a("fd3c"),a("1851"),a("e966"),a("c223"),a("d4b5");var i=n(a("63d3")),r=function(t){return new Promise((function(e){setTimeout(e,t)}))};e.wait=r;e.showModal=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.title,a=void 0===e?"提示":e,n=t.content,i=void 0===n?"":n;return new Promise((function(t,e){uni.showModal({title:a,content:i,success:function(e){e.confirm?t(!0):e.cancel&&t(!1)},fail:e})}))};e.getSystemYears=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.startYear,a=void 0===e?1876:e,n=t.timeRang,i=void 0===n?300:n;return Array(i).fill(a).map((function(t,e){return t+e}))};var o=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.month,a=void 0===e?1:e;return~~(parseInt(a)/4)};e.getCurrentSeason=o;var c=["第一季度","第二季度","第三季度","第四季度"];e.seasons=c;var s=function(){return Array(52).fill(1).map((function(t,e){return"".concat(t+e,"周")}))}();e.weeks=s;e.getCurrentWeekForYear=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=t?new Date(t):new Date,a=t?new Date(t):new Date;a.setMonth(0),a.setDate(1);var n=Math.ceil((e-a)/864e5);return Math.ceil(n/7)+1};var u=function(t,e){var a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(t&&e){var n=864e5,i=new Date(t,0,1),r=new Date(i.getTime()+7*e*n),o=new Date(weekEndDate.getTime()-6*n);return a?{dateStart:r.getTime(),dateEnd:o.getTime()}:{dateStart:r,dateEnd:o}}};e.weekTranforDate=u;var d=function(t,e){var a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(t&&e){var n=[0,3,6,9],i=[31,30,30,31],r=new Date(t,n[e-1],1),o=new Date(t,n[e-1]+2,i[e-1]);return a?{dateStart:r.getTime(),dateEnd:o.getTime()}:{dateStart:r,dateEnd:o}}};e.seasonTranforDate=d;var f=function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(t){var a=new Date(t,0,1),n=new Date(t,11,31);return e?{dateStart:a.getTime(),dateEnd:n.getTime()}:{dateStart:a,dateEnd:n}}};e.yearTranforDate=f;e.monthTranforDate=function(t,e){var a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(t&&e){var n=864e5,i=new Date(t,e-1,1),r=new Date(t,e,1),o=new Date(r.getTime()-n);return a?{dateStart:i.getTime(),dateEnd:o.getTime()}:{dateStart:i,dateEnd:o}}};var l=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.date,a=void 0===e?"":e,n=t.diffDays,r=void 0===n?0:n,o=t.isBefore,c=void 0===o||o,s=t.isFormatDate,u=void 0===s||s,d=a?new Date(a):new Date,f=864e5,l=r*f,v=new Date(c?d.getTime()-l:d.getTime()+l),h=c?v:d,p=c?d:v;return u?[i.default.formatDate(h),i.default.formatDate(p)]:[h,p]};e.getDateRangeFordiffDays=l;var v=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=(t.key,t.latitude),n=t.longitude,i=t.title,r="baidumap://map/marker?location=".concat(a,",").concat(n,"&title=").concat(encodeURIComponent(i||"位置"),"&content=").concat(encodeURIComponent(i||""),"&src=").concat(encodeURIComponent("悦商云APP"));if(!e)return r;uni.navigateTo({url:"/pages/navigator/navigator?params="+JSON.stringify({marker:t})})};e.txMapMarkerUrl=v;var h=function(e,a){e.key;var n=e.referer;if(!a||0===a.length)return"";var i=a[0],r=i.latitude,o=i.longitude,c=i.title,s="baidumap://map/marker?location=".concat(r,",").concat(o,"&title=").concat(encodeURIComponent(c||"位置"),"&content=").concat(encodeURIComponent("共".concat(a.length,"个位置")),"&src=").concat(encodeURIComponent(n||"悦商云APP"));return t.log("百度地图标记:",s),s};e.txMapMarkerUrlByList=h;var p={wait:r,getCurrentSeason:o,seasons:c,weekTranforDate:u,seasonTranforDate:d,yearTranforDate:f,getDateRangeFordiffDays:l,txMapMarkerUrl:v,txMapMarkerUrlByList:h};e.default=p}).call(this,a("ba7c")["default"])},fa14:function(t,e,a){var n=a("dbefe");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var i=a("967d").default;i("0ffbe3b6",n,!0,{sourceMap:!1,shadowMode:!1})}}]);