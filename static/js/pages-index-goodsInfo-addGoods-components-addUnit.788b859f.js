(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-index-goodsInfo-addGoods-components-addUnit"],{1305:function(i,t,e){"use strict";var n=e("34e9"),a=e.n(n);a.a},"245c":function(i,t,e){"use strict";e.r(t);var n=e("e2d4"),a=e.n(n);for(var s in n)["default"].indexOf(s)<0&&function(i){e.d(t,i,(function(){return n[i]}))}(s);t["default"]=a.a},"34e9":function(i,t,e){var n=e("9753");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[i.i,n,""]]),n.locals&&(i.exports=n.locals);var a=e("967d").default;a("4f1457a0",n,!0,{sourceMap:!1,shadowMode:!1})},"5c34":function(i,t,e){"use strict";e.r(t);var n=e("6396"),a=e("245c");for(var s in a)["default"].indexOf(s)<0&&function(i){e.d(t,i,(function(){return a[i]}))}(s);e("1305");var r=e("828b"),c=Object(r["a"])(a["default"],n["b"],n["c"],!1,null,"960bbece",null,!1,n["a"],void 0);t["default"]=c.exports},6396:function(i,t,e){"use strict";e.d(t,"b",(function(){return n})),e.d(t,"c",(function(){return a})),e.d(t,"a",(function(){}));var n=function(){var i=this,t=i.$createElement,e=i._self._c||t;return e("v-uni-view",{staticClass:"addUnit"},[i.unitList.length?e("v-uni-view",i._l(i.unitList,(function(t,n){return e("v-uni-view",{key:n},[e("v-uni-view",{style:n?"position: relative;border-bottom: 1upx solid #CDCDCD;":""},[e("v-uni-view",{staticClass:"item"},[e("v-uni-view",{staticClass:"item-lef"},[i._v(i._s(n?"辅助单位"+n:"基本单位")),e("v-uni-text"),i._v(": ")],1),e("v-uni-view",{staticClass:"item-rig"},[e("v-uni-picker",{staticStyle:{width:"60%"},attrs:{id:n,"range-key":"name",value:t.rangeIndex,range:i.array},on:{change:function(t){arguments[0]=t=i.$handleEvent(t),i.bindPickerChange(t,n)}}},[e("v-uni-view",{staticStyle:{"text-align":"center",color:"#666666"}},[i._v(" "+i._s(t.largeUnit?t.largeUnit:"请选择")+" ")])],1)],1)],1),e("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:n,expression:"index"}],staticClass:"item"},[e("v-uni-view",{staticClass:"item-lef"},[i._v(i._s("辅助"+n+"规格")),e("v-uni-text"),i._v(": ")],1),e("v-uni-view",{staticClass:"item-rigf"},[e("v-uni-text",[i._v("=")]),e("v-uni-input",{attrs:{type:"number",placeholder:"请输入"},model:{value:t.packingSpecification,callback:function(e){i.$set(t,"packingSpecification",e)},expression:"item.packingSpecification"}})],1),e("v-uni-text",{directives:[{name:"show",rawName:"v-show",value:i.unitList[0].largeUnit,expression:"unitList[0].largeUnit"}],staticClass:"unitFrist"},[i._v(i._s(i.unitList[0].largeUnit))])],1),e("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:n>1&&!i.isEdit,expression:"index>1&&!isEdit"}],staticClass:"item-img",on:{click:function(t){arguments[0]=t=i.$handleEvent(t),i.deleteUnit(n)}}},[e("v-uni-image",{attrs:{src:"/static/img/index/delete.png"}})],1)],1)],1)})),1):i._e(),i.useMultUnit&&!i.isEdit?e("v-uni-view",{staticClass:"addButtom",on:{click:function(t){arguments[0]=t=i.$handleEvent(t),i.addUnit.apply(void 0,arguments)}}},[e("v-uni-text",{staticClass:"addTEXT"},[i._v("+")]),e("v-uni-text",[i._v("添加辅助单位")])],1):i._e(),e("v-uni-button",{staticStyle:{position:"fixed",bottom:"0",width:"100%",background:"#ffb822","border-radius":"0"},on:{click:function(t){arguments[0]=t=i.$handleEvent(t),i.saveUnit.apply(void 0,arguments)}}},[i._v("保存")])],1)},a=[]},9753:function(i,t,e){var n=e("c86c");t=n(!1),t.push([i.i,".item[data-v-960bbece],\r\n.item-textarea[data-v-960bbece]{padding:0 %?40?%;font-size:%?28?%;background:#fff}.item[data-v-960bbece]{display:flex;flex-direction:row;height:%?80?%;line-height:%?88?%;margin-top:%?10?%\r\n\t/* border: 1upx solid; */}.item uni-image[data-v-960bbece]{width:%?44?%;height:%?44?%;margin-top:%?20?%}.item-lef[data-v-960bbece]{width:30%\r\n\t/* border: 1upx solid red; */}.item-lef uni-text[data-v-960bbece]{color:red}.item-rigf[data-v-960bbece]{display:flex;width:60%;margin-left:%?20?%;color:#666}.item-rig[data-v-960bbece]{width:65%;margin-left:%?20?%;color:#666}.item-rig-vie[data-v-960bbece]{color:#666;margin-top:%?2?%}.item-rig uni-picker[data-v-960bbece]{height:%?80?%;line-height:%?80?%}.item-rig uni-input[data-v-960bbece]{height:%?80?%;line-height:%?80?%;color:#666;flex:1}.item-rigf uni-input[data-v-960bbece]{height:%?80?%;line-height:%?80?%;color:#666;flex:1;text-align:center;font-size:%?30?%}.item-text[data-v-960bbece]{height:%?80?%;line-height:%?80?%}.item-textarea[data-v-960bbece]{height:%?295?%}.item-textarea uni-textarea[data-v-960bbece]{width:100%;padding:%?10?%;font-size:%?32?%;height:%?150?%!important}.topitem[data-v-960bbece]{border-bottom:%?1?% solid #cdcdcd}.addButtom[data-v-960bbece]{height:%?80?%;text-align:center;margin-top:%?10?%;line-height:%?80?%;display:flex;flex-direction:row;justify-content:center}.addTEXT[data-v-960bbece]{background:#ffb822;width:%?48?%;line-height:%?48?%;height:%?48?%;border-radius:48px;margin-top:%?16?%;margin-right:%?10?%;color:#fff}.unitFrist[data-v-960bbece]{width:%?160?%;display:flex;flex-wrap:nowrap}.addUnit[data-v-960bbece]{font-size:16px;color:#333}.item-img[data-v-960bbece]{position:absolute;right:4px;bottom:8px;z-index:99}.item-img uni-image[data-v-960bbece]{width:24px;height:24px}",""]),i.exports=t},e2d4:function(i,t,e){"use strict";(function(i){e("6a54");var n=e("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(e("9b1b"));e("aa9c"),e("dd2b"),e("fd3c"),e("bf0f"),e("2797"),e("d4b5"),e("bd06"),e("3efd");var s={components:{},data:function(){return{AuxiliaryData:[],unitList:[],array:[],useMultUnit:!1,isEdit:!1,basicIndex:0}},methods:{addUnit:function(){this.unitList.length<=4?this.unitList.push({rangeIndex:-1,largeUnit:"",smallUnit:"",packingSpecification:""}):uni.showToast({title:"只能添加4个辅助单位",duration:2e3,icon:"none",mask:!0})},deleteUnit:function(i){this.unitList.splice(i,1)},bindPickerChange:function(i,t){var e=this;this.$set(this.unitList[t],"rangeIndex",i.target.value),this.$set(this.unitList[t],"largeUnit",this.array[i.target.value].name),this.$set(this.unitList[t],"smallUnit",this.unitList[0].largeUnit),t||this.unitList.map((function(t){return t.smallUnit=e.array[i.target.value].name}))},saveUnit:function(){var t=this.unitList.every((function(i){return i.largeUnit&&i.packingSpecification}));if(t){var e={smallUnit:this.unitList[0].largeUnit,largeUnit:this.unitList[1].largeUnit,packingSpecification:this.unitList[1].packingSpecification},n=e.smallUnit+"/("+e.largeUnit+"="+e.packingSpecification+e.smallUnit+")";this.useMultUnit&&this.unitList.forEach((function(i,t){n+=t>1?"/("+i.largeUnit+"="+i.packingSpecification+e.smallUnit+")":""}));var a=getCurrentPages(),s=(a[a.length-1],a[a.length-2]);if(s.$vm.unitName=n,s.$vm.basicUnit=e,this.isEdit){var r=JSON.parse(JSON.stringify(this.unitList)),c=r.shift(1);return r.splice(this.basicIndex,0,c),i.log("---auxiliaryUnit---",r),s.$vm.auxiliaryUnit=r,s.$vm.changePackingSpecification(),void uni.navigateBack({delta:1})}s.$vm.auxiliaryUnit=this.unitList,s.$vm.changePackingSpecification(),i.log(e),uni.navigateBack({delta:1})}else uni.showToast({title:"请添加单位或规格",duration:2e3,icon:"none",mask:!0})},queryTypeCode:function(i){return this.array.findIndex((function(t){return t.name==i}))},getUnit:function(){var i=this,t=this;this.get("api/basedata/dictionnaryReturn",{dictionaryTypeId:1,status:1},1).then((function(e){var n=e.data;t.array=n,i.AuxiliaryData.length?i.AuxiliaryData.forEach((function(e,n){e.basicUnit&&i.isEdit?(i.basicIndex=n,t.unitList.unshift((0,a.default)((0,a.default)({},e),{},{rangeIndex:t.queryTypeCode(e.largeUnit)}))):t.unitList.push((0,a.default)((0,a.default)({},e),{},{rangeIndex:t.queryTypeCode(e.largeUnit)}))})):i.unitList=[{rangeIndex:-1,largeUnit:"",smallUnit:"",packingSpecification:1},{rangeIndex:-1,largeUnit:"",smallUnit:"",packingSpecification:""}]}))}},onLoad:function(t){this.unitList=[],this.AuxiliaryData=JSON.parse(decodeURIComponent(t.AuxiliaryData))||[],this.isEdit="0"!=t.isEdit,i.log(this.isEdit,t.isEdit),this.getUnit(),this.useMultUnit=uni.getStorageSync("useMultUnit")}};t.default=s}).call(this,e("ba7c")["default"])}}]);