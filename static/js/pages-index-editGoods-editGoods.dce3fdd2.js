(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-index-editGoods-editGoods"],{"0f5b":function(t,e,i){"use strict";i.r(e);var a=i("b3ec"),n=i("3c0c");for(var o in n)["default"].indexOf(o)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(o);i("b91f");var s=i("828b"),d=Object(s["a"])(n["default"],a["b"],a["c"],!1,null,"672ec44d",null,!1,a["a"],void 0);e["default"]=d.exports},3687:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAACxklEQVRIS8WXzVLTUBTH/4ekJmEQkKkgosKAduHehQ/guNGVC3wFdWTGJxCfwBFHeQVZuHLluJeFexcoDFWrUKsCQpOQpMc5oem06c0HTofeXXvv//zuPfd83BByDGYu1OvBTY34BgPXGJgjYFSkDOwQsE7Ah4Dp3eCg9paIvCyzlLaAmUccx38EpgcAF7OMHc1TDcQvTFN/SkS7SZpEsOv680HASwSM5wN2rmKgqmm0YBj6ikrfBWZmzXGC52C+9z/ALg3RsmlqD4koaJ/rAAvUtf0VBu70BNo0QsBrw9Ln2+EdYNv2X/bspPGdEy1bln4/+rsFljttBPyqlyeN2xrQ6G505yFYote2/TVVIHmeB13XQZSaAC0GM8P3fRQKha4zSMBZll6SaA+tuXaw2ODG4/jK7eoP1GpVmIaJ6em5cANpQ4Dl8joc10GxOI6J8cnu5YQnllVYJCkOjh18V+Xp+sYaHMcOxYZhYGb6ciJcoJvlz3BdN1xvmhbmZkuKfVLNtLTzdHDg3xogfqM6yd7eLr5+22xNJcHjUBFcvDCD4eERpYMaTLfJqXvPGFhIcuHO7h9UKl8S4Sro1NQljI6cSbwVApbIrnvvAVxPu7skuGja3Su/s6BNzirV6952nrKogoeB2bzTY0ClsVTlxBINp/Lkbxzersl50khyeCywqH79rmFrq9Kxz8lzUxgby9m8jpSHuV0tq1WBlCfV4t6MXJ0ZXGnQyGhWnsfgq5nplASVO5WRlmpJcROmU1oBSYNGeZqV5yp4WEDSSqYU/A0pm67T0quiNw6X2j47W0poLM2SKRZt21sEo6tJSGda+/QxFRpNxuGlK1eVHQpRkxBhWluUDrW//xdnixOJtTeCS23/WdvG0NBpZWfqaotHFagPD4Fox315+jRd3p/HXgQ/8edte86d+IO+Hd6XT5jYBnr+0fYPIzrASGVx0+UAAAAASUVORK5CYII="},"3c0c":function(t,e,i){"use strict";i.r(e);var a=i("741c"),n=i.n(a);for(var o in a)["default"].indexOf(o)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(o);e["default"]=n.a},"4c4a":function(t,e,i){var a=i("a9eb");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=i("967d").default;n("687c4114",a,!0,{sourceMap:!1,shadowMode:!1})},"59b8":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqBAMAAAA37dRoAAAAFVBMVEVHcEyXl5ebm5uXl5eXl5eYmJiXl5dhgIfDAAAABnRSTlMAugiMpToMNkwxAAAAU0lEQVQoz2NgGOwgUAGLIGuaEBZRxrRELIqZxLApZlJMS2HAqtiBQsUMOBUbYFWcTLxiRlIUYxXFah0T5UpTiA0d0pQqEBmb2GMeeyrBnqIGIQAA2U8VBfend9IAAAAASUVORK5CYII="},"741c":function(t,e,i){"use strict";(function(t){i("6a54");var a=i("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=a(i("2634")),o=a(i("2fdc"));i("5ef2"),i("bf0f"),i("2797"),i("aa9c"),i("fd3c");var s=a(i("eaf4")),d={components:{},data:function(){return{imageList:[],unitArray:[],largeUnitIndex:0,smallUnitIndex:0,goods:{id:"",name:"",largeUnit:"",smallUnit:"",brandId:"",brandName:"",barCode:"",picture:"",typeSpecification:"",packingSpecification:""},eventChannel:null,Imgpermissions:!1}},mounted:function(){},onLoad:function(e){if(t.log("options::",e),e.goods){this.goods=JSON.parse(e.goods);var i=this.getOpenerEventChannel();this.eventChannel=i}this.unitData(),this.ImagesData(),this.getpermissions()},onShow:function(){},methods:{selectBrand:function(){uni.navigateTo({url:"../brandList/brandList"})},getpermissions:function(){var t=this;this.get("api/auxiliary/task/getRoleTaskList",null,1).then((function(e){if(e.meta.success)for(var i=0;i<e.data.length;i++)e.data[i].name.indexOf("商品图片上传")>-1&&(t.Imgpermissions=!0)}))},chooseImage:function(){var e=(0,o.default)((0,n.default)().mark((function e(){var i=this;return(0,n.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.Imgpermissions){e.next=2;break}return e.abrupt("return");case 2:uni.chooseImage({sourceType:["album","camera"],sizeType:["original"],count:9,success:function(e){t.log("v",e.tempFilePaths),uni.showLoading({title:"图片上传中"}),e.tempFilePaths.forEach((function(t){uni.uploadFile({url:s.default.pdcom+"/file/upload",filePath:t,name:"multipartfile",header:{"X-Token":uni.getStorageSync("Token"),"X-User":uni.getStorageSync("User")},success:function(t){uni.hideLoading();var e=JSON.parse(t.data);e.meta.success&&i.post("api/basicData/uploadfile",{businessType:e.data.businessType,filePath:e.data.filePath,fileSize:e.data.fileSize,fileType:e.data.fileType,name:e.data.name,path:e.data.sourceUrl,relationId:i.goods.id},1).then((function(t){t.meta.success&&i.imageList.push(t.data.uploadFile)}))},fail:function(t){uni.hideLoading()}})}))},fail:function(t){}});case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),previewImage:function(t){var e=t.target.dataset.src,i=this.imageList.map((function(t){return t.path}));uni.previewImage({current:e,urls:i})},unitData:function(){var t=this;this.get("api/basedata/dictionnary/page",{dictionaryTypeId:1,pageNum:1,pageSize:500},1).then((function(e){e.meta.success&&(t.unitArray=e.data.list)}))},ImagesData:function(){var t=this;this.get("api/basicData/uploadfile/list",{relationId:this.goods.id,businessType:1},1).then((function(e){e.meta.success&&(t.imageList=e.data)}))},bindLargeUnit:function(t){this.largeUnitIndex=t.target.value,this.goods.largeUnit=this.unitArray[this.largeUnitIndex].name},bindSmallUnit:function(t){this.smallUnitIndex=t.target.value,this.goods.smallUnit=this.unitArray[this.smallUnitIndex].name},editSave:function(){var e=this,i=!!this.$store.getters.getMenubtnsByUrl({parentUrl:"main/datum/productDatum/1",authority:"edit"})&&this.$store.getters.getMenubtnsByUrl({parentUrl:"main/datum/productDatum/1",authority:"edit"});if(t.log(i),i){var a=this.imageList.map((function(t){return t.id}));uni.showLoading({title:"保存中"}),this.post("api/basicData/update",{id:this.goods.id,brandId:this.goods.brandId,largeUnit:this.goods.largeUnit,name:this.goods.name,packingSpecification:this.goods.packingSpecification,smallUnit:this.goods.smallUnit,typeSpecification:this.goods.typeSpecification,barCode:this.goods.barCode,pictureList:a.join(","),releaseMall:this.goods.releaseMall||0},1).then((function(t){if(uni.hideLoading(),t.meta.success)uni.showToast({icon:"none",title:"保存成功",duration:1e3,mask:!0}),e.goods.picture=e.imageList&&e.imageList.length>0?e.imageList[0].path:"",e.eventChannel&&e.eventChannel.emit("changGoods",e.goods),setTimeout((function(){uni.navigateBack({delta:1})}),500);else{var i=t.data?t.data:t.meta.message;uni.showToast({icon:"none",title:i,duration:3e3})}}))}else uni.showToast({title:"您没有修改商品的权限",icon:"none",duration:1e3})}}};e.default=d}).call(this,i("ba7c")["default"])},a9eb:function(t,e,i){var a=i("c86c");e=a(!1),e.push([t.i,'.contain[data-v-672ec44d]{height:100vh;background-color:#f6f6f6}.edit-content[data-v-672ec44d]{width:%?750?%;height:%?600?%;background-color:#fff;display:flex;flex-direction:column}.edit-box[data-v-672ec44d]{width:%?750?%;height:%?112?%;display:flex;flex-direction:row;align-items:center}.edit-box uni-image[data-v-672ec44d]{width:%?40?%;height:%?40?%;padding-right:%?20?%\r\n\t/* padding-top: 10upx; */}.edit-txt[data-v-672ec44d]{width:%?130?%;margin-left:%?40?%;font-size:%?32?%;color:#333}.edit-input[data-v-672ec44d]{margin-left:%?40?%;color:#666;width:%?500?%;font-size:%?32?%}.pla-input[data-v-672ec44d]{font-size:%?32?%;color:#666;line-height:%?45?%}.edit-select[data-v-672ec44d]{width:%?161?%;height:%?68?%;background:#f7f6fb;border-radius:8px;margin:%?10?%;display:flex;justify-content:center;align-items:center}.select-picker[data-v-672ec44d]{font-size:%?28?%;height:%?68?%;width:%?160?%;display:flex;justify-content:center;align-items:center}.edit-num-input[data-v-672ec44d]{font-size:%?32?%;width:%?161?%;height:%?68?%;background:#f7f6fb;border-radius:8px;margin:%?10?%;padding:0 %?10?%}.edit-box .tet[data-v-672ec44d]{font-size:%?24?%;color:#666;line-height:%?33?%}.goods-picture[data-v-672ec44d]{width:%?670?%;background-color:#fff;margin-top:%?15?%;padding:%?40?%}\r\n\r\n/* 上传图片 */.uni-uploader[data-v-672ec44d]{flex:1;flex-direction:column}.uni-uploader-head[data-v-672ec44d]{display:flex;flex-direction:row;justify-content:space-between}.uni-uploader-title[data-v-672ec44d]{font-size:%?32?%;color:#333}.uni-uploader-info[data-v-672ec44d]{color:#b2b2b2}.uni-uploader-body[data-v-672ec44d]{margin-top:%?16?%}.uni-uploader__files[data-v-672ec44d]{display:flex;flex-direction:row;flex-wrap:wrap}.uni-uploader__file[data-v-672ec44d]{margin:%?15?%;width:%?134?%;height:%?134?%}.uni-uploader__img[data-v-672ec44d]{position:relative;display:inline-block;width:%?134?%;height:%?134?%}.uni-uploader__input-box[data-v-672ec44d]{position:relative;margin:%?10?%;width:%?134?%;height:%?134?%;border:%?1?% dashed #d9d9d9}.uni-uploader__input-box[data-v-672ec44d]:before,\r\n.uni-uploader__input-box[data-v-672ec44d]:after{content:" ";position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);background-color:#d9d9d9}.uni-uploader__input-box[data-v-672ec44d]:before{width:%?4?%;height:%?40?%}.uni-uploader__input-box[data-v-672ec44d]:after{width:%?40?%;height:%?4?%}.uni-uploader__input-box[data-v-672ec44d]:active{border-color:#999}.uni-uploader__input-box[data-v-672ec44d]:active:before,\r\n.uni-uploader__input-box[data-v-672ec44d]:active:after{background-color:#999}.uni-uploader__input[data-v-672ec44d]{position:absolute;z-index:100;top:0;left:0;width:100%;height:100%;opacity:0}.img-del[data-v-672ec44d]{position:absolute;top:%?0?%;right:%?0?%;display:none;width:%?30?%;height:%?30?%;border:%?1?% solid red}\r\n\r\n/* 保存 */.edit-save[data-v-672ec44d]{width:%?670?%;height:%?88?%;background:#ffb822;display:flex;justify-content:center;align-items:center;margin:%?60?% %?40?% 0;color:#fff;border-radius:%?8?%;border:%?1?% solid #ffb822}',""]),t.exports=e},b3ec:function(t,e,i){"use strict";i.d(e,"b",(function(){return a})),i.d(e,"c",(function(){return n})),i.d(e,"a",(function(){}));var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{staticClass:"contain"},[a("v-uni-view",{staticClass:"edit-content"},[a("v-uni-view",{staticClass:"edit-box"},[a("v-uni-view",{staticClass:"edit-txt"},[t._v("商品名称")]),a("v-uni-input",{staticClass:"edit-input",attrs:{maxlength:"100","placeholder-class":"pla-input",placeholder:"请输入商品名称"},model:{value:t.goods.name,callback:function(e){t.$set(t.goods,"name",e)},expression:"goods.name"}})],1),a("v-uni-view",{staticClass:"edit-box"},[a("v-uni-view",{staticClass:"edit-txt"},[t._v("条码")]),a("v-uni-input",{staticClass:"edit-input",attrs:{maxlength:"20","placeholder-class":"pla-input",placeholder:"请输入商品条码"},model:{value:t.goods.barCode,callback:function(e){t.$set(t.goods,"barCode",e)},expression:"goods.barCode"}})],1),a("v-uni-view",{staticClass:"edit-box"},[a("v-uni-view",{staticClass:"edit-txt"},[t._v("型号")]),a("v-uni-input",{staticClass:"edit-input",attrs:{maxlength:"30","placeholder-class":"pla-input",placeholder:"请输入商品型号"},model:{value:t.goods.typeSpecification,callback:function(e){t.$set(t.goods,"typeSpecification",e)},expression:"goods.typeSpecification"}})],1),a("v-uni-view",{staticClass:"edit-box"},[a("v-uni-view",{staticClass:"edit-txt"},[t._v("品牌")]),a("v-uni-input",{staticClass:"edit-input",attrs:{type:"text",disabled:!0},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.selectBrand.apply(void 0,arguments)}},model:{value:t.goods.brandName,callback:function(e){t.$set(t.goods,"brandName",e)},expression:"goods.brandName"}}),a("v-uni-image",{attrs:{src:i("59b8"),mode:""}})],1),a("v-uni-view",{staticClass:"edit-box"},[a("v-uni-view",{staticClass:"edit-txt"},[t._v("规格")]),a("v-uni-view",{staticClass:"tet"},[t._v("1")]),a("v-uni-picker",{staticClass:"edit-select",attrs:{value:t.largeUnitIndex,range:t.unitArray,"range-key":"name"},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.bindLargeUnit.apply(void 0,arguments)}}},[a("v-uni-view",{staticClass:"select-picker"},[t._v(t._s(t.goods.largeUnit))])],1),a("v-uni-view",{staticClass:"tet"},[t._v("X")]),a("v-uni-input",{staticClass:"edit-num-input",attrs:{type:"number"},model:{value:t.goods.packingSpecification,callback:function(e){t.$set(t.goods,"packingSpecification",e)},expression:"goods.packingSpecification"}}),a("v-uni-picker",{staticClass:"edit-select",attrs:{value:t.smallUnitIndex,range:t.unitArray,"range-key":"name"},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.bindSmallUnit.apply(void 0,arguments)}}},[a("v-uni-view",{staticClass:"select-picker"},[t._v(t._s(t.goods.smallUnit))])],1)],1)],1),a("v-uni-view",{staticClass:"goods-picture"},[a("v-uni-view",{staticClass:"uni-uploader"},[a("v-uni-view",{staticClass:"uni-uploader-head"},[a("v-uni-view",{staticClass:"uni-uploader-title"},[t._v("商品图片")])],1),a("v-uni-view",{staticClass:"uni-uploader-body"},[a("v-uni-view",{staticClass:"uni-uploader__files"},[t._l(t.imageList,(function(e,n){return[a("v-uni-view",{key:n+"_0",staticClass:"uni-uploader__file"},[a("v-uni-image",{staticClass:"img-del",attrs:{src:i("3687")}}),a("v-uni-image",{staticClass:"uni-uploader__img",attrs:{src:e.path,"data-src":e.path},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.previewImage.apply(void 0,arguments)}}})],1)]})),a("v-uni-view",{staticClass:"uni-uploader__input-box"},[a("v-uni-view",{staticClass:"uni-uploader__input",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.chooseImage.apply(void 0,arguments)}}})],1)],2)],1)],1)],1),a("v-uni-view",{staticClass:"edit-save",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.editSave.apply(void 0,arguments)}}},[t._v("保存")])],1)},n=[]},b91f:function(t,e,i){"use strict";var a=i("4c4a"),n=i.n(a);n.a}}]);